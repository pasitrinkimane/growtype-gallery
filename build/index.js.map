{"version":3,"file":"index.js","mappings":"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","sources":["webpack://plugin/./node_modules/@wordpress/icons/build-module/library/chevron-left.js","webpack://plugin/./node_modules/@wordpress/icons/build-module/library/chevron-right.js","webpack://plugin/./node_modules/@wordpress/icons/build-module/library/close-small.js","webpack://plugin/./node_modules/@wordpress/icons/build-module/library/edit.js","webpack://plugin/./node_modules/@wordpress/icons/build-module/library/gallery.js","webpack://plugin/./node_modules/@wordpress/icons/build-module/library/image.js","webpack://plugin/./node_modules/@wordpress/icons/build-module/library/pencil.js","webpack://plugin/./resources/styles/growtype-gallery.scss?59a0","webpack://plugin/./src/editor.scss?5db9","webpack://plugin/./src/constants.js","webpack://plugin/./src/deprecated.js","webpack://plugin/./src/edit-wrapper.js","webpack://plugin/./src/edit.js","webpack://plugin/./src/gallery.js","webpack://plugin/./src/gap-styles.js","webpack://plugin/./src/image/constants.js","webpack://plugin/./src/image/utils.js","webpack://plugin/./src/save.js","webpack://plugin/./src/shared-icon.js","webpack://plugin/./src/shared.js","webpack://plugin/./src/transforms.js","webpack://plugin/./src/use-get-media.js","webpack://plugin/./src/use-get-new-images.js","webpack://plugin/./src/use-image-sizes.js","webpack://plugin/./src/utils.js","webpack://plugin/./src/utils/init-block.js","webpack://plugin/./src/v1/constants.js","webpack://plugin/./src/v1/edit.js","webpack://plugin/./src/v1/gallery-image.js","webpack://plugin/./src/v1/gallery.js","webpack://plugin/./src/v1/save.js","webpack://plugin/./src/v1/shared.js","webpack://plugin/./node_modules/classnames/index.js","webpack://plugin/external window \"lodash\"","webpack://plugin/external window [\"wp\",\"blob\"]","webpack://plugin/external window [\"wp\",\"blockEditor\"]","webpack://plugin/external window [\"wp\",\"blocks\"]","webpack://plugin/external window [\"wp\",\"components\"]","webpack://plugin/external window [\"wp\",\"compose\"]","webpack://plugin/external window [\"wp\",\"coreData\"]","webpack://plugin/external window [\"wp\",\"data\"]","webpack://plugin/external window [\"wp\",\"element\"]","webpack://plugin/external window [\"wp\",\"hooks\"]","webpack://plugin/external window [\"wp\",\"i18n\"]","webpack://plugin/external window [\"wp\",\"keycodes\"]","webpack://plugin/external window [\"wp\",\"notices\"]","webpack://plugin/external window [\"wp\",\"primitives\"]","webpack://plugin/external window [\"wp\",\"viewport\"]","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://plugin/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://plugin/webpack/bootstrap","webpack://plugin/webpack/runtime/compat get default export","webpack://plugin/webpack/runtime/define property getters","webpack://plugin/webpack/runtime/hasOwnProperty shorthand","webpack://plugin/webpack/runtime/make namespace object","webpack://plugin/./src/index.js"],"sourcesContent":["import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst chevronLeft = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z\"\n}));\nexport default chevronLeft;\n//# sourceMappingURL=chevron-left.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst chevronRight = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z\"\n}));\nexport default chevronRight;\n//# sourceMappingURL=chevron-right.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst closeSmall = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z\"\n}));\nexport default closeSmall;\n//# sourceMappingURL=close-small.js.map","/**\n * Internal dependencies\n */\nimport { default as pencil } from './pencil';\nexport default pencil;\n//# sourceMappingURL=edit.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\nexport const gallery = createElement(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, createElement(Path, {\n  d: \"M20.2 8v11c0 .7-.6 1.2-1.2 1.2H6v1.5h13c1.5 0 2.7-1.2 2.7-2.8V8h-1.5zM18 16.4V4.6c0-.9-.7-1.6-1.6-1.6H4.6C3.7 3 3 3.7 3 4.6v11.8c0 .9.7 1.6 1.6 1.6h11.8c.9 0 1.6-.7 1.6-1.6zM4.5 4.6c0-.1.1-.1.1-.1h11.8c.1 0 .1.1.1.1V12l-2.3-1.7c-.3-.2-.6-.2-.9 0l-2.9 2.1L8 11.3c-.2-.1-.5-.1-.7 0l-2.9 1.5V4.6zm0 11.8v-1.8l3.2-1.7 2.4 1.2c.2.1.5.1.8-.1l2.8-2 2.8 2v2.5c0 .1-.1.1-.1.1H4.6c0-.1-.1-.2-.1-.2z\"\n}));\nexport default gallery;\n//# sourceMappingURL=gallery.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\nconst image = createElement(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, createElement(Path, {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z\"\n}));\nexport default image;\n//# sourceMappingURL=image.js.map","import { createElement } from \"@wordpress/element\";\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst pencil = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z\"\n}));\nexport default pencil;\n//# sourceMappingURL=pencil.js.map","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","export const LINK_DESTINATION_NONE = 'none';\nexport const LINK_DESTINATION_MEDIA = 'media';\nexport const LINK_DESTINATION_ATTACHMENT = 'attachment';\nexport const LINK_DESTINATION_MEDIA_WP_CORE = 'file';\nexport const LINK_DESTINATION_ATTACHMENT_WP_CORE = 'post';\nexport const LINK_DESTINATION_LIGHTBOX = 'lightbox';\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { map, some } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { RichText, useBlockProps } from '@wordpress/block-editor';\n\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA,\n\tLINK_DESTINATION_NONE,\n} from './constants';\nimport { isGalleryV2Enabled } from './shared';\n\nconst DEPRECATED_LINK_DESTINATION_MEDIA = 'file';\nconst DEPRECATED_LINK_DESTINATION_ATTACHMENT = 'post';\n\n/**\n * Original function to determine default number of columns from a block's\n * attributes.\n *\n * Used in deprecations: v1-6, for versions of the gallery block that didn't use inner blocks.\n *\n * @param {Object} attributes Block attributes.\n * @return {number}           Default number of columns for the gallery.\n */\nexport function defaultColumnsNumberV1( attributes ) {\n\treturn Math.min( 3, attributes?.images?.length );\n}\n\n/**\n * Original function to determine new href and linkDestination values for an image block from the\n * supplied Gallery link destination.\n *\n * Used in deprecations: v1-6.\n *\n * @param {Object} image       Gallery image.\n * @param {string} destination Gallery's selected link destination.\n * @return {Object}            New attributes to assign to image block.\n */\nexport function getHrefAndDestination( image, destination ) {\n\t// Need to determine the URL that the selected destination maps to.\n\t// Gutenberg and WordPress use different constants so the new link\n\t// destination also needs to be tweaked.\n\tswitch ( destination ) {\n\t\tcase DEPRECATED_LINK_DESTINATION_MEDIA:\n\t\t\treturn {\n\t\t\t\thref: image?.source_url || image?.url, // eslint-disable-line camelcase\n\t\t\t\tlinkDestination: LINK_DESTINATION_MEDIA,\n\t\t\t};\n\t\tcase DEPRECATED_LINK_DESTINATION_ATTACHMENT:\n\t\t\treturn {\n\t\t\t\thref: image?.link,\n\t\t\t\tlinkDestination: LINK_DESTINATION_ATTACHMENT,\n\t\t\t};\n\t\tcase LINK_DESTINATION_MEDIA:\n\t\t\treturn {\n\t\t\t\thref: image?.source_url || image?.url, // eslint-disable-line camelcase\n\t\t\t\tlinkDestination: LINK_DESTINATION_MEDIA,\n\t\t\t};\n\t\tcase LINK_DESTINATION_ATTACHMENT:\n\t\t\treturn {\n\t\t\t\thref: image?.link,\n\t\t\t\tlinkDestination: LINK_DESTINATION_ATTACHMENT,\n\t\t\t};\n\t\tcase LINK_DESTINATION_NONE:\n\t\t\treturn {\n\t\t\t\thref: undefined,\n\t\t\t\tlinkDestination: LINK_DESTINATION_NONE,\n\t\t\t};\n\t}\n\n\treturn {};\n}\n\nfunction runV2Migration( attributes ) {\n\tlet linkTo = attributes.linkTo ? attributes.linkTo : 'none';\n\n\tif ( linkTo === 'post' ) {\n\t\tlinkTo = 'attachment';\n\t} else if ( linkTo === 'file' ) {\n\t\tlinkTo = 'media';\n\t}\n\n\tconst imageBlocks = attributes.images.map( ( image ) => {\n\t\treturn getImageBlock( image, attributes.sizeSlug, linkTo );\n\t} );\n\n\tconst { images, ids, ...restAttributes } = attributes;\n\n\treturn [\n\t\t{\n\t\t\t...restAttributes,\n\t\t\tlinkTo,\n\t\t\tallowResize: false,\n\t\t},\n\t\timageBlocks,\n\t];\n}\n/**\n * Gets an Image block from gallery image data\n *\n * Used to migrate Galleries to nested Image InnerBlocks.\n *\n * @param {Object} image    Image properties.\n * @param {string} sizeSlug Gallery sizeSlug attribute.\n * @param {string} linkTo   Gallery linkTo attribute.\n * @return {Object}         Image block.\n */\nexport function getImageBlock( image, sizeSlug, linkTo ) {\n\treturn createBlock( 'core/image', {\n\t\t...( image.id && { id: parseInt( image.id ) } ),\n\t\turl: image.url,\n\t\talt: image.alt,\n\t\tcaption: image.caption,\n\t\tsizeSlug,\n\t\t...getHrefAndDestination( image, linkTo ),\n\t} );\n}\n\nconst v6 = {\n\tattributes: {\n\t\timages: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t\tsource: 'query',\n\t\t\tselector: '.blocks-gallery-item',\n\t\t\tquery: {\n\t\t\t\turl: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'src',\n\t\t\t\t},\n\t\t\t\tfullUrl: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-full-url',\n\t\t\t\t},\n\t\t\t\tlink: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-link',\n\t\t\t\t},\n\t\t\t\talt: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'alt',\n\t\t\t\t\tdefault: '',\n\t\t\t\t},\n\t\t\t\tid: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-id',\n\t\t\t\t},\n\t\t\t\tcaption: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'html',\n\t\t\t\t\tselector: '.blocks-gallery-item__caption',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tids: {\n\t\t\ttype: 'array',\n\t\t\titems: {\n\t\t\t\ttype: 'number',\n\t\t\t},\n\t\t\tdefault: [],\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: 'number',\n\t\t\tminimum: 1,\n\t\t\tmaximum: 8,\n\t\t},\n\t\tcaption: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tselector: '.blocks-gallery-caption',\n\t\t},\n\t\timageCrop: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tfixedHeight: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tlinkTo: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tsizeSlug: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'large',\n\t\t},\n\t},\n\tsupports: {\n\t\tanchor: true,\n\t\talign: true,\n\t},\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\timages,\n\t\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\t\timageCrop,\n\t\t\tcaption,\n\t\t\tlinkTo,\n\t\t} = attributes;\n\t\tconst className = `columns-${ columns } ${\n\t\t\timageCrop ? 'is-cropped' : ''\n\t\t}`;\n\n\t\treturn (\n\t\t\t<figure { ...useBlockProps.save( { className } ) }>\n\t\t\t\t<ul className=\"blocks-gallery-grid\">\n\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\tcase DEPRECATED_LINK_DESTINATION_MEDIA:\n\t\t\t\t\t\t\t\thref = image.fullUrl || image.url;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase DEPRECATED_LINK_DESTINATION_ATTACHMENT:\n\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst img = (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={ image.url }\n\t\t\t\t\t\t\t\talt={ image.alt }\n\t\t\t\t\t\t\t\tdata-id={ image.id }\n\t\t\t\t\t\t\t\tdata-full-url={ image.fullUrl }\n\t\t\t\t\t\t\t\tdata-link={ image.link }\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\timage.id ? `wp-image-${ image.id }` : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tkey={ image.id || image.url }\n\t\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t{ href ? (\n\t\t\t\t\t\t\t\t\t\t<a href={ href }>{ img }</a>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\timg\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ ! RichText.isEmpty( image.caption ) && (\n\t\t\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"blocks-gallery-item__caption\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={ image.caption }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</ul>\n\t\t\t\t{ ! RichText.isEmpty( caption ) && (\n\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\tclassName=\"blocks-gallery-caption\"\n\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</figure>\n\t\t);\n\t},\n\tmigrate( attributes ) {\n\t\tif ( isGalleryV2Enabled() ) {\n\t\t\treturn runV2Migration( attributes );\n\t\t}\n\n\t\treturn attributes;\n\t},\n};\nconst v5 = {\n\tattributes: {\n\t\timages: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t\tsource: 'query',\n\t\t\tselector: '.blocks-gallery-item',\n\t\t\tquery: {\n\t\t\t\turl: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'src',\n\t\t\t\t},\n\t\t\t\tfullUrl: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-full-url',\n\t\t\t\t},\n\t\t\t\tlink: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-link',\n\t\t\t\t},\n\t\t\t\talt: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'alt',\n\t\t\t\t\tdefault: '',\n\t\t\t\t},\n\t\t\t\tid: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-id',\n\t\t\t\t},\n\t\t\t\tcaption: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'html',\n\t\t\t\t\tselector: '.blocks-gallery-item__caption',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tids: {\n\t\t\ttype: 'array',\n\t\t\titems: {\n\t\t\t\ttype: 'number',\n\t\t\t},\n\t\t\tdefault: [],\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: 'number',\n\t\t\tminimum: 1,\n\t\t\tmaximum: 8,\n\t\t},\n\t\tcaption: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tselector: '.blocks-gallery-caption',\n\t\t},\n\t\timageCrop: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tlinkTo: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none',\n\t\t},\n\t\tsizeSlug: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'large',\n\t\t},\n\t},\n\tsupports: {\n\t\talign: true,\n\t},\n\tisEligible( { linkTo } ) {\n\t\treturn ! linkTo || linkTo === 'attachment' || linkTo === 'media';\n\t},\n\tmigrate( attributes ) {\n\t\tif ( isGalleryV2Enabled() ) {\n\t\t\treturn runV2Migration( attributes );\n\t\t}\n\n\t\tlet linkTo = attributes.linkTo;\n\n\t\tif ( ! attributes.linkTo ) {\n\t\t\tlinkTo = 'none';\n\t\t} else if ( attributes.linkTo === 'attachment' ) {\n\t\t\tlinkTo = 'post';\n\t\t} else if ( attributes.linkTo === 'media' ) {\n\t\t\tlinkTo = 'file';\n\t\t}\n\t\treturn {\n\t\t\t...attributes,\n\t\t\tlinkTo,\n\t\t};\n\t},\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\timages,\n\t\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\t\timageCrop,\n\t\t\tcaption,\n\t\t\tlinkTo,\n\t\t} = attributes;\n\n\t\treturn (\n\t\t\t<figure\n\t\t\t\tclassName={ `columns-${ columns } ${\n\t\t\t\t\timageCrop ? 'is-cropped' : ''\n\t\t\t\t}` }\n\t\t\t>\n\t\t\t\t<ul className=\"blocks-gallery-grid\">\n\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\t\thref = image.fullUrl || image.url;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst img = (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={ image.url }\n\t\t\t\t\t\t\t\talt={ image.alt }\n\t\t\t\t\t\t\t\tdata-id={ image.id }\n\t\t\t\t\t\t\t\tdata-full-url={ image.fullUrl }\n\t\t\t\t\t\t\t\tdata-link={ image.link }\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\timage.id ? `wp-image-${ image.id }` : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tkey={ image.id || image.url }\n\t\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t{ href ? (\n\t\t\t\t\t\t\t\t\t\t<a href={ href }>{ img }</a>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\timg\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ ! RichText.isEmpty( image.caption ) && (\n\t\t\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"blocks-gallery-item__caption\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={ image.caption }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</ul>\n\t\t\t\t{ ! RichText.isEmpty( caption ) && (\n\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\tclassName=\"blocks-gallery-caption\"\n\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</figure>\n\t\t);\n\t},\n};\n\nconst v4 = {\n\tattributes: {\n\t\timages: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t\tsource: 'query',\n\t\t\tselector: '.blocks-gallery-item',\n\t\t\tquery: {\n\t\t\t\turl: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'src',\n\t\t\t\t},\n\t\t\t\tfullUrl: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-full-url',\n\t\t\t\t},\n\t\t\t\tlink: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-link',\n\t\t\t\t},\n\t\t\t\talt: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'alt',\n\t\t\t\t\tdefault: '',\n\t\t\t\t},\n\t\t\t\tid: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-id',\n\t\t\t\t},\n\t\t\t\tcaption: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'html',\n\t\t\t\t\tselector: '.blocks-gallery-item__caption',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tids: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: 'number',\n\t\t},\n\t\tcaption: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tselector: '.blocks-gallery-caption',\n\t\t},\n\t\timageCrop: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tlinkTo: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none',\n\t\t},\n\t},\n\tsupports: {\n\t\talign: true,\n\t},\n\tisEligible( { ids } ) {\n\t\treturn ids && ids.some( ( id ) => typeof id === 'string' );\n\t},\n\tmigrate( attributes ) {\n\t\tif ( isGalleryV2Enabled() ) {\n\t\t\treturn runV2Migration( attributes );\n\t\t}\n\n\t\treturn {\n\t\t\t...attributes,\n\t\t\tids: map( attributes.ids, ( id ) => {\n\t\t\t\tconst parsedId = parseInt( id, 10 );\n\t\t\t\treturn Number.isInteger( parsedId ) ? parsedId : null;\n\t\t\t} ),\n\t\t};\n\t},\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\timages,\n\t\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\t\timageCrop,\n\t\t\tcaption,\n\t\t\tlinkTo,\n\t\t} = attributes;\n\n\t\treturn (\n\t\t\t<figure\n\t\t\t\tclassName={ `columns-${ columns } ${\n\t\t\t\t\timageCrop ? 'is-cropped' : ''\n\t\t\t\t}` }\n\t\t\t>\n\t\t\t\t<ul className=\"blocks-gallery-grid\">\n\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\t\thref = image.fullUrl || image.url;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst img = (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={ image.url }\n\t\t\t\t\t\t\t\talt={ image.alt }\n\t\t\t\t\t\t\t\tdata-id={ image.id }\n\t\t\t\t\t\t\t\tdata-full-url={ image.fullUrl }\n\t\t\t\t\t\t\t\tdata-link={ image.link }\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\timage.id ? `wp-image-${ image.id }` : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tkey={ image.id || image.url }\n\t\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t{ href ? (\n\t\t\t\t\t\t\t\t\t\t<a href={ href }>{ img }</a>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\timg\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ ! RichText.isEmpty( image.caption ) && (\n\t\t\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"blocks-gallery-item__caption\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={ image.caption }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</ul>\n\t\t\t\t{ ! RichText.isEmpty( caption ) && (\n\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\tclassName=\"blocks-gallery-caption\"\n\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</figure>\n\t\t);\n\t},\n};\nconst v3 = {\n\tattributes: {\n\t\timages: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t\tsource: 'query',\n\t\t\tselector: 'ul.wp-block-gallery .blocks-gallery-item',\n\t\t\tquery: {\n\t\t\t\turl: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'src',\n\t\t\t\t},\n\t\t\t\tfullUrl: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-full-url',\n\t\t\t\t},\n\t\t\t\talt: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'alt',\n\t\t\t\t\tdefault: '',\n\t\t\t\t},\n\t\t\t\tid: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-id',\n\t\t\t\t},\n\t\t\t\tlink: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-link',\n\t\t\t\t},\n\t\t\t\tcaption: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'html',\n\t\t\t\t\tselector: 'figcaption',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tids: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: 'number',\n\t\t},\n\t\timageCrop: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tlinkTo: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none',\n\t\t},\n\t},\n\tsupports: {\n\t\talign: true,\n\t},\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\timages,\n\t\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\t\timageCrop,\n\t\t\tlinkTo,\n\t\t} = attributes;\n\t\treturn (\n\t\t\t<ul\n\t\t\t\tclassName={ `columns-${ columns } ${\n\t\t\t\t\timageCrop ? 'is-cropped' : ''\n\t\t\t\t}` }\n\t\t\t>\n\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\tlet href;\n\n\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\thref = image.fullUrl || image.url;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={ image.url }\n\t\t\t\t\t\t\talt={ image.alt }\n\t\t\t\t\t\t\tdata-id={ image.id }\n\t\t\t\t\t\t\tdata-full-url={ image.fullUrl }\n\t\t\t\t\t\t\tdata-link={ image.link }\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\timage.id ? `wp-image-${ image.id }` : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={ image.id || image.url }\n\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t{ image.caption && image.caption.length > 0 && (\n\t\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\t\t\t\t\tvalue={ image.caption }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t);\n\t},\n\tmigrate( attributes ) {\n\t\tif ( isGalleryV2Enabled() ) {\n\t\t\treturn runV2Migration( attributes );\n\t\t}\n\t\treturn attributes;\n\t},\n};\nconst v2 = {\n\tattributes: {\n\t\timages: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t\tsource: 'query',\n\t\t\tselector: 'ul.wp-block-gallery .blocks-gallery-item',\n\t\t\tquery: {\n\t\t\t\turl: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'src',\n\t\t\t\t},\n\t\t\t\talt: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'alt',\n\t\t\t\t\tdefault: '',\n\t\t\t\t},\n\t\t\t\tid: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-id',\n\t\t\t\t},\n\t\t\t\tlink: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tselector: 'img',\n\t\t\t\t\tattribute: 'data-link',\n\t\t\t\t},\n\t\t\t\tcaption: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'html',\n\t\t\t\t\tselector: 'figcaption',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: 'number',\n\t\t},\n\t\timageCrop: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tlinkTo: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none',\n\t\t},\n\t},\n\tisEligible( { images, ids } ) {\n\t\treturn (\n\t\t\timages &&\n\t\t\timages.length > 0 &&\n\t\t\t( ( ! ids && images ) ||\n\t\t\t\t( ids && images && ids.length !== images.length ) ||\n\t\t\t\tsome( images, ( id, index ) => {\n\t\t\t\t\tif ( ! id && ids[ index ] !== null ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn parseInt( id, 10 ) !== ids[ index ];\n\t\t\t\t} ) )\n\t\t);\n\t},\n\tmigrate( attributes ) {\n\t\tif ( isGalleryV2Enabled() ) {\n\t\t\treturn runV2Migration( attributes );\n\t\t}\n\t\treturn {\n\t\t\t...attributes,\n\t\t\tids: map( attributes.images, ( { id } ) => {\n\t\t\t\tif ( ! id ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn parseInt( id, 10 );\n\t\t\t} ),\n\t\t};\n\t},\n\tsupports: {\n\t\talign: true,\n\t},\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\timages,\n\t\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\t\timageCrop,\n\t\t\tlinkTo,\n\t\t} = attributes;\n\t\treturn (\n\t\t\t<ul\n\t\t\t\tclassName={ `columns-${ columns } ${\n\t\t\t\t\timageCrop ? 'is-cropped' : ''\n\t\t\t\t}` }\n\t\t\t>\n\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\tlet href;\n\n\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={ image.url }\n\t\t\t\t\t\t\talt={ image.alt }\n\t\t\t\t\t\t\tdata-id={ image.id }\n\t\t\t\t\t\t\tdata-link={ image.link }\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\timage.id ? `wp-image-${ image.id }` : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={ image.id || image.url }\n\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t{ image.caption && image.caption.length > 0 && (\n\t\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\t\t\t\t\tvalue={ image.caption }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t);\n\t},\n};\n\nconst v1 = {\n\tattributes: {\n\t\timages: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t\tsource: 'query',\n\t\t\tselector: 'div.wp-block-gallery figure.blocks-gallery-image img',\n\t\t\tquery: {\n\t\t\t\turl: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tattribute: 'src',\n\t\t\t\t},\n\t\t\t\talt: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tattribute: 'alt',\n\t\t\t\t\tdefault: '',\n\t\t\t\t},\n\t\t\t\tid: {\n\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\tattribute: 'data-id',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: 'number',\n\t\t},\n\t\timageCrop: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tlinkTo: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none',\n\t\t},\n\t\talign: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'none',\n\t\t},\n\t},\n\tsupports: {\n\t\talign: true,\n\t},\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\timages,\n\t\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\t\talign,\n\t\t\timageCrop,\n\t\t\tlinkTo,\n\t\t} = attributes;\n\t\tconst className = classnames( `columns-${ columns }`, {\n\t\t\talignnone: align === 'none',\n\t\t\t'is-cropped': imageCrop,\n\t\t} );\n\t\treturn (\n\t\t\t<div className={ className }>\n\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\tlet href;\n\n\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={ image.url }\n\t\t\t\t\t\t\talt={ image.alt }\n\t\t\t\t\t\t\tdata-id={ image.id }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<figure\n\t\t\t\t\t\t\tkey={ image.id || image.url }\n\t\t\t\t\t\t\tclassName=\"blocks-gallery-image\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t);\n\t},\n\tmigrate( attributes ) {\n\t\tif ( isGalleryV2Enabled() ) {\n\t\t\treturn runV2Migration( attributes );\n\t\t}\n\n\t\treturn attributes;\n\t},\n};\n\nexport default [ v6, v5, v4, v3, v2, v1 ];\n","/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withNotices } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport EditWithInnerBlocks from './edit';\nimport EditWithoutInnerBlocks from './v1/edit';\nimport { isGalleryV2Enabled } from './shared';\n\n/*\n * Using a wrapper around the logic to load the edit for v1 of Gallery block\n * or the refactored version with InnerBlocks. This is to prevent conditional\n * use of hooks lint errors if adding this logic to the top of the edit component.\n */\nfunction GalleryEditWrapper( props ) {\n\t// if ( ! isGalleryV2Enabled() ) {\n\t// \treturn <EditWithoutInnerBlocks { ...props } />;\n\t// }\n\n\treturn <EditWithInnerBlocks { ...props } />;\n}\n\nexport default compose( [ withNotices ] )( GalleryEditWrapper );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport {find} from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {compose} from '@wordpress/compose';\nimport {\n    BaseControl,\n    PanelBody,\n    SelectControl,\n    ToggleControl,\n    RangeControl,\n    Spinner,\n    TextControl,\n    ColorPicker,\n    __experimentalNumberControl as NumberControl\n} from '@wordpress/components';\n\nimport {\n    store as blockEditorStore,\n    MediaPlaceholder,\n    InspectorControls,\n    useBlockProps,\n    BlockControls,\n    MediaReplaceFlow, InspectorAdvancedControls,\n} from '@wordpress/block-editor';\n\nimport {Platform, useEffect, useMemo} from '@wordpress/element';\nimport {__, _x, sprintf} from '@wordpress/i18n';\nimport {useSelect, useDispatch} from '@wordpress/data';\nimport {withViewportMatch} from '@wordpress/viewport';\nimport {View} from '@wordpress/primitives';\nimport {createBlock} from '@wordpress/blocks';\nimport {createBlobURL} from '@wordpress/blob';\nimport {store as noticesStore} from '@wordpress/notices';\n\nimport blockJson from './block.json';\n\n/**\n * Internal dependencies\n */\nimport {sharedIcon} from './shared-icon';\nimport {defaultColumnsNumber, pickRelevantMediaFiles} from './shared';\nimport {getHrefAndDestination} from './utils';\nimport {\n    getUpdatedLinkTargetSettings,\n    getImageSizeAttributes,\n} from './image/utils';\nimport Gallery from './gallery';\nimport {\n    LINK_DESTINATION_ATTACHMENT,\n    LINK_DESTINATION_LIGHTBOX,\n    LINK_DESTINATION_MEDIA,\n    LINK_DESTINATION_NONE,\n} from './constants';\n\nimport useImageSizes from './use-image-sizes';\nimport useGetNewImages from './use-get-new-images';\nimport useGetMedia from './use-get-media';\nimport GapStyles from './gap-styles';\n\nconst MAX_COLUMNS = 8;\nconst linkOptions = [\n    {value: LINK_DESTINATION_ATTACHMENT, label: __('Attachment Page')},\n    {value: LINK_DESTINATION_MEDIA, label: __('Media File')},\n    {value: LINK_DESTINATION_NONE, label: _x('None', 'Media item link option')},\n    {value: LINK_DESTINATION_LIGHTBOX, label: _x('Lightbox')},\n];\n\nconst ALLOWED_MEDIA_TYPES = ['image'];\n\nconst PLACEHOLDER_TEXT = Platform.isNative\n    ? __('ADD MEDIA')\n    : __('Drag images, upload new ones or select files from your library.');\n\nconst MOBILE_CONTROL_PROPS_RANGE_CONTROL = Platform.isNative\n    ? {type: 'stepper'}\n    : {};\n\nfunction GalleryEdit(props) {\n    const {\n        setAttributes,\n        attributes,\n        className,\n        clientId,\n        isSelected,\n        insertBlocksAfter,\n    } = props;\n\n    const {\n        columns,\n        imageCrop,\n        linkTarget,\n        linkTo,\n        sizeSlug,\n        hasOverlay,\n        overlayColor,\n        loaderActive,\n        loaderType,\n    } = attributes;\n\n    const {\n        __unstableMarkNextChangeAsNotPersistent,\n        replaceInnerBlocks,\n        updateBlockAttributes,\n        selectBlock,\n        clearSelectedBlock,\n    } = useDispatch(blockEditorStore);\n\n    const {createSuccessNotice, createErrorNotice} =\n        useDispatch(noticesStore);\n\n    const {getBlock, getSettings, preferredStyle} = useSelect((select) => {\n        const settings = select(blockEditorStore).getSettings();\n        const preferredStyleVariations =\n            settings.__experimentalPreferredStyleVariations;\n        return {\n            getBlock: select(blockEditorStore).getBlock,\n            getSettings: select(blockEditorStore).getSettings,\n            preferredStyle: preferredStyleVariations?.value?.['core/image'],\n        };\n    }, []);\n\n    const innerBlockImages = useSelect(\n        (select) => {\n            return select(blockEditorStore).getBlock(clientId)?.innerBlocks;\n        },\n        [clientId]\n    );\n\n    const wasBlockJustInserted = useSelect(\n        (select) => {\n            return select(blockEditorStore).wasBlockJustInserted(\n                clientId,\n                'inserter_menu'\n            );\n        },\n        [clientId]\n    );\n\n    const images = useMemo(\n        () =>\n            innerBlockImages?.map((block) => ({\n                clientId: block.clientId,\n                id: block.attributes.id,\n                url: block.attributes.url,\n                attributes: block.attributes,\n                fromSavedContent: Boolean(block.originalContent),\n            })),\n        [innerBlockImages]\n    );\n\n    const imageData = useGetMedia(innerBlockImages);\n\n    const newImages = useGetNewImages(images, imageData);\n\n    useEffect(() => {\n        newImages?.forEach((newImage) => {\n            // Update the images data without creating new undo levels.\n            __unstableMarkNextChangeAsNotPersistent();\n            updateBlockAttributes(newImage.clientId, {\n                ...buildImageAttributes(newImage.attributes),\n                id: newImage.id,\n                align: undefined,\n            });\n        });\n        if (newImages?.length > 0) {\n            clearSelectedBlock();\n        }\n    }, [newImages]);\n\n    const imageSizeOptions = useImageSizes(\n        imageData,\n        isSelected,\n        getSettings\n    );\n\n    /**\n     * Determines the image attributes that should be applied to an image block\n     * after the gallery updates.\n     *\n     * The gallery will receive the full collection of images when a new image\n     * is added. As a result we need to reapply the image's original settings if\n     * it already existed in the gallery. If the image is in fact new, we need\n     * to apply the gallery's current settings to the image.\n     *\n     * @param {Object} imageAttributes Media object for the actual image.\n     * @return {Object}                Attributes to set on the new image block.\n     */\n    function buildImageAttributes(imageAttributes) {\n        const image = imageAttributes.id\n            ? find(imageData, {id: imageAttributes.id})\n            : null;\n\n        let newClassName;\n        if (imageAttributes.className && imageAttributes.className !== '') {\n            newClassName = imageAttributes.className;\n        } else {\n            newClassName = preferredStyle\n                ? `is-style-${preferredStyle}`\n                : undefined;\n        }\n\n        let newLinkTarget;\n        if (imageAttributes.linkTarget || imageAttributes.rel) {\n            // When transformed from image blocks, the link destination and rel attributes are inherited.\n            newLinkTarget = {\n                linkTarget: imageAttributes.linkTarget,\n                rel: imageAttributes.rel,\n            };\n        } else {\n            // When an image is added, update the link destination and rel attributes according to the gallery settings\n            newLinkTarget = getUpdatedLinkTargetSettings(\n                linkTarget,\n                attributes\n            );\n        }\n\n        return {\n            ...pickRelevantMediaFiles(image, sizeSlug),\n            ...getHrefAndDestination(\n                image,\n                linkTo,\n                imageAttributes?.linkDestination\n            ),\n            ...newLinkTarget,\n            className: newClassName,\n            sizeSlug,\n            caption: imageAttributes.caption || image.caption?.raw,\n            alt: imageAttributes.alt || image.alt_text,\n        };\n    }\n\n    function isValidFileType(file) {\n        return (\n            ALLOWED_MEDIA_TYPES.some(\n                (mediaType) => file.type?.indexOf(mediaType) === 0\n            ) || file.url?.indexOf('blob:') === 0\n        );\n    }\n\n    function updateImages(selectedImages) {\n        const newFileUploads =\n            Object.prototype.toString.call(selectedImages) ===\n            '[object FileList]';\n\n        const imageArray = newFileUploads\n            ? Array.from(selectedImages).map((file) => {\n                if (!file.url) {\n                    return pickRelevantMediaFiles({\n                        url: createBlobURL(file),\n                    });\n                }\n\n                return file;\n            })\n            : selectedImages;\n\n        if (!imageArray.every(isValidFileType)) {\n            createErrorNotice(\n                __(\n                    'If uploading to a gallery all files need to be image formats'\n                ),\n                {id: 'gallery-upload-invalid-file', type: 'snackbar'}\n            );\n        }\n\n        const processedImages = imageArray\n            .filter((file) => file.url || isValidFileType(file))\n            .map((file) => {\n                if (!file.url) {\n                    return pickRelevantMediaFiles({\n                        url: createBlobURL(file),\n                    });\n                }\n\n                return file;\n            });\n\n        // Because we are reusing existing innerImage blocks any reordering\n        // done in the media library will be lost so we need to reapply that ordering\n        // once the new image blocks are merged in with existing.\n        const newOrderMap = processedImages.reduce(\n            (result, image, index) => (\n                (result[image.id] = index), result\n            ),\n            {}\n        );\n\n        const existingImageBlocks = !newFileUploads\n            ? innerBlockImages.filter((block) =>\n                processedImages.find(\n                    (img) => img.id === block.attributes.id\n                )\n            )\n            : innerBlockImages;\n\n        const newImageList = processedImages.filter(\n            (img) =>\n                !existingImageBlocks.find(\n                    (existingImg) => img.id === existingImg.attributes.id\n                )\n        );\n\n        const newBlocks = newImageList.map((image) => {\n            return createBlock('core/image', {\n                id: image.id,\n                url: image.url,\n                caption: image.caption,\n                alt: image.alt,\n            });\n        });\n\n        if (newBlocks?.length > 0) {\n            selectBlock(newBlocks[0].clientId);\n        }\n\n        replaceInnerBlocks(\n            clientId,\n            existingImageBlocks\n                .concat(newBlocks)\n                .sort(\n                    (a, b) =>\n                        newOrderMap[a.attributes.id] -\n                        newOrderMap[b.attributes.id]\n                )\n        );\n    }\n\n    function onUploadError(message) {\n        createErrorNotice(message, {type: 'snackbar'});\n    }\n\n    function setLinkTo(value) {\n        setAttributes({linkTo: value});\n        const changedAttributes = {};\n        const blocks = [];\n        getBlock(clientId).innerBlocks.forEach((block) => {\n            blocks.push(block.clientId);\n            const image = block.attributes.id\n                ? find(imageData, {id: block.attributes.id})\n                : null;\n            changedAttributes[block.clientId] = getHrefAndDestination(\n                image,\n                value\n            );\n        });\n        updateBlockAttributes(blocks, changedAttributes, true);\n        const linkToText = [...linkOptions].find(\n            (linkType) => linkType.value === value\n        );\n\n        createSuccessNotice(\n            sprintf(\n                /* translators: %s: image size settings */\n                __('All gallery image links updated to: %s'),\n                linkToText.label\n            ),\n            {\n                id: 'gallery-attributes-linkTo',\n                type: 'snackbar',\n            }\n        );\n    }\n\n    function setColumnsNumber(value) {\n        setAttributes({columns: value});\n    }\n\n    function toggleImageCrop() {\n        setAttributes({imageCrop: !imageCrop});\n    }\n\n    function getImageCropHelp(checked) {\n        return checked\n            ? __('Thumbnails are cropped to align.')\n            : __('Thumbnails are not cropped.');\n    }\n\n    function toggleOpenInNewTab(openInNewTab) {\n        const newLinkTarget = openInNewTab ? '_blank' : undefined;\n        setAttributes({linkTarget: newLinkTarget});\n        const changedAttributes = {};\n        const blocks = [];\n        getBlock(clientId).innerBlocks.forEach((block) => {\n            blocks.push(block.clientId);\n            changedAttributes[block.clientId] = getUpdatedLinkTargetSettings(\n                newLinkTarget,\n                block.attributes\n            );\n        });\n        updateBlockAttributes(blocks, changedAttributes, true);\n        const noticeText = openInNewTab\n            ? __('All gallery images updated to open in new tab')\n            : __('All gallery images updated to not open in new tab');\n        createSuccessNotice(noticeText, {\n            id: 'gallery-attributes-openInNewTab',\n            type: 'snackbar',\n        });\n    }\n\n    function toggleOverlay(overlay) {\n        setAttributes({hasOverlay: overlay});\n    }\n\n    function updateImagesSize(newSizeSlug) {\n        setAttributes({sizeSlug: newSizeSlug});\n        const changedAttributes = {};\n        const blocks = [];\n        getBlock(clientId).innerBlocks.forEach((block) => {\n            blocks.push(block.clientId);\n            const image = block.attributes.id\n                ? find(imageData, {id: block.attributes.id})\n                : null;\n            changedAttributes[block.clientId] = getImageSizeAttributes(\n                image,\n                newSizeSlug\n            );\n        });\n        updateBlockAttributes(blocks, changedAttributes, true);\n        const imageSize = imageSizeOptions.find(\n            (size) => size.value === newSizeSlug\n        );\n\n        createSuccessNotice(\n            sprintf(\n                /* translators: %s: image size settings */\n                __('All gallery image sizes updated to: %s'),\n                imageSize.label\n            ),\n            {\n                id: 'gallery-attributes-sizeSlug',\n                type: 'snackbar',\n            }\n        );\n    }\n\n    function setWatermark(value) {\n        setAttributes({watermark: value});\n    }\n\n    function setOverlayColor(value) {\n        setAttributes({overlayColor: value});\n    }\n\n    function setGroupName(value) {\n        setAttributes({groupName: value});\n    }\n\n    function toggleLoader(value) {\n        setAttributes({loaderActive: value});\n    }\n\n    useEffect(() => {\n        // linkTo attribute must be saved so blocks don't break when changing image_default_link_type in options.php.\n        if (!linkTo) {\n            __unstableMarkNextChangeAsNotPersistent();\n            setAttributes({\n                linkTo:\n                    window?.wp?.media?.view?.settings?.defaultProps?.link ||\n                    LINK_DESTINATION_LIGHTBOX,\n            });\n        }\n    }, [linkTo]);\n\n    const hasImages = !!images.length;\n\n    const hasImageIds = hasImages && images.some((image) => !!image.id);\n    const imagesUploading = images.some((img) =>\n        !Platform.isNative\n            ? !img.id && img.url?.indexOf('blob:') === 0\n            : img.url?.indexOf('file:') === 0\n    );\n\n    // MediaPlaceholder props are different between web and native hence, we provide a platform-specific set.\n    const mediaPlaceholderProps = Platform.select({\n        web: {\n            addToGallery: false,\n            disableMediaButtons: imagesUploading,\n            value: {},\n        },\n        native: {\n            addToGallery: hasImageIds,\n            isAppender: hasImages,\n            disableMediaButtons:\n                (hasImages && !isSelected) || imagesUploading,\n            value: hasImageIds ? images : {},\n            autoOpenMediaUpload:\n                !hasImages && isSelected && wasBlockJustInserted,\n        },\n    });\n\n    const mediaPlaceholder = (\n        <MediaPlaceholder\n            handleUpload={false}\n            icon={sharedIcon}\n            labels={{\n                title: __('Gallery'),\n                instructions: PLACEHOLDER_TEXT,\n            }}\n            onSelect={updateImages}\n            accept=\"image/*\"\n            allowedTypes={ALLOWED_MEDIA_TYPES}\n            multiple\n            onError={onUploadError}\n            {...mediaPlaceholderProps}\n        />\n    );\n\n    const blockProps = useBlockProps({\n        className: classnames(className, 'has-nested-images'),\n    });\n\n    if (!hasImages) {\n        return <View {...blockProps}>{mediaPlaceholder}</View>;\n    }\n\n    const hasLinkTo = linkTo && linkTo !== 'none';\n\n    return (\n        <>\n            <InspectorControls>\n                <PanelBody title={__('Settings')}>\n                    <SelectControl\n                        label={__('Link to')}\n                        value={linkTo}\n                        onChange={setLinkTo}\n                        options={linkOptions}\n                        hideCancelButton={true}\n                    />\n                    {hasLinkTo && (\n                        <ToggleControl\n                            label={__('Open in new tab')}\n                            checked={linkTarget === '_blank'}\n                            onChange={toggleOpenInNewTab}\n                        />\n                    )}\n\n                    {linkTo === 'lightbox' && (\n                        <TextControl\n                            label={__('Group name', 'growtype-gallery')}\n                            help={__('Images are related by group name.', 'growtype-gallery')}\n                            onChange={setGroupName}\n                            value={attributes.groupName}\n                        />\n                    )}\n\n                    {imageSizeOptions?.length > 0 && (\n                        <SelectControl\n                            label={__('Image size')}\n                            value={sizeSlug}\n                            options={imageSizeOptions}\n                            onChange={updateImagesSize}\n                            hideCancelButton={true}\n                        />\n                    )}\n                    {Platform.isWeb && !imageSizeOptions && hasImageIds && (\n                        <BaseControl className={'gallery-image-sizes'}>\n                            <BaseControl.VisualLabel>\n                                {__('Image size')}\n                            </BaseControl.VisualLabel>\n                            <View className={'gallery-image-sizes__loading'}>\n                                <Spinner/>\n                                {__('Loading options…')}\n                            </View>\n                        </BaseControl>\n                    )}\n                    <TextControl\n                        label={__('Watermark', 'growtype-gallery')}\n                        help={__('Visible on every image.', 'growtype-gallery')}\n                        onChange={setWatermark}\n                        value={attributes.watermark}\n                    />\n                </PanelBody>\n                <PanelBody\n                    title={__('Preview', 'growtype-gallery')}\n                >\n                    <SelectControl\n                        label={__('Image preview size', 'growtype-gallery')}\n                        value={attributes.imagePreviewSize}\n                        options={blockJson.attributes.imagePreviewSize.options}\n                        onChange={(value) => setAttributes({imagePreviewSize: value})}\n                        hideCancelButton={true}\n                    />\n                    <SelectControl\n                        label={__('Image preview format', 'growtype-gallery')}\n                        value={attributes.imagePreviewFormat}\n                        options={blockJson.attributes.imagePreviewFormat.options}\n                        onChange={(value) => setAttributes({imagePreviewFormat: value})}\n                        hideCancelButton={true}\n                    />\n                    {images.length > 1 && (\n                        <RangeControl\n                            label={__('Columns', 'growtype-gallery')}\n                            value={\n                                columns\n                                    ? columns\n                                    : defaultColumnsNumber(images.length)\n                            }\n                            onChange={setColumnsNumber}\n                            min={blockJson.attributes.columns.minimum}\n                            max={Math.min(MAX_COLUMNS, images.length)}\n                            {...MOBILE_CONTROL_PROPS_RANGE_CONTROL}\n                            required\n                        />\n                    )}\n                    {images.length > 1 && (\n                        <RangeControl\n                            label={__('Columns - mobile', 'growtype-gallery')}\n                            value={attributes.columnsMobile}\n                            onChange={(value) => setAttributes({columnsMobile: value})}\n                            min={blockJson.attributes.columnsMobile.minimum}\n                            max={Math.min(MAX_COLUMNS, images.length)}\n                            {...MOBILE_CONTROL_PROPS_RANGE_CONTROL}\n                            required\n                        />\n                    )}\n                    <RangeControl\n                        label={__('Image height (%)', 'growtype-gallery')}\n                        value={attributes.imageHeight}\n                        onChange={(value) => setAttributes({imageHeight: value})}\n                        min={blockJson.attributes.imageHeight.minimum}\n                        max={blockJson.attributes.imageHeight.maximum}\n                        {...MOBILE_CONTROL_PROPS_RANGE_CONTROL}\n                        required\n                    />\n                    <RangeControl\n                        label={__('Image border radius (px)', 'growtype-gallery')}\n                        value={attributes.imageBorderRadius}\n                        onChange={(value) => setAttributes({imageBorderRadius: value})}\n                        min={blockJson.attributes.imageBorderRadius.minimum}\n                        max={blockJson.attributes.imageBorderRadius.maximum}\n                        {...MOBILE_CONTROL_PROPS_RANGE_CONTROL}\n                        required\n                    />\n                    <RangeControl\n                        label={__('Image padding (px)', 'growtype-gallery')}\n                        value={attributes.imagePadding}\n                        onChange={(value) => setAttributes({imagePadding: value})}\n                        min={blockJson.attributes.imagePadding.minimum}\n                        max={blockJson.attributes.imagePadding.maximum}\n                        {...MOBILE_CONTROL_PROPS_RANGE_CONTROL}\n                        required\n                    />\n                    <ToggleControl\n                        label={__('Crop images')}\n                        checked={!imageCrop}\n                        onChange={toggleImageCrop}\n                        help={getImageCropHelp}\n                    />\n                    <ToggleControl\n                        label={__('Has overlay')}\n                        checked={hasOverlay}\n                        onChange={toggleOverlay}\n                    />\n                    {hasOverlay && (\n                        <ColorPicker\n                            label={__('Overlay color')}\n                            color={overlayColor}\n                            onChange={setOverlayColor}\n                            enableAlpha=\"true\"\n                            defaultValue=\"\"\n                            copyFormat=\"rgb\"\n                        />\n                    )}\n                </PanelBody>\n                <PanelBody\n                    title={__('Loading', 'growtype-gallery')}\n                >\n                    <ToggleControl\n                        label={__('Loader active')}\n                        checked={loaderActive}\n                        onChange={toggleLoader}\n                    />\n                    <SelectControl\n                        label={__('Loader type', 'growtype-gallery')}\n                        value={attributes.loaderType}\n                        options={blockJson.attributes.loaderType.options}\n                        onChange={(value) => setAttributes({loaderType: value})}\n                        hideCancelButton={true}\n                    />\n                    <SelectControl\n                        label={__('Animation on scroll effect', 'growtype-gallery')}\n                        value={attributes.animationOnScrollEffect}\n                        options={blockJson.attributes.animationOnScrollEffect.options}\n                        onChange={(value) => setAttributes({animationOnScrollEffect: value})}\n                        hideCancelButton={true}\n                    />\n                </PanelBody>\n            </InspectorControls>\n\n            <InspectorAdvancedControls>\n                <TextControl\n                    label={__('Gallery ID', 'growtype-gallery')}\n                    value={attributes.galleryId}\n                    onChange={galleryId => setAttributes({galleryId})}\n                />\n            </InspectorAdvancedControls>\n\n            <BlockControls group=\"other\">\n                <MediaReplaceFlow\n                    allowedTypes={ALLOWED_MEDIA_TYPES}\n                    accept=\"image/*\"\n                    handleUpload={false}\n                    onSelect={updateImages}\n                    name={__('Add')}\n                    multiple={true}\n                    mediaIds={images\n                        .filter((image) => image.id)\n                        .map((image) => image.id)}\n                    addToGallery={hasImageIds}\n                />\n            </BlockControls>\n            {Platform.isWeb && (\n                <GapStyles\n                    blockGap={attributes.style?.spacing?.blockGap}\n                    clientId={clientId}\n                />\n            )}\n            <Gallery\n                {...props}\n                images={images}\n                mediaPlaceholder={\n                    !hasImages || Platform.isNative\n                        ? mediaPlaceholder\n                        : undefined\n                }\n                blockProps={blockProps}\n                insertBlocksAfter={insertBlocksAfter}\n            />\n        </>\n    );\n}\n\nexport default (\n    GalleryEdit\n);\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n    RichText,\n    useInnerBlocksProps,\n    __experimentalGetElementClassName,\n} from '@wordpress/block-editor';\n\nimport {VisuallyHidden} from '@wordpress/components';\nimport {__} from '@wordpress/i18n';\nimport {createBlock, getDefaultBlockName} from '@wordpress/blocks';\nimport {View} from '@wordpress/primitives';\n\nconst allowedBlocks = [ 'core/image' ];\n\nexport const Gallery = (props) => {\n    const {\n        attributes,\n        isSelected,\n        setAttributes,\n        mediaPlaceholder,\n        insertBlocksAfter,\n        blockProps,\n    } = props;\n\n    const {align, columns, caption, imageCrop} = attributes;\n\n    const {children, ...innerBlocksProps} = useInnerBlocksProps(blockProps, {\n        allowedBlocks,\n        orientation: 'horizontal',\n        renderAppender: false,\n        __experimentalLayout: {type: 'default', alignments: []},\n    });\n\n    return (\n        <figure\n            {...innerBlocksProps}\n            className={classnames(\n                blockProps.className,\n                'blocks-gallery-grid',\n                {\n                    [`align${align}`]: align,\n                    [`columns-${columns}`]: columns !== undefined,\n                    [`columns-default`]: columns === undefined,\n                    'is-cropped': imageCrop,\n                }\n            )}\n        >\n            {children}\n            {isSelected && !children && (\n                <View className=\"blocks-gallery-media-placeholder-wrapper\">\n                    {mediaPlaceholder}\n                </View>\n            )}\n            <RichTextVisibilityHelper\n                isHidden={!isSelected && RichText.isEmpty(caption)}\n                tagName=\"figcaption\"\n                className={classnames(\n                    'blocks-gallery-caption',\n                    // __experimentalGetElementClassName('caption')\n                )}\n                aria-label={__('Gallery caption text')}\n                placeholder={__('Write gallery caption…')}\n                value={caption}\n                onChange={(value) => setAttributes({caption: value})}\n                inlineToolbar\n                __unstableOnSplitAtEnd={() =>\n                    insertBlocksAfter(createBlock(getDefaultBlockName()))\n                }\n            />\n        </figure>\n    );\n};\n\nfunction RichTextVisibilityHelper({\n                                      isHidden,\n                                      className,\n                                      value,\n                                      placeholder,\n                                      tagName,\n                                      captionRef,\n                                      ...richTextProps\n                                  }) {\n    if (isHidden) {\n        return <VisuallyHidden as={RichText} {...richTextProps} />;\n    }\n\n    return (\n        <RichText\n            ref={captionRef}\n            value={value}\n            placeholder={placeholder}\n            className={className}\n            tagName={tagName}\n            {...richTextProps}\n        />\n    );\n}\n\nexport default Gallery;\n","/**\n * WordPress dependencies\n */\nimport {\n\tBlockList,\n\t__experimentalGetGapCSSValue as getGapCSSValue,\n} from '@wordpress/block-editor';\nimport { useContext, createPortal } from '@wordpress/element';\n\nexport default function GapStyles( { blockGap, clientId } ) {\n\tconst styleElement = useContext( BlockList.__unstableElementContext );\n\t// --gallery-block--gutter-size is deprecated. --wp--style--gallery-gap-default should be used by themes that want to set a default\n\t// gap on the gallery.\n\tconst fallbackValue = `var( --wp--style--gallery-gap-default, var( --gallery-block--gutter-size, var( --wp--style--block-gap, 0.5em ) ) )`;\n\tlet gapValue = fallbackValue;\n\tlet column = fallbackValue;\n\tlet row;\n\n\t// Check for the possibility of split block gap values. See: https://github.com/WordPress/gutenberg/pull/37736\n\tif ( !! blockGap ) {\n\t\trow =\n\t\t\ttypeof blockGap === 'string'\n\t\t\t\t? getGapCSSValue( blockGap )\n\t\t\t\t: getGapCSSValue( blockGap?.top ) || fallbackValue;\n\t\tcolumn =\n\t\t\ttypeof blockGap === 'string'\n\t\t\t\t? getGapCSSValue( blockGap )\n\t\t\t\t: getGapCSSValue( blockGap?.left ) || fallbackValue;\n\t\tgapValue = row === column ? row : `${ row } ${ column }`;\n\t}\n\n\t// The unstable gallery gap calculation requires a real value (such as `0px`) and not `0`.\n\tconst gap = `#block-${ clientId } {\n\t\t--wp--style--unstable-gallery-gap: ${ column === '0' ? '0px' : column };\n\t\tgap: ${ gapValue }\n\t}`;\n\n\tconst GapStyle = () => {\n\t\treturn <style>{ gap }</style>;\n\t};\n\n\treturn gap && styleElement\n\t\t? createPortal( <GapStyle />, styleElement )\n\t\t: null;\n}\n","export const MIN_SIZE = 20;\nexport const LINK_DESTINATION_NONE = 'none';\nexport const LINK_DESTINATION_MEDIA = 'media';\nexport const LINK_DESTINATION_ATTACHMENT = 'attachment';\nexport const LINK_DESTINATION_CUSTOM = 'custom';\nexport const NEW_TAB_REL = [ 'noreferrer', 'noopener' ];\nexport const ALLOWED_MEDIA_TYPES = [ 'image' ];\nexport const MEDIA_ID_NO_FEATURED_IMAGE_SET = 0;\n","/**\n * External dependencies\n */\nimport { isEmpty, get } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { NEW_TAB_REL } from './constants';\n\nexport function removeNewTabRel( currentRel ) {\n\tlet newRel = currentRel;\n\n\tif ( currentRel !== undefined && ! isEmpty( newRel ) ) {\n\t\tif ( ! isEmpty( newRel ) ) {\n\t\t\tNEW_TAB_REL.forEach( ( relVal ) => {\n\t\t\t\tconst regExp = new RegExp( '\\\\b' + relVal + '\\\\b', 'gi' );\n\t\t\t\tnewRel = newRel.replace( regExp, '' );\n\t\t\t} );\n\n\t\t\t// Only trim if NEW_TAB_REL values was replaced.\n\t\t\tif ( newRel !== currentRel ) {\n\t\t\t\tnewRel = newRel.trim();\n\t\t\t}\n\n\t\t\tif ( isEmpty( newRel ) ) {\n\t\t\t\tnewRel = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newRel;\n}\n\n/**\n * Helper to get the link target settings to be stored.\n *\n * @param {boolean} value          The new link target value.\n * @param {Object}  attributes     Block attributes.\n * @param {Object}  attributes.rel Image block's rel attribute.\n *\n * @return {Object} Updated link target settings.\n */\nexport function getUpdatedLinkTargetSettings( value, { rel } ) {\n\tconst linkTarget = value ? '_blank' : undefined;\n\n\tlet updatedRel;\n\tif ( ! linkTarget && ! rel ) {\n\t\tupdatedRel = undefined;\n\t} else {\n\t\tupdatedRel = removeNewTabRel( rel );\n\t}\n\n\treturn {\n\t\tlinkTarget,\n\t\trel: updatedRel,\n\t};\n}\n\n/**\n * Determines new Image block attributes size selection.\n *\n * @param {Object} image Media file object for gallery image.\n * @param {string} size  Selected size slug to apply.\n */\nexport function getImageSizeAttributes( image, size ) {\n\tconst url = get( image, [ 'media_details', 'sizes', size, 'source_url' ] );\n\n\tif ( url ) {\n\t\treturn { url, width: undefined, height: undefined, sizeSlug: size };\n\t}\n\n\treturn {};\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n    RichText,\n    useBlockProps,\n    useInnerBlocksProps,\n    __experimentalGetElementClassName,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport saveWithoutInnerBlocks from './v1/save';\nimport {isGalleryV2Enabled} from './shared';\n\nexport default function saveWithInnerBlocks({attributes}) {\n    // if ( ! isGalleryV2Enabled() ) {\n    // \treturn saveWithoutInnerBlocks( { attributes } );\n    // }\n\n    const {caption, columns, columnsMobile, imageCrop} = attributes;\n\n    const className = classnames('has-nested-images', {\n        [`columns-${columns}`]: columns !== undefined,\n        [`columns-mobile-${columnsMobile}`]: columnsMobile !== undefined,\n        [`columns-default`]: columns === undefined,\n        'is-cropped': imageCrop,\n    });\n\n    const blockProps = useBlockProps.save({className});\n    const innerBlocksProps = useInnerBlocksProps.save(blockProps);\n\n    return (\n        <figure {...innerBlocksProps}>\n            {innerBlocksProps.children}\n            {!RichText.isEmpty(caption) && (\n                <RichText.Content\n                    tagName=\"figcaption\"\n                    className={classnames(\n                        'blocks-gallery-caption',\n                        // __experimentalGetElementClassName('caption')\n                    )}\n                    value={caption}\n                />\n            )}\n        </figure>\n    );\n}\n","/**\n * WordPress dependencies\n */\nimport { BlockIcon } from '@wordpress/block-editor';\nimport { gallery as icon } from '@wordpress/icons';\n\nexport const sharedIcon = <BlockIcon icon={ icon } />;\n","/**\n * External dependencies\n */\nimport { get, pick } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Platform } from '@wordpress/element';\n\nexport function defaultColumnsNumber( imageCount ) {\n\treturn imageCount ? Math.min( 3, imageCount ) : 3;\n}\n\nexport const pickRelevantMediaFiles = ( image, sizeSlug = 'large' ) => {\n\tconst imageProps = pick( image, [ 'alt', 'id', 'link' ] );\n\timageProps.url =\n\t\tget( image, [ 'sizes', sizeSlug, 'url' ] ) ||\n\t\tget( image, [ 'media_details', 'sizes', sizeSlug, 'source_url' ] ) ||\n\t\timage.url ||\n\t\timage.source_url;\n\tconst fullUrl =\n\t\tget( image, [ 'sizes', 'full', 'url' ] ) ||\n\t\tget( image, [ 'media_details', 'sizes', 'full', 'source_url' ] );\n\tif ( fullUrl ) {\n\t\timageProps.fullUrl = fullUrl;\n\t}\n\treturn imageProps;\n};\n\nfunction getGalleryBlockV2Enabled() {\n\t// We want to fail early here, at least during beta testing phase, to ensure\n\t// there aren't instances where undefined values cause false negatives.\n\tif ( ! window.wp || typeof window.wp.galleryBlockV2Enabled !== 'boolean' ) {\n\t\tthrow 'window.wp.galleryBlockV2Enabled is not defined';\n\t}\n\treturn window.wp.galleryBlockV2Enabled;\n}\n\n/**\n * The new gallery block format is not compatible with the use_BalanceTags option\n * in WP versions <= 5.8 https://core.trac.wordpress.org/ticket/54130. The\n * window.wp.galleryBlockV2Enabled flag is set in lib/compat.php. This method\n * can be removed when minimum supported WP version >=5.9.\n */\nexport function isGalleryV2Enabled() {\n\t// The logic for the native version is located in a different if statement\n\t// due to a lint rule that prohibits a single conditional combining\n\t// `process.env.IS_GUTENBERG_PLUGIN` with a native platform check.\n\t// if ( Platform.isNative ) {\n\t// \treturn getGalleryBlockV2Enabled();\n\t// }\n\n\t// Only run the Gallery version compat check if the plugin is running, otherwise\n\t// assume we are in 5.9 core and enable by default.\n\t// if ( process.env.IS_GUTENBERG_PLUGIN ) {\n\t// \treturn getGalleryBlockV2Enabled();\n\t// }\n\n\treturn true;\n}\n","/**\n * External dependencies\n */\nimport { filter } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { createBlobURL } from '@wordpress/blob';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_NONE,\n\tLINK_DESTINATION_MEDIA,\n} from './constants';\nimport {\n\tLINK_DESTINATION_ATTACHMENT as DEPRECATED_LINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA as DEPRECATED_LINK_DESTINATION_MEDIA,\n} from './v1/constants';\nimport { pickRelevantMediaFiles, isGalleryV2Enabled } from './shared';\n\nconst parseShortcodeIds = ( ids ) => {\n\tif ( ! ids ) {\n\t\treturn [];\n\t}\n\n\treturn ids.split( ',' ).map( ( id ) => parseInt( id, 10 ) );\n};\n\n/**\n * Third party block plugins don't have an easy way to detect if the\n * innerBlocks version of the Gallery is running when they run a\n * 3rdPartyBlock -> GalleryBlock transform so this tranform filter\n * will handle this. Once the innerBlocks version is the default\n * in a core release, this could be deprecated and removed after\n * plugin authors have been given time to update transforms.\n *\n * @typedef  {Object} Attributes\n * @typedef  {Object} Block\n * @property {Attributes} attributes The attributes of the block.\n * @param    {Block}      block      The transformed block.\n * @return   {Block}                 The transformed block.\n */\nfunction updateThirdPartyTransformToGallery( block ) {\n\tif (\n\t\tisGalleryV2Enabled() &&\n\t\tblock.name === 'growtype/gallery' &&\n\t\tblock.attributes?.images.length > 0\n\t) {\n\t\tconst innerBlocks = block.attributes.images.map(\n\t\t\t( { url, id, alt } ) => {\n\t\t\t\treturn createBlock( 'core/image', {\n\t\t\t\t\turl,\n\t\t\t\t\tid: id ? parseInt( id, 10 ) : null,\n\t\t\t\t\talt,\n\t\t\t\t\tsizeSlug: block.attributes.sizeSlug,\n\t\t\t\t\tlinkDestination: block.attributes.linkDestination,\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\n\t\tdelete block.attributes.ids;\n\t\tdelete block.attributes.images;\n\t\tblock.innerBlocks = innerBlocks;\n\t}\n\n\treturn block;\n}\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'growtype/gallery/update-third-party-transform-to',\n\tupdateThirdPartyTransformToGallery\n);\n\n/**\n * Third party block plugins don't have an easy way to detect if the\n * innerBlocks version of the Gallery is running when they run a\n * GalleryBlock -> 3rdPartyBlock transform so this transform filter\n * will handle this. Once the innerBlocks version is the default\n * in a core release, this could be deprecated and removed after\n * plugin authors have been given time to update transforms.\n *\n * @typedef  {Object} Attributes\n * @typedef  {Object} Block\n * @property {Attributes} attributes The attributes of the block.\n * @param    {Block}      toBlock    The block to transform to.\n * @param    {Block[]}    fromBlocks The blocks to transform from.\n * @return   {Block}                 The transformed block.\n */\nfunction updateThirdPartyTransformFromGallery( toBlock, fromBlocks ) {\n\tconst from = Array.isArray( fromBlocks ) ? fromBlocks : [ fromBlocks ];\n\tconst galleryBlock = from.find(\n\t\t( transformedBlock ) =>\n\t\t\ttransformedBlock.name === 'growtype/gallery' &&\n\t\t\ttransformedBlock.innerBlocks.length > 0 &&\n\t\t\t! transformedBlock.attributes.images?.length > 0 &&\n\t\t\t! toBlock.name.includes( 'core/' )\n\t);\n\n\tif ( galleryBlock ) {\n\t\tconst images = galleryBlock.innerBlocks.map(\n\t\t\t( { attributes: { url, id, alt } } ) => ( {\n\t\t\t\turl,\n\t\t\t\tid: id ? parseInt( id, 10 ) : null,\n\t\t\t\talt,\n\t\t\t} )\n\t\t);\n\t\tconst ids = images.map( ( { id } ) => id );\n\t\tgalleryBlock.attributes.images = images;\n\t\tgalleryBlock.attributes.ids = ids;\n\t}\n\n\treturn toBlock;\n}\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'growtype/gallery/update-third-party-transform-from',\n\tupdateThirdPartyTransformFromGallery\n);\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/image' ],\n\t\t\ttransform: ( attributes ) => {\n\t\t\t\t// Init the align and size from the first item which may be either the placeholder or an image.\n\t\t\t\tlet { align, sizeSlug } = attributes[ 0 ];\n\t\t\t\t// Loop through all the images and check if they have the same align and size.\n\t\t\t\talign = attributes.every(\n\t\t\t\t\t( attribute ) => attribute.align === align\n\t\t\t\t)\n\t\t\t\t\t? align\n\t\t\t\t\t: undefined;\n\t\t\t\tsizeSlug = attributes.every(\n\t\t\t\t\t( attribute ) => attribute.sizeSlug === sizeSlug\n\t\t\t\t)\n\t\t\t\t\t? sizeSlug\n\t\t\t\t\t: undefined;\n\n\t\t\t\tconst validImages = filter( attributes, ( { url } ) => url );\n\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tconst innerBlocks = validImages.map( ( image ) => {\n\t\t\t\t\t\t// Gallery images can't currently be resized so make sure height and width are undefined.\n\t\t\t\t\t\timage.width = undefined;\n\t\t\t\t\t\timage.height = undefined;\n\t\t\t\t\t\treturn createBlock( 'core/image', image );\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\t'growtype/gallery',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\tsizeSlug,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinnerBlocks\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn createBlock( 'growtype/gallery', {\n\t\t\t\t\timages: validImages.map(\n\t\t\t\t\t\t( { id, url, alt, caption } ) => ( {\n\t\t\t\t\t\t\tid: id.toString(),\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\t\tids: validImages.map( ( { id } ) => parseInt( id, 10 ) ),\n\t\t\t\t\talign,\n\t\t\t\t\tsizeSlug,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'shortcode',\n\t\t\ttag: 'gallery',\n\n\t\t\tattributes: {\n\t\t\t\timages: {\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\tshortcode: ( { named: { ids } } ) => {\n\t\t\t\t\t\tif ( ! isGalleryV2Enabled() ) {\n\t\t\t\t\t\t\treturn parseShortcodeIds( ids ).map( ( id ) => ( {\n\t\t\t\t\t\t\t\tid: id.toString(),\n\t\t\t\t\t\t\t} ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tids: {\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\tshortcode: ( { named: { ids } } ) => {\n\t\t\t\t\t\tif ( ! isGalleryV2Enabled() ) {\n\t\t\t\t\t\t\treturn parseShortcodeIds( ids );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcolumns: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tshortcode: ( { named: { columns = '3' } } ) => {\n\t\t\t\t\t\treturn parseInt( columns, 10 );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tlinkTo: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tshortcode: ( { named: { link } } ) => {\n\t\t\t\t\t\tif ( ! isGalleryV2Enabled() ) {\n\t\t\t\t\t\t\tswitch ( link ) {\n\t\t\t\t\t\t\t\tcase 'post':\n\t\t\t\t\t\t\t\t\treturn DEPRECATED_LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\t\t\treturn DEPRECATED_LINK_DESTINATION_MEDIA;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn DEPRECATED_LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch ( link ) {\n\t\t\t\t\t\t\tcase 'post':\n\t\t\t\t\t\t\t\treturn LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\t\treturn LINK_DESTINATION_MEDIA;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn LINK_DESTINATION_NONE;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\ttransform( { named: { ids, columns = 3, link } } ) {\n\t\t\t\tconst imageIds = parseShortcodeIds( ids ).map( ( id ) =>\n\t\t\t\t\tparseInt( id, 10 )\n\t\t\t\t);\n\n\t\t\t\tlet linkTo = LINK_DESTINATION_NONE;\n\t\t\t\tif ( link === 'post' ) {\n\t\t\t\t\tlinkTo = LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t} else if ( link === 'file' ) {\n\t\t\t\t\tlinkTo = LINK_DESTINATION_MEDIA;\n\t\t\t\t}\n\n\t\t\t\tconst galleryBlock = createBlock(\n\t\t\t\t\t'growtype/gallery',\n\t\t\t\t\t{\n\t\t\t\t\t\tcolumns: parseInt( columns, 10 ),\n\t\t\t\t\t\tlinkTo,\n\t\t\t\t\t},\n\t\t\t\t\timageIds.map( ( imageId ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', { id: imageId } )\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\treturn galleryBlock;\n\t\t\t},\n\t\t\tisMatch( { named } ) {\n\t\t\t\treturn undefined !== named.ids;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\t// When created by drag and dropping multiple files on an insertion point. Because multiple\n\t\t\t// files must not be transformed to a gallery when dropped within a gallery there is another transform\n\t\t\t// within the image block to handle that case. Therefore this transform has to have priority 1\n\t\t\t// set so that it overrrides the image block transformation when mulitple images are dropped outside\n\t\t\t// of a gallery block.\n\t\t\ttype: 'files',\n\t\t\tpriority: 1,\n\t\t\tisMatch( files ) {\n\t\t\t\treturn (\n\t\t\t\t\tfiles.length !== 1 &&\n\t\t\t\t\tfiles.every(\n\t\t\t\t\t\t( file ) => file.type.indexOf( 'image/' ) === 0\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t},\n\t\t\ttransform( files ) {\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tconst innerBlocks = files.map( ( file ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t\treturn createBlock( 'growtype/gallery', {}, innerBlocks );\n\t\t\t\t}\n\t\t\t\tconst block = createBlock( 'growtype/gallery', {\n\t\t\t\t\timages: files.map( ( file ) =>\n\t\t\t\t\t\tpickRelevantMediaFiles( {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t\treturn block;\n\t\t\t},\n\t\t},\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/image' ],\n\t\t\ttransform: ( { align, images, ids, sizeSlug }, innerBlocks ) => {\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tif ( innerBlocks.length > 0 ) {\n\t\t\t\t\t\treturn innerBlocks.map(\n\t\t\t\t\t\t\t( {\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t\t\trel,\n\t\t\t\t\t\t\t\t\tlinkClass,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tsizeSlug: imageSizeSlug,\n\t\t\t\t\t\t\t\t\tlinkDestination,\n\t\t\t\t\t\t\t\t\tlinkTarget,\n\t\t\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} ) =>\n\t\t\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t\t\trel,\n\t\t\t\t\t\t\t\t\tlinkClass,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tsizeSlug: imageSizeSlug,\n\t\t\t\t\t\t\t\t\tlinkDestination,\n\t\t\t\t\t\t\t\t\tlinkTarget,\n\t\t\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn createBlock( 'core/image', { align } );\n\t\t\t\t}\n\t\t\t\tif ( images.length > 0 ) {\n\t\t\t\t\treturn images.map( ( { url, alt, caption }, index ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\tid: ids[ index ],\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\tsizeSlug,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn createBlock( 'core/image', { align } );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\n\nconst EMPTY_IMAGE_MEDIA = [];\n\n/**\n * Retrieves the extended media info for each gallery image from the store. This is used to\n * determine which image size options are available for the current gallery.\n *\n * @param {Array} innerBlockImages An array of the innerBlock images currently in the gallery.\n *\n * @return {Array} An array of media info options for each gallery image.\n */\nexport default function useGetMedia( innerBlockImages ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst imageIds = innerBlockImages\n\t\t\t\t.map( ( imageBlock ) => imageBlock.attributes.id )\n\t\t\t\t.filter( ( id ) => id !== undefined );\n\n\t\t\tif ( imageIds.length === 0 ) {\n\t\t\t\treturn EMPTY_IMAGE_MEDIA;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tselect( coreStore ).getMediaItems( {\n\t\t\t\t\tinclude: imageIds.join( ',' ),\n\t\t\t\t\tper_page: imageIds.length,\n\t\t\t\t\torderby: 'include',\n\t\t\t\t} ) ?? EMPTY_IMAGE_MEDIA\n\t\t\t);\n\t\t},\n\t\t[ innerBlockImages ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useState } from '@wordpress/element';\n\n/**\n * Keeps track of images already in the gallery to allow new innerBlocks to be identified. This\n * is required so default gallery attributes can be applied without overwriting any custom\n * attributes applied to existing images.\n *\n * @param {Array} images    Basic image block data taken from current gallery innerBlock\n * @param {Array} imageData The related image data for each of the current gallery images.\n *\n * @return {Array} An array of any new images that have been added to the gallery.\n */\nexport default function useGetNewImages( images, imageData ) {\n\tconst [ currentImages, setCurrentImages ] = useState( [] );\n\n\treturn useMemo( () => getNewImages(), [ images, imageData ] );\n\n\tfunction getNewImages() {\n\t\tlet imagesUpdated = false;\n\n\t\t// First lets check if any images have been deleted.\n\t\tconst newCurrentImages = currentImages.filter( ( currentImg ) =>\n\t\t\timages.find( ( img ) => {\n\t\t\t\treturn currentImg.clientId === img.clientId;\n\t\t\t} )\n\t\t);\n\n\t\tif ( newCurrentImages.length < currentImages.length ) {\n\t\t\timagesUpdated = true;\n\t\t}\n\n\t\t// Now lets see if we have any images hydrated from saved content and if so\n\t\t// add them to currentImages state.\n\t\timages.forEach( ( image ) => {\n\t\t\tif (\n\t\t\t\timage.fromSavedContent &&\n\t\t\t\t! newCurrentImages.find(\n\t\t\t\t\t( currentImage ) => currentImage.id === image.id\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\timagesUpdated = true;\n\t\t\t\tnewCurrentImages.push( image );\n\t\t\t}\n\t\t} );\n\n\t\t// Now check for any new images that have been added to InnerBlocks and for which\n\t\t// we have the imageData we need for setting default block attributes.\n\t\tconst newImages = images.filter(\n\t\t\t( image ) =>\n\t\t\t\t! newCurrentImages.find(\n\t\t\t\t\t( currentImage ) =>\n\t\t\t\t\t\timage.clientId &&\n\t\t\t\t\t\tcurrentImage.clientId === image.clientId\n\t\t\t\t) &&\n\t\t\t\timageData?.find( ( img ) => img.id === image.id ) &&\n\t\t\t\t! image.fromSavedConent\n\t\t);\n\n\t\tif ( imagesUpdated || newImages?.length > 0 ) {\n\t\t\tsetCurrentImages( [ ...newCurrentImages, ...newImages ] );\n\t\t}\n\n\t\treturn newImages.length > 0 ? newImages : null;\n\t}\n}\n","/**\n * External dependencies\n */\nimport { get, some } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Calculates the image sizes that are avaible for the current gallery images in order to\n * populate the 'Image size' selector.\n *\n * @param {Array}    images      Basic image block data taken from current gallery innerBlock\n * @param {boolean}  isSelected  Is the block currently selected in the editor.\n * @param {Function} getSettings Block editor store selector.\n *\n * @return {Array} An array of image size options.\n */\nexport default function useImageSizes( images, isSelected, getSettings ) {\n\treturn useMemo( () => getImageSizing(), [ images, isSelected ] );\n\n\tfunction getImageSizing() {\n\t\tif ( ! images || images.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { imageSizes } = getSettings();\n\t\tlet resizedImages = {};\n\n\t\tif ( isSelected ) {\n\t\t\tresizedImages = images.reduce( ( currentResizedImages, img ) => {\n\t\t\t\tif ( ! img.id ) {\n\t\t\t\t\treturn currentResizedImages;\n\t\t\t\t}\n\n\t\t\t\tconst sizes = imageSizes.reduce( ( currentSizes, size ) => {\n\t\t\t\t\tconst defaultUrl = get( img, [\n\t\t\t\t\t\t'sizes',\n\t\t\t\t\t\tsize.slug,\n\t\t\t\t\t\t'url',\n\t\t\t\t\t] );\n\t\t\t\t\tconst mediaDetailsUrl = get( img, [\n\t\t\t\t\t\t'media_details',\n\t\t\t\t\t\t'sizes',\n\t\t\t\t\t\tsize.slug,\n\t\t\t\t\t\t'source_url',\n\t\t\t\t\t] );\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...currentSizes,\n\t\t\t\t\t\t[ size.slug ]: defaultUrl || mediaDetailsUrl,\n\t\t\t\t\t};\n\t\t\t\t}, {} );\n\t\t\t\treturn {\n\t\t\t\t\t...currentResizedImages,\n\t\t\t\t\t[ parseInt( img.id, 10 ) ]: sizes,\n\t\t\t\t};\n\t\t\t}, {} );\n\t\t}\n\t\treturn imageSizes\n\t\t\t.filter( ( { slug } ) =>\n\t\t\t\tsome( resizedImages, ( sizes ) => sizes[ slug ] )\n\t\t\t)\n\t\t\t.map( ( { name, slug } ) => ( { value: slug, label: name } ) );\n\t}\n}\n","/**\n * Internal dependencies\n */\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA,\n\tLINK_DESTINATION_NONE,\n\tLINK_DESTINATION_MEDIA_WP_CORE,\n\tLINK_DESTINATION_ATTACHMENT_WP_CORE,\n} from './constants';\nimport {\n\tLINK_DESTINATION_ATTACHMENT as IMAGE_LINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA as IMAGE_LINK_DESTINATION_MEDIA,\n\tLINK_DESTINATION_NONE as IMAGE_LINK_DESTINATION_NONE,\n} from './image/constants';\n\n/**\n * Determines new href and linkDestination values for an Image block from the\n * supplied Gallery link destination, or falls back to the Image blocks link.\n *\n * @param {Object} image              Gallery image.\n * @param {string} galleryDestination Gallery's selected link destination.\n * @param {Object} imageDestination   Image blocks attributes.\n * @return {Object}            New attributes to assign to image block.\n */\nexport function getHrefAndDestination(\n\timage,\n\tgalleryDestination,\n\timageDestination\n) {\n\t// Gutenberg and WordPress use different constants so if image_default_link_type\n\t// option is set we need to map from the WP Core values.\n\tswitch ( imageDestination ? imageDestination : galleryDestination ) {\n\t\tcase LINK_DESTINATION_MEDIA_WP_CORE:\n\t\tcase LINK_DESTINATION_MEDIA:\n\t\t\treturn {\n\t\t\t\thref: image?.source_url || image?.url, // eslint-disable-line camelcase\n\t\t\t\tlinkDestination: IMAGE_LINK_DESTINATION_MEDIA,\n\t\t\t};\n\t\tcase LINK_DESTINATION_ATTACHMENT_WP_CORE:\n\t\tcase LINK_DESTINATION_ATTACHMENT:\n\t\t\treturn {\n\t\t\t\thref: image?.link,\n\t\t\t\tlinkDestination: IMAGE_LINK_DESTINATION_ATTACHMENT,\n\t\t\t};\n\t\tcase LINK_DESTINATION_NONE:\n\t\t\treturn {\n\t\t\t\thref: undefined,\n\t\t\t\tlinkDestination: IMAGE_LINK_DESTINATION_NONE,\n\t\t\t};\n\t}\n\n\treturn {};\n}\n","/**\n * WordPress dependencies\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Function to register an individual block.\n *\n * @param {Object} block The block to be registered.\n *\n * @return {?WPBlockType} The block, if it has been successfully registered;\n *                        otherwise `undefined`.\n */\nexport default function initBlock( block ) {\n\tif ( ! block ) {\n\t\treturn;\n\t}\n\tconst { metadata, settings, name } = block;\n\treturn registerBlockType( { name, ...metadata }, settings );\n}\n","export const LINK_DESTINATION_NONE = 'none';\nexport const LINK_DESTINATION_MEDIA = 'file';\nexport const LINK_DESTINATION_ATTACHMENT = 'post';\n","/**\n * External dependencies\n */\nimport { filter, find, get, isEmpty, map, reduce, some } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport {\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n\twithNotices,\n\tRangeControl,\n} from '@wordpress/components';\nimport {\n\tMediaPlaceholder,\n\tInspectorControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { Platform, useEffect, useState, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { getBlobByURL, isBlobURL, revokeBlobURL } from '@wordpress/blob';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { View } from '@wordpress/primitives';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { sharedIcon } from '../shared-icon';\nimport { pickRelevantMediaFiles } from './shared';\nimport { defaultColumnsNumberV1 } from '../deprecated';\nimport Gallery from './gallery';\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA,\n\tLINK_DESTINATION_NONE,\n} from './constants';\n\nconst MAX_COLUMNS = 8;\nconst linkOptions = [\n\t{ value: LINK_DESTINATION_ATTACHMENT, label: __( 'Attachment Page' ) },\n\t{ value: LINK_DESTINATION_MEDIA, label: __( 'Media File' ) },\n\t{ value: LINK_DESTINATION_NONE, label: __( 'None' ) },\n];\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\n\nconst PLACEHOLDER_TEXT = Platform.select( {\n\tweb: __(\n\t\t'Drag images, upload new ones or select files from your library.'\n\t),\n\tnative: __( 'ADD MEDIA' ),\n} );\n\nconst MOBILE_CONTROL_PROPS_RANGE_CONTROL = Platform.select( {\n\tweb: {},\n\tnative: { type: 'stepper' },\n} );\n\nfunction GalleryEdit( props ) {\n\tconst {\n\t\tattributes,\n\t\tclientId,\n\t\tisSelected,\n\t\tnoticeUI,\n\t\tnoticeOperations,\n\t\tonFocus,\n\t} = props;\n\tconst {\n\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\timageCrop,\n\t\timages,\n\t\tlinkTo,\n\t\tsizeSlug,\n\t} = attributes;\n\tconst [ selectedImage, setSelectedImage ] = useState();\n\tconst [ attachmentCaptions, setAttachmentCaptions ] = useState();\n\tconst { __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\tconst { imageSizes, mediaUpload, getMedia, wasBlockJustInserted } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst settings = select( blockEditorStore ).getSettings();\n\n\t\t\treturn {\n\t\t\t\timageSizes: settings.imageSizes,\n\t\t\t\tmediaUpload: settings.mediaUpload,\n\t\t\t\tgetMedia: select( coreStore ).getMedia,\n\t\t\t\twasBlockJustInserted: select(\n\t\t\t\t\tblockEditorStore\n\t\t\t\t).wasBlockJustInserted( clientId, 'inserter_menu' ),\n\t\t\t};\n\t\t} );\n\n\tconst resizedImages = useMemo( () => {\n\t\tif ( isSelected ) {\n\t\t\treturn reduce(\n\t\t\t\tattributes.ids,\n\t\t\t\t( currentResizedImages, id ) => {\n\t\t\t\t\tif ( ! id ) {\n\t\t\t\t\t\treturn currentResizedImages;\n\t\t\t\t\t}\n\t\t\t\t\tconst image = getMedia( id );\n\t\t\t\t\tconst sizes = reduce(\n\t\t\t\t\t\timageSizes,\n\t\t\t\t\t\t( currentSizes, size ) => {\n\t\t\t\t\t\t\tconst defaultUrl = get( image, [\n\t\t\t\t\t\t\t\t'sizes',\n\t\t\t\t\t\t\t\tsize.slug,\n\t\t\t\t\t\t\t\t'url',\n\t\t\t\t\t\t\t] );\n\t\t\t\t\t\t\tconst mediaDetailsUrl = get( image, [\n\t\t\t\t\t\t\t\t'media_details',\n\t\t\t\t\t\t\t\t'sizes',\n\t\t\t\t\t\t\t\tsize.slug,\n\t\t\t\t\t\t\t\t'source_url',\n\t\t\t\t\t\t\t] );\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...currentSizes,\n\t\t\t\t\t\t\t\t[ size.slug ]: defaultUrl || mediaDetailsUrl,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...currentResizedImages,\n\t\t\t\t\t\t[ parseInt( id, 10 ) ]: sizes,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\t\t}\n\t\treturn {};\n\t}, [ isSelected, attributes.ids, imageSizes ] );\n\n\tfunction onFocusGalleryCaption() {\n\t\tsetSelectedImage();\n\t}\n\n\tfunction setAttributes( newAttrs ) {\n\t\tif ( newAttrs.ids ) {\n\t\t\tthrow new Error(\n\t\t\t\t'The \"ids\" attribute should not be changed directly. It is managed automatically when \"images\" attribute changes'\n\t\t\t);\n\t\t}\n\n\t\tif ( newAttrs.images ) {\n\t\t\tnewAttrs = {\n\t\t\t\t...newAttrs,\n\t\t\t\t// Unlike images[ n ].id which is a string, always ensure the\n\t\t\t\t// ids array contains numbers as per its attribute type.\n\t\t\t\tids: map( newAttrs.images, ( { id } ) => parseInt( id, 10 ) ),\n\t\t\t};\n\t\t}\n\n\t\tprops.setAttributes( newAttrs );\n\t}\n\n\tfunction onSelectImage( index ) {\n\t\treturn () => {\n\t\t\tsetSelectedImage( index );\n\t\t};\n\t}\n\n\tfunction onDeselectImage() {\n\t\treturn () => {\n\t\t\tsetSelectedImage();\n\t\t};\n\t}\n\n\tfunction onMove( oldIndex, newIndex ) {\n\t\tconst newImages = [ ...images ];\n\t\tnewImages.splice( newIndex, 1, images[ oldIndex ] );\n\t\tnewImages.splice( oldIndex, 1, images[ newIndex ] );\n\t\tsetSelectedImage( newIndex );\n\t\tsetAttributes( { images: newImages } );\n\t}\n\n\tfunction onMoveForward( oldIndex ) {\n\t\treturn () => {\n\t\t\tif ( oldIndex === images.length - 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonMove( oldIndex, oldIndex + 1 );\n\t\t};\n\t}\n\n\tfunction onMoveBackward( oldIndex ) {\n\t\treturn () => {\n\t\t\tif ( oldIndex === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonMove( oldIndex, oldIndex - 1 );\n\t\t};\n\t}\n\n\tfunction onRemoveImage( index ) {\n\t\treturn () => {\n\t\t\tconst newImages = filter( images, ( img, i ) => index !== i );\n\t\t\tsetSelectedImage();\n\t\t\tsetAttributes( {\n\t\t\t\timages: newImages,\n\t\t\t\tcolumns: attributes.columns\n\t\t\t\t\t? Math.min( newImages.length, attributes.columns )\n\t\t\t\t\t: attributes.columns,\n\t\t\t} );\n\t\t};\n\t}\n\n\tfunction selectCaption( newImage ) {\n\t\t// The image id in both the images and attachmentCaptions arrays is a\n\t\t// string, so ensure comparison works correctly by converting the\n\t\t// newImage.id to a string.\n\t\tconst newImageId = newImage.id.toString();\n\t\tconst currentImage = find( images, { id: newImageId } );\n\t\tconst currentImageCaption = currentImage\n\t\t\t? currentImage.caption\n\t\t\t: newImage.caption;\n\n\t\tif ( ! attachmentCaptions ) {\n\t\t\treturn currentImageCaption;\n\t\t}\n\n\t\tconst attachment = find( attachmentCaptions, {\n\t\t\tid: newImageId,\n\t\t} );\n\n\t\t// If the attachment caption is updated.\n\t\tif ( attachment && attachment.caption !== newImage.caption ) {\n\t\t\treturn newImage.caption;\n\t\t}\n\n\t\treturn currentImageCaption;\n\t}\n\n\tfunction onSelectImages( newImages ) {\n\t\tsetAttachmentCaptions(\n\t\t\tnewImages.map( ( newImage ) => ( {\n\t\t\t\t// Store the attachmentCaption id as a string for consistency\n\t\t\t\t// with the type of the id in the images attribute.\n\t\t\t\tid: newImage.id.toString(),\n\t\t\t\tcaption: newImage.caption,\n\t\t\t} ) )\n\t\t);\n\t\tsetAttributes( {\n\t\t\timages: newImages.map( ( newImage ) => ( {\n\t\t\t\t...pickRelevantMediaFiles( newImage, sizeSlug ),\n\t\t\t\tcaption: selectCaption( newImage, images, attachmentCaptions ),\n\t\t\t\t// The id value is stored in a data attribute, so when the\n\t\t\t\t// block is parsed it's converted to a string. Converting\n\t\t\t\t// to a string here ensures it's type is consistent.\n\t\t\t\tid: newImage.id.toString(),\n\t\t\t} ) ),\n\t\t\tcolumns: attributes.columns\n\t\t\t\t? Math.min( newImages.length, attributes.columns )\n\t\t\t\t: attributes.columns,\n\t\t} );\n\t}\n\n\tfunction onUploadError( message ) {\n\t\tnoticeOperations.removeAllNotices();\n\t\tnoticeOperations.createErrorNotice( message );\n\t}\n\n\tfunction setLinkTo( value ) {\n\t\tsetAttributes( { linkTo: value } );\n\t}\n\n\tfunction setColumnsNumber( value ) {\n\t\tsetAttributes( { columns: value } );\n\t}\n\n\tfunction toggleImageCrop() {\n\t\tsetAttributes( { imageCrop: ! imageCrop } );\n\t}\n\n\tfunction getImageCropHelp( checked ) {\n\t\treturn checked\n\t\t\t? __( 'Thumbnails are cropped to align.' )\n\t\t\t: __( 'Thumbnails are not cropped.' );\n\t}\n\n\tfunction setImageAttributes( index, newAttributes ) {\n\t\tif ( ! images[ index ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\timages: [\n\t\t\t\t...images.slice( 0, index ),\n\t\t\t\t{\n\t\t\t\t\t...images[ index ],\n\t\t\t\t\t...newAttributes,\n\t\t\t\t},\n\t\t\t\t...images.slice( index + 1 ),\n\t\t\t],\n\t\t} );\n\t}\n\n\tfunction getImagesSizeOptions() {\n\t\treturn map(\n\t\t\tfilter( imageSizes, ( { slug } ) =>\n\t\t\t\tsome( resizedImages, ( sizes ) => sizes[ slug ] )\n\t\t\t),\n\t\t\t( { name, slug } ) => ( { value: slug, label: name } )\n\t\t);\n\t}\n\n\tfunction updateImagesSize( newSizeSlug ) {\n\t\tconst updatedImages = map( images, ( image ) => {\n\t\t\tif ( ! image.id ) {\n\t\t\t\treturn image;\n\t\t\t}\n\t\t\tconst url = get( resizedImages, [\n\t\t\t\tparseInt( image.id, 10 ),\n\t\t\t\tnewSizeSlug,\n\t\t\t] );\n\t\t\treturn {\n\t\t\t\t...image,\n\t\t\t\t...( url && { url } ),\n\t\t\t};\n\t\t} );\n\n\t\tsetAttributes( { images: updatedImages, sizeSlug: newSizeSlug } );\n\t}\n\n\tuseEffect( () => {\n\t\tif (\n\t\t\tPlatform.OS === 'web' &&\n\t\t\timages &&\n\t\t\timages.length > 0 &&\n\t\t\timages.every( ( { url } ) => isBlobURL( url ) )\n\t\t) {\n\t\t\tconst filesList = map( images, ( { url } ) => getBlobByURL( url ) );\n\t\t\timages.forEach( ( { url } ) => revokeBlobURL( url ) );\n\t\t\tmediaUpload( {\n\t\t\t\tfilesList,\n\t\t\t\tonFileChange: onSelectImages,\n\t\t\t\tallowedTypes: [ 'image' ],\n\t\t\t} );\n\t\t}\n\t}, [] );\n\n\tuseEffect( () => {\n\t\t// Deselect images when deselecting the block.\n\t\tif ( ! isSelected ) {\n\t\t\tsetSelectedImage();\n\t\t}\n\t}, [ isSelected ] );\n\n\tuseEffect( () => {\n\t\t// linkTo attribute must be saved so blocks don't break when changing\n\t\t// image_default_link_type in options.php.\n\t\tif ( ! linkTo ) {\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tsetAttributes( {\n\t\t\t\tlinkTo:\n\t\t\t\t\twindow?.wp?.media?.view?.settings?.defaultProps?.link ||\n\t\t\t\t\tLINK_DESTINATION_NONE,\n\t\t\t} );\n\t\t}\n\t}, [ linkTo ] );\n\n\tconst hasImages = !! images.length;\n\tconst hasImageIds = hasImages && images.some( ( image ) => !! image.id );\n\n\tconst mediaPlaceholder = (\n\t\t<MediaPlaceholder\n\t\t\taddToGallery={ hasImageIds }\n\t\t\tisAppender={ hasImages }\n\t\t\tdisableMediaButtons={ hasImages && ! isSelected }\n\t\t\ticon={ ! hasImages && sharedIcon }\n\t\t\tlabels={ {\n\t\t\t\ttitle: ! hasImages && __( 'Gallery' ),\n\t\t\t\tinstructions: ! hasImages && PLACEHOLDER_TEXT,\n\t\t\t} }\n\t\t\tonSelect={ onSelectImages }\n\t\t\taccept=\"image/*\"\n\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\tmultiple\n\t\t\tvalue={ hasImageIds ? images : {} }\n\t\t\tonError={ onUploadError }\n\t\t\tnotices={ hasImages ? undefined : noticeUI }\n\t\t\tonFocus={ onFocus }\n\t\t\tautoOpenMediaUpload={\n\t\t\t\t! hasImages && isSelected && wasBlockJustInserted\n\t\t\t}\n\t\t/>\n\t);\n\n\tconst blockProps = useBlockProps();\n\n\tif ( ! hasImages ) {\n\t\treturn <View { ...blockProps }>{ mediaPlaceholder }</View>;\n\t}\n\n\tconst imageSizeOptions = getImagesSizeOptions();\n\tconst shouldShowSizeOptions = hasImages && ! isEmpty( imageSizeOptions );\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t{ images.length > 1 && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\tvalue={ columns }\n\t\t\t\t\t\t\tonChange={ setColumnsNumber }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tmax={ Math.min( MAX_COLUMNS, images.length ) }\n\t\t\t\t\t\t\t{ ...MOBILE_CONTROL_PROPS_RANGE_CONTROL }\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Crop images' ) }\n\t\t\t\t\t\tchecked={ !! imageCrop }\n\t\t\t\t\t\tonChange={ toggleImageCrop }\n\t\t\t\t\t\thelp={ getImageCropHelp }\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __( 'Link to' ) }\n\t\t\t\t\t\tvalue={ linkTo }\n\t\t\t\t\t\tonChange={ setLinkTo }\n\t\t\t\t\t\toptions={ linkOptions }\n\t\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t\t/>\n\t\t\t\t\t{ shouldShowSizeOptions && (\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Image size' ) }\n\t\t\t\t\t\t\tvalue={ sizeSlug }\n\t\t\t\t\t\t\toptions={ imageSizeOptions }\n\t\t\t\t\t\t\tonChange={ updateImagesSize }\n\t\t\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ noticeUI }\n\t\t\t<Gallery\n\t\t\t\t{ ...props }\n\t\t\t\tselectedImage={ selectedImage }\n\t\t\t\tmediaPlaceholder={ mediaPlaceholder }\n\t\t\t\tonMoveBackward={ onMoveBackward }\n\t\t\t\tonMoveForward={ onMoveForward }\n\t\t\t\tonRemoveImage={ onRemoveImage }\n\t\t\t\tonSelectImage={ onSelectImage }\n\t\t\t\tonDeselectImage={ onDeselectImage }\n\t\t\t\tonSetImageAttributes={ setImageAttributes }\n\t\t\t\tblockProps={ blockProps }\n\t\t\t\t// This prop is used by gallery.native.js.\n\t\t\t\tonFocusGalleryCaption={ onFocusGalleryCaption }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithNotices,\n\twithViewportMatch( { isNarrow: '< small' } ),\n] )( GalleryEdit );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { Button, Spinner, ButtonGroup } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport {\n\tRichText,\n\tMediaPlaceholder,\n\tstore as blockEditorStore,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\nimport { isBlobURL } from '@wordpress/blob';\nimport { compose } from '@wordpress/compose';\nimport {\n\tcloseSmall,\n\tchevronLeft,\n\tchevronRight,\n\tedit,\n\timage as imageIcon,\n} from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { pickRelevantMediaFiles } from './shared';\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA,\n} from './constants';\n\nconst isTemporaryImage = ( id, url ) => ! id && isBlobURL( url );\n\nclass GalleryImage extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onSelectImage = this.onSelectImage.bind( this );\n\t\tthis.onRemoveImage = this.onRemoveImage.bind( this );\n\t\tthis.bindContainer = this.bindContainer.bind( this );\n\t\tthis.onEdit = this.onEdit.bind( this );\n\t\tthis.onSelectImageFromLibrary =\n\t\t\tthis.onSelectImageFromLibrary.bind( this );\n\t\tthis.onSelectCustomURL = this.onSelectCustomURL.bind( this );\n\t\tthis.state = {\n\t\t\tisEditing: false,\n\t\t};\n\t}\n\n\tbindContainer( ref ) {\n\t\tthis.container = ref;\n\t}\n\n\tonSelectImage() {\n\t\tif ( ! this.props.isSelected ) {\n\t\t\tthis.props.onSelect();\n\t\t}\n\t}\n\n\tonRemoveImage( event ) {\n\t\tif (\n\t\t\tthis.container === this.container.ownerDocument.activeElement &&\n\t\t\tthis.props.isSelected &&\n\t\t\t[ BACKSPACE, DELETE ].indexOf( event.keyCode ) !== -1\n\t\t) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.props.onRemove();\n\t\t}\n\t}\n\n\tonEdit() {\n\t\tthis.setState( {\n\t\t\tisEditing: true,\n\t\t} );\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst { image, url, __unstableMarkNextChangeAsNotPersistent } =\n\t\t\tthis.props;\n\t\tif ( image && ! url ) {\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tthis.props.setAttributes( {\n\t\t\t\turl: image.source_url,\n\t\t\t\talt: image.alt_text,\n\t\t\t} );\n\t\t}\n\t}\n\n\tdeselectOnBlur() {\n\t\tthis.props.onDeselect();\n\t}\n\n\tonSelectImageFromLibrary( media ) {\n\t\tconst { setAttributes, id, url, alt, caption, sizeSlug } = this.props;\n\t\tif ( ! media || ! media.url ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet mediaAttributes = pickRelevantMediaFiles( media, sizeSlug );\n\n\t\t// If the current image is temporary but an alt text was meanwhile\n\t\t// written by the user, make sure the text is not overwritten.\n\t\tif ( isTemporaryImage( id, url ) ) {\n\t\t\tif ( alt ) {\n\t\t\t\tconst { alt: omittedAlt, ...restMediaAttributes } =\n\t\t\t\t\tmediaAttributes;\n\t\t\t\tmediaAttributes = restMediaAttributes;\n\t\t\t}\n\t\t}\n\n\t\t// If a caption text was meanwhile written by the user,\n\t\t// make sure the text is not overwritten by empty captions.\n\t\tif ( caption && ! get( mediaAttributes, [ 'caption' ] ) ) {\n\t\t\tconst { caption: omittedCaption, ...restMediaAttributes } =\n\t\t\t\tmediaAttributes;\n\t\t\tmediaAttributes = restMediaAttributes;\n\t\t}\n\n\t\tsetAttributes( mediaAttributes );\n\t\tthis.setState( {\n\t\t\tisEditing: false,\n\t\t} );\n\t}\n\n\tonSelectCustomURL( newURL ) {\n\t\tconst { setAttributes, url } = this.props;\n\t\tif ( newURL !== url ) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: newURL,\n\t\t\t\tid: undefined,\n\t\t\t} );\n\t\t\tthis.setState( {\n\t\t\t\tisEditing: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\turl,\n\t\t\talt,\n\t\t\tid,\n\t\t\tlinkTo,\n\t\t\tlink,\n\t\t\tisFirstItem,\n\t\t\tisLastItem,\n\t\t\tisSelected,\n\t\t\tcaption,\n\t\t\tonRemove,\n\t\t\tonMoveForward,\n\t\t\tonMoveBackward,\n\t\t\tsetAttributes,\n\t\t\t'aria-label': ariaLabel,\n\t\t} = this.props;\n\t\tconst { isEditing } = this.state;\n\n\t\tlet href;\n\n\t\tswitch ( linkTo ) {\n\t\t\tcase LINK_DESTINATION_MEDIA:\n\t\t\t\thref = url;\n\t\t\t\tbreak;\n\t\t\tcase LINK_DESTINATION_ATTACHMENT:\n\t\t\t\thref = link;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst img = (\n\t\t\t// Disable reason: Image itself is not meant to be interactive, but should\n\t\t\t// direct image selection and unfocus caption fields.\n\t\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\t\t\t<>\n\t\t\t\t<img\n\t\t\t\t\tsrc={ url }\n\t\t\t\t\talt={ alt }\n\t\t\t\t\tdata-id={ id }\n\t\t\t\t\tonKeyDown={ this.onRemoveImage }\n\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\taria-label={ ariaLabel }\n\t\t\t\t\tref={ this.bindContainer }\n\t\t\t\t/>\n\t\t\t\t{ isBlobURL( url ) && <Spinner /> }\n\t\t\t</>\n\t\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions */\n\t\t);\n\n\t\tconst className = classnames( {\n\t\t\t'is-selected': isSelected,\n\t\t\t'is-transient': isBlobURL( url ),\n\t\t} );\n\n\t\treturn (\n\t\t\t// eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions\n\t\t\t<figure\n\t\t\t\tclassName={ className }\n\t\t\t\tonClick={ this.onSelectImage }\n\t\t\t\tonFocus={ this.onSelectImage }\n\t\t\t>\n\t\t\t\t{ ! isEditing && ( href ? <a href={ href }>{ img }</a> : img ) }\n\t\t\t\t{ isEditing && (\n\t\t\t\t\t<MediaPlaceholder\n\t\t\t\t\t\tlabels={ { title: __( 'Edit gallery image' ) } }\n\t\t\t\t\t\ticon={ imageIcon }\n\t\t\t\t\t\tonSelect={ this.onSelectImageFromLibrary }\n\t\t\t\t\t\tonSelectURL={ this.onSelectCustomURL }\n\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\tallowedTypes={ [ 'image' ] }\n\t\t\t\t\t\tvalue={ { id, src: url } }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<ButtonGroup className=\"block-library-gallery-item__inline-menu is-left\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ chevronLeft }\n\t\t\t\t\t\tonClick={ isFirstItem ? undefined : onMoveBackward }\n\t\t\t\t\t\tlabel={ __( 'Move image backward' ) }\n\t\t\t\t\t\taria-disabled={ isFirstItem }\n\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ chevronRight }\n\t\t\t\t\t\tonClick={ isLastItem ? undefined : onMoveForward }\n\t\t\t\t\t\tlabel={ __( 'Move image forward' ) }\n\t\t\t\t\t\taria-disabled={ isLastItem }\n\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t/>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t<ButtonGroup className=\"block-library-gallery-item__inline-menu is-right\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ edit }\n\t\t\t\t\t\tonClick={ this.onEdit }\n\t\t\t\t\t\tlabel={ __( 'Replace image' ) }\n\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ closeSmall }\n\t\t\t\t\t\tonClick={ onRemove }\n\t\t\t\t\t\tlabel={ __( 'Remove image' ) }\n\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t/>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{ ! isEditing && ( isSelected || caption ) && (\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\tclassName={ __experimentalGetElementClassName(\n\t\t\t\t\t\t\t'caption'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\taria-label={ __( 'Image caption text' ) }\n\t\t\t\t\t\tplaceholder={ isSelected ? __( 'Add caption' ) : null }\n\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t\tonChange={ ( newCaption ) =>\n\t\t\t\t\t\t\tsetAttributes( { caption: newCaption } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</figure>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, ownProps ) => {\n\t\tconst { getMedia } = select( coreStore );\n\t\tconst { id } = ownProps;\n\n\t\treturn {\n\t\t\timage: id ? getMedia( parseInt( id, 10 ) ) : null,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { __unstableMarkNextChangeAsNotPersistent } =\n\t\t\tdispatch( blockEditorStore );\n\t\treturn {\n\t\t\t__unstableMarkNextChangeAsNotPersistent,\n\t\t};\n\t} ),\n] )( GalleryImage );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport GalleryImage from './gallery-image';\nimport { defaultColumnsNumberV1 } from '../deprecated';\n\nexport const Gallery = ( props ) => {\n\tconst {\n\t\tattributes,\n\t\tisSelected,\n\t\tsetAttributes,\n\t\tselectedImage,\n\t\tmediaPlaceholder,\n\t\tonMoveBackward,\n\t\tonMoveForward,\n\t\tonRemoveImage,\n\t\tonSelectImage,\n\t\tonDeselectImage,\n\t\tonSetImageAttributes,\n\t\tinsertBlocksAfter,\n\t\tblockProps,\n\t} = props;\n\n\tconst {\n\t\talign,\n\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\tcaption,\n\t\timageCrop,\n\t\timages,\n\t} = attributes;\n\n\treturn (\n\t\t<figure\n\t\t\t{ ...blockProps }\n\t\t\tclassName={ classnames( blockProps.className, {\n\t\t\t\t[ `align${ align }` ]: align,\n\t\t\t\t[ `columns-${ columns }` ]: columns,\n\t\t\t\t'is-cropped': imageCrop,\n\t\t\t} ) }\n\t\t>\n\t\t\t<ul className=\"blocks-gallery-grid\">\n\t\t\t\t{ images.map( ( img, index ) => {\n\t\t\t\t\tconst ariaLabel = sprintf(\n\t\t\t\t\t\t/* translators: 1: the order number of the image. 2: the total number of images. */\n\t\t\t\t\t\t__( 'image %1$d of %2$d in gallery' ),\n\t\t\t\t\t\tindex + 1,\n\t\t\t\t\t\timages.length\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t\tkey={ img.id ? `${ img.id }-${ index }` : img.url }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<GalleryImage\n\t\t\t\t\t\t\t\turl={ img.url }\n\t\t\t\t\t\t\t\talt={ img.alt }\n\t\t\t\t\t\t\t\tid={ img.id }\n\t\t\t\t\t\t\t\tisFirstItem={ index === 0 }\n\t\t\t\t\t\t\t\tisLastItem={ index + 1 === images.length }\n\t\t\t\t\t\t\t\tisSelected={\n\t\t\t\t\t\t\t\t\tisSelected && selectedImage === index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonMoveBackward={ onMoveBackward( index ) }\n\t\t\t\t\t\t\t\tonMoveForward={ onMoveForward( index ) }\n\t\t\t\t\t\t\t\tonRemove={ onRemoveImage( index ) }\n\t\t\t\t\t\t\t\tonSelect={ onSelectImage( index ) }\n\t\t\t\t\t\t\t\tonDeselect={ onDeselectImage( index ) }\n\t\t\t\t\t\t\t\tsetAttributes={ ( attrs ) =>\n\t\t\t\t\t\t\t\t\tonSetImageAttributes( index, attrs )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcaption={ img.caption }\n\t\t\t\t\t\t\t\taria-label={ ariaLabel }\n\t\t\t\t\t\t\t\tsizeSlug={ attributes.sizeSlug }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t\t{ mediaPlaceholder }\n\t\t\t<RichTextVisibilityHelper\n\t\t\t\tisHidden={ ! isSelected && RichText.isEmpty( caption ) }\n\t\t\t\ttagName=\"figcaption\"\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'blocks-gallery-caption',\n\t\t\t\t\t__experimentalGetElementClassName( 'caption' )\n\t\t\t\t) }\n\t\t\t\taria-label={ __( 'Gallery caption text' ) }\n\t\t\t\tplaceholder={ __( 'Write gallery caption…' ) }\n\t\t\t\tvalue={ caption }\n\t\t\t\tonChange={ ( value ) => setAttributes( { caption: value } ) }\n\t\t\t\tinlineToolbar\n\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\tinsertBlocksAfter( createBlock( getDefaultBlockName() ) )\n\t\t\t\t}\n\t\t\t/>\n\t\t</figure>\n\t);\n};\n\nfunction RichTextVisibilityHelper( { isHidden, ...richTextProps } ) {\n\treturn isHidden ? (\n\t\t<VisuallyHidden as={ RichText } { ...richTextProps } />\n\t) : (\n\t\t<RichText { ...richTextProps } />\n\t);\n}\n\nexport default Gallery;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\tuseBlockProps,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { defaultColumnsNumberV1 } from '../deprecated';\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA,\n} from './constants';\n\nexport default function saveV1( { attributes } ) {\n\tconst {\n\t\timages,\n\t\tcolumns = defaultColumnsNumberV1( attributes ),\n\t\timageCrop,\n\t\tcaption,\n\t\tlinkTo,\n\t} = attributes;\n\tconst className = `columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }`;\n\n\treturn (\n\t\t<figure { ...useBlockProps.save( { className } ) }>\n\t\t\t<ul className=\"blocks-gallery-grid\">\n\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\tlet href;\n\n\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\tcase LINK_DESTINATION_MEDIA:\n\t\t\t\t\t\t\thref = image.fullUrl || image.url;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase LINK_DESTINATION_ATTACHMENT:\n\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={ image.url }\n\t\t\t\t\t\t\talt={ image.alt }\n\t\t\t\t\t\t\tdata-id={ image.id }\n\t\t\t\t\t\t\tdata-full-url={ image.fullUrl }\n\t\t\t\t\t\t\tdata-link={ image.link }\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\timage.id ? `wp-image-${ image.id }` : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={ image.id || image.url }\n\t\t\t\t\t\t\tclassName=\"blocks-gallery-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t{ ! RichText.isEmpty( image.caption ) && (\n\t\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t\t\t\t'blocks-gallery-item',\n\t\t\t\t\t\t\t\t\t\t\t__experimentalGetElementClassName(\n\t\t\t\t\t\t\t\t\t\t\t\t'caption'\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tvalue={ image.caption }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t\t{ ! RichText.isEmpty( caption ) && (\n\t\t\t\t<RichText.Content\n\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'blocks-gallery-caption',\n\t\t\t\t\t\t__experimentalGetElementClassName( 'caption' )\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ caption }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</figure>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { get, pick } from 'lodash';\n\nexport const pickRelevantMediaFiles = ( image, sizeSlug = 'large' ) => {\n\tconst imageProps = pick( image, [ 'alt', 'id', 'link', 'caption' ] );\n\timageProps.url =\n\t\tget( image, [ 'sizes', sizeSlug, 'url' ] ) ||\n\t\tget( image, [ 'media_details', 'sizes', sizeSlug, 'source_url' ] ) ||\n\t\timage.url;\n\tconst fullUrl =\n\t\tget( image, [ 'sizes', 'full', 'url' ] ) ||\n\t\tget( image, [ 'media_details', 'sizes', 'full', 'source_url' ] );\n\tif ( fullUrl ) {\n\t\timageProps.fullUrl = fullUrl;\n\t}\n\treturn imageProps;\n};\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","module.exports = window[\"lodash\"];","module.exports = window[\"wp\"][\"blob\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"keycodes\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"viewport\"];","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor. All other files\n * get applied to the editor only.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './../resources/styles/growtype-gallery.scss';\nimport './editor.scss';\n\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst icon = (\n    <SVG width=\"35\" height=\"35\" viewBox=\"0 0 35 35\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M0.579738 26.2702H9.31891C9.31891 28.1128 14.952 28.8498 14.952 24.5329V23.2168C13.5832 25.0067 12.2144 25.3752 10.0033 25.3752C3.15937 25.3752 -0.052009 20.9003 0.000636649 14.8987C0.0532823 8.89715 3.31731 4.47492 9.74008 4.52756C11.688 4.52756 13.7938 5.10667 15.2152 6.84397L15.3732 4.84344H24.007V24.5329C24.007 37.6417 0.579738 37.0626 0.579738 26.2702ZM9.21362 15.2146C9.21362 19.0578 14.8467 19.0578 14.8467 15.162C14.8467 11.2662 9.21362 11.2136 9.21362 15.2146Z\" fill=\"#315344\"/>\n    </SVG>\n);\n\n/**\n * Internal dependencies\n */\n\nimport initBlock from './utils/init-block';\nimport edit from './edit-wrapper';\nimport save from './save';\nimport metadata from './block.json';\nimport deprecated from './deprecated';\nimport transforms from './transforms';\n\nconst {name} = metadata;\nexport {metadata, name};\n\nexport const settings = {\n    icon,\n    example: {\n        attributes: {\n            columns: 2,\n        },\n        innerBlocks: [\n            {\n                name: 'core/image',\n                attributes: {\n                    url: 'https://s.w.org/images/core/5.3/Glacial_lakes%2C_Bhutan.jpg',\n                },\n            },\n            {\n                name: 'core/image',\n                attributes: {\n                    url: 'https://s.w.org/images/core/5.3/Sediment_off_the_Yucatan_Peninsula.jpg',\n                },\n            },\n        ],\n    },\n    transforms,\n    edit,\n    save,\n    deprecated,\n};\n\ninitBlock({name, metadata, settings})\n"],"names":["LINK_DESTINATION_NONE","LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","LINK_DESTINATION_MEDIA_WP_CORE","LINK_DESTINATION_ATTACHMENT_WP_CORE","LINK_DESTINATION_LIGHTBOX","classnames","map","some","RichText","useBlockProps","createBlock","isGalleryV2Enabled","DEPRECATED_LINK_DESTINATION_MEDIA","DEPRECATED_LINK_DESTINATION_ATTACHMENT","defaultColumnsNumberV1","attributes","Math","min","images","length","getHrefAndDestination","image","destination","href","source_url","url","linkDestination","link","undefined","runV2Migration","linkTo","imageBlocks","getImageBlock","sizeSlug","ids","restAttributes","allowResize","id","parseInt","alt","caption","v6","type","default","source","selector","query","attribute","fullUrl","items","columns","minimum","maximum","imageCrop","fixedHeight","supports","anchor","align","save","className","img","isEmpty","migrate","v5","isEligible","v4","parsedId","Number","isInteger","v3","v2","index","v1","alignnone","compose","withNotices","EditWithInnerBlocks","EditWithoutInnerBlocks","GalleryEditWrapper","props","find","BaseControl","PanelBody","SelectControl","ToggleControl","RangeControl","Spinner","TextControl","ColorPicker","__experimentalNumberControl","NumberControl","store","blockEditorStore","MediaPlaceholder","InspectorControls","BlockControls","MediaReplaceFlow","InspectorAdvancedControls","Platform","useEffect","useMemo","__","_x","sprintf","useSelect","useDispatch","withViewportMatch","View","createBlobURL","noticesStore","blockJson","sharedIcon","defaultColumnsNumber","pickRelevantMediaFiles","getUpdatedLinkTargetSettings","getImageSizeAttributes","Gallery","useImageSizes","useGetNewImages","useGetMedia","GapStyles","MAX_COLUMNS","linkOptions","value","label","ALLOWED_MEDIA_TYPES","PLACEHOLDER_TEXT","isNative","MOBILE_CONTROL_PROPS_RANGE_CONTROL","GalleryEdit","setAttributes","clientId","isSelected","insertBlocksAfter","linkTarget","hasOverlay","overlayColor","loaderActive","loaderType","__unstableMarkNextChangeAsNotPersistent","replaceInnerBlocks","updateBlockAttributes","selectBlock","clearSelectedBlock","createSuccessNotice","createErrorNotice","select","settings","getSettings","preferredStyleVariations","__experimentalPreferredStyleVariations","getBlock","preferredStyle","innerBlockImages","innerBlocks","wasBlockJustInserted","block","fromSavedContent","Boolean","originalContent","imageData","newImages","forEach","newImage","buildImageAttributes","imageSizeOptions","imageAttributes","newClassName","newLinkTarget","rel","raw","alt_text","isValidFileType","file","mediaType","indexOf","updateImages","selectedImages","newFileUploads","Object","prototype","toString","call","imageArray","Array","from","every","processedImages","filter","newOrderMap","reduce","result","existingImageBlocks","newImageList","existingImg","newBlocks","concat","sort","a","b","onUploadError","message","setLinkTo","changedAttributes","blocks","push","linkToText","linkType","setColumnsNumber","toggleImageCrop","getImageCropHelp","checked","toggleOpenInNewTab","openInNewTab","noticeText","toggleOverlay","overlay","updateImagesSize","newSizeSlug","imageSize","size","setWatermark","watermark","setOverlayColor","setGroupName","groupName","toggleLoader","window","wp","media","view","defaultProps","hasImages","hasImageIds","imagesUploading","mediaPlaceholderProps","web","addToGallery","disableMediaButtons","native","isAppender","autoOpenMediaUpload","mediaPlaceholder","title","instructions","blockProps","hasLinkTo","isWeb","imagePreviewSize","options","imagePreviewFormat","columnsMobile","imageHeight","imageBorderRadius","imagePadding","animationOnScrollEffect","galleryId","style","spacing","blockGap","useInnerBlocksProps","__experimentalGetElementClassName","VisuallyHidden","getDefaultBlockName","allowedBlocks","orientation","renderAppender","__experimentalLayout","alignments","children","innerBlocksProps","RichTextVisibilityHelper","isHidden","placeholder","tagName","captionRef","richTextProps","BlockList","__experimentalGetGapCSSValue","getGapCSSValue","useContext","createPortal","styleElement","__unstableElementContext","fallbackValue","gapValue","column","row","top","left","gap","GapStyle","MIN_SIZE","LINK_DESTINATION_CUSTOM","NEW_TAB_REL","MEDIA_ID_NO_FEATURED_IMAGE_SET","get","removeNewTabRel","currentRel","newRel","relVal","regExp","RegExp","replace","trim","updatedRel","width","height","saveWithoutInnerBlocks","saveWithInnerBlocks","BlockIcon","gallery","icon","pick","imageCount","imageProps","getGalleryBlockV2Enabled","galleryBlockV2Enabled","addFilter","parseShortcodeIds","split","updateThirdPartyTransformToGallery","name","updateThirdPartyTransformFromGallery","toBlock","fromBlocks","isArray","galleryBlock","transformedBlock","includes","transforms","isMultiBlock","transform","validImages","tag","shortcode","named","imageIds","imageId","isMatch","priority","files","to","linkClass","imageSizeSlug","coreStore","EMPTY_IMAGE_MEDIA","imageBlock","getMediaItems","include","join","per_page","orderby","useState","currentImages","setCurrentImages","getNewImages","imagesUpdated","newCurrentImages","currentImg","currentImage","fromSavedConent","getImageSizing","imageSizes","resizedImages","currentResizedImages","sizes","currentSizes","defaultUrl","slug","mediaDetailsUrl","IMAGE_LINK_DESTINATION_ATTACHMENT","IMAGE_LINK_DESTINATION_MEDIA","IMAGE_LINK_DESTINATION_NONE","galleryDestination","imageDestination","registerBlockType","initBlock","metadata","getBlobByURL","isBlobURL","revokeBlobURL","noticeUI","noticeOperations","onFocus","selectedImage","setSelectedImage","attachmentCaptions","setAttachmentCaptions","mediaUpload","getMedia","onFocusGalleryCaption","newAttrs","Error","onSelectImage","onDeselectImage","onMove","oldIndex","newIndex","splice","onMoveForward","onMoveBackward","onRemoveImage","i","selectCaption","newImageId","currentImageCaption","attachment","onSelectImages","removeAllNotices","setImageAttributes","newAttributes","slice","getImagesSizeOptions","updatedImages","OS","filesList","onFileChange","allowedTypes","shouldShowSizeOptions","isNarrow","Component","Button","ButtonGroup","BACKSPACE","DELETE","withSelect","withDispatch","closeSmall","chevronLeft","chevronRight","edit","imageIcon","isTemporaryImage","GalleryImage","arguments","bind","bindContainer","onEdit","onSelectImageFromLibrary","onSelectCustomURL","state","isEditing","ref","container","onSelect","event","ownerDocument","activeElement","keyCode","preventDefault","onRemove","setState","onDeselect","mediaAttributes","omittedAlt","restMediaAttributes","omittedCaption","newURL","isFirstItem","isLastItem","ariaLabel","src","newCaption","ownProps","dispatch","onSetImageAttributes","attrs","saveV1","SVG","Path","deprecated","example"],"sourceRoot":""}