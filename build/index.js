!function(){var e,t={805:function(e,t,r){"use strict";var n=window.wp.element,a=window.wp.primitives;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=window.wp.blocks;function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var c=window.wp.compose,u=window.wp.components;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}var m=r(184),d=r.n(m),p=window.lodash,g=window.wp.blockEditor,f=window.wp.i18n,b=window.wp.data,y=window.wp.viewport,v=window.wp.blob,h=window.wp.notices,k=(0,n.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(a.Path,{d:"M20.2 8v11c0 .7-.6 1.2-1.2 1.2H6v1.5h13c1.5 0 2.7-1.2 2.7-2.8V8h-1.5zM18 16.4V4.6c0-.9-.7-1.6-1.6-1.6H4.6C3.7 3 3 3.7 3 4.6v11.8c0 .9.7 1.6 1.6 1.6h11.8c.9 0 1.6-.7 1.6-1.6zM4.5 4.6c0-.1.1-.1.1-.1h11.8c.1 0 .1.1.1.1V12l-2.3-1.7c-.3-.2-.6-.2-.9 0l-2.9 2.1L8 11.3c-.2-.1-.5-.1-.7 0l-2.9 1.5V4.6zm0 11.8v-1.8l3.2-1.7 2.4 1.2c.2.1.5.1.8-.1l2.8-2 2.8 2v2.5c0 .1-.1.1-.1.1H4.6c0-.1-.1-.2-.1-.2z"})),w=(0,n.createElement)(g.BlockIcon,{icon:k}),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"large",r=(0,p.pick)(e,["alt","id","link"]);r.url=(0,p.get)(e,["sizes",t,"url"])||(0,p.get)(e,["media_details","sizes",t,"source_url"])||e.url||e.source_url;var n=(0,p.get)(e,["sizes","full","url"])||(0,p.get)(e,["media_details","sizes","full","source_url"]);return n&&(r.fullUrl=n),r},E="none",S="media",O="attachment",C="lightbox",P=["noreferrer","noopener"];function x(e,t,r){switch(r||t){case"file":case S:return{href:(null==e?void 0:e.source_url)||(null==e?void 0:e.url),linkDestination:"media"};case"post":case O:return{href:null==e?void 0:e.link,linkDestination:"attachment"};case E:return{href:void 0,linkDestination:"none"}}return{}}function B(e,t){var r,n,a,i=t.rel,l=e?"_blank":void 0;return l||i?(a=n=i,void 0===n||(0,p.isEmpty)(a)||(0,p.isEmpty)(a)||(P.forEach((function(e){var t=new RegExp("\\b"+e+"\\b","gi");a=a.replace(t,"")})),a!==n&&(a=a.trim()),(0,p.isEmpty)(a)&&(a=void 0)),r=a):r=void 0,{linkTarget:l,rel:r}}function N(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var T=["children"],I=["isHidden","className","value","placeholder","tagName","captionRef"],j=["core/image"];function R(e){var t=e.isHidden,r=e.className,a=e.value,i=e.placeholder,l=e.tagName,o=e.captionRef,c=N(e,I);return t?(0,n.createElement)(u.VisuallyHidden,s({as:g.RichText},c)):(0,n.createElement)(g.RichText,s({ref:o,value:a,placeholder:i,className:r,tagName:l},c))}var z=function(e){var t,r=e.attributes,o=e.isSelected,c=e.setAttributes,u=e.mediaPlaceholder,m=e.insertBlocksAfter,p=e.blockProps,b=r.align,y=r.columns,v=r.caption,h=r.imageCrop,k=(0,g.useInnerBlocksProps)(p,{allowedBlocks:j,orientation:"horizontal",renderAppender:!1,__experimentalLayout:{type:"default",alignments:[]}}),w=k.children,_=N(k,T);return(0,n.createElement)("figure",s({},_,{className:d()(p.className,"blocks-gallery-grid",(t={},i(t,"align".concat(b),b),i(t,"columns-".concat(y),void 0!==y),i(t,"columns-default",void 0===y),i(t,"is-cropped",h),t))}),w,o&&!w&&(0,n.createElement)(a.View,{className:"blocks-gallery-media-placeholder-wrapper"},u),(0,n.createElement)(R,{isHidden:!o&&g.RichText.isEmpty(v),tagName:"figcaption",className:d()("blocks-gallery-caption"),"aria-label":(0,f.__)("Gallery caption text"),placeholder:(0,f.__)("Write gallery captionâ€¦"),value:v,onChange:function(e){return c({caption:e})},inlineToolbar:!0,__unstableOnSplitAtEnd:function(){return m((0,l.createBlock)((0,l.getDefaultBlockName)()))}}))};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function U(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],_n=!0,l=!1;try{for(r=r.call(e);!(_n=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);_n=!0);}catch(e){l=!0,a=e}finally{try{_n||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=window.wp.coreData,F=[];function H(e){var t,r=e.blockGap,a=e.clientId,i=(0,n.useContext)(g.BlockList.__unstableElementContext),l="var( --wp--style--gallery-gap-default, var( --gallery-block--gutter-size, var( --wp--style--block-gap, 0.5em ) ) )",o=l,c=l;r&&(o=(t="string"==typeof r?(0,g.__experimentalGetGapCSSValue)(r):(0,g.__experimentalGetGapCSSValue)(null==r?void 0:r.top)||l)===(c="string"==typeof r?(0,g.__experimentalGetGapCSSValue)(r):(0,g.__experimentalGetGapCSSValue)(null==r?void 0:r.left)||l)?t:"".concat(t," ").concat(c));var u="#block-".concat(a," {\n\t\t--wp--style--unstable-gallery-gap: ").concat("0"===c?"0px":c,";\n\t\tgap: ").concat(o,"\n\t}");return u&&i?(0,n.createPortal)((0,n.createElement)((function(){return(0,n.createElement)("style",null,u)}),null),i):null}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=[{value:O,label:(0,f.__)("Attachment Page")},{value:S,label:(0,f.__)("Media File")},{value:E,label:(0,f._x)("None","Media item link option")},{value:C,label:(0,f._x)("Lightbox")}],$=["image"],K=n.Platform.isNative?(0,f.__)("ADD MEDIA"):(0,f.__)("Drag images, upload new ones or select files from your library."),Z=n.Platform.isNative?{type:"stepper"}:{},Y=function(e){var t,r,o=e.setAttributes,c=e.attributes,m=e.className,y=e.clientId,k=e.isSelected,E=e.insertBlocksAfter,S=c.columns,O=c.imageCrop,P=c.linkTarget,N=c.linkTo,T=c.sizeSlug,I=c.hasOverlay,j=c.overlayColor,R=(c.groupName,c.loaderActive),M=c.loaderType,D=(0,b.useDispatch)(g.store),L=D.__unstableMarkNextChangeAsNotPersistent,q=D.replaceInnerBlocks,Y=D.updateBlockAttributes,Q=D.selectBlock,X=D.clearSelectedBlock,ee=(0,b.useDispatch)(h.store),te=ee.createSuccessNotice,re=ee.createErrorNotice,ne=(0,b.useSelect)((function(e){var t,r=e(g.store).getSettings().__experimentalPreferredStyleVariations;return{getBlock:e(g.store).getBlock,getSettings:e(g.store).getSettings,preferredStyle:null==r||null===(t=r.value)||void 0===t?void 0:t["core/image"]}}),[]),ae=ne.getBlock,ie=ne.getSettings,le=ne.preferredStyle,oe=(0,b.useSelect)((function(e){var t;return null===(t=e(g.store).getBlock(y))||void 0===t?void 0:t.innerBlocks}),[y]),ce=(0,b.useSelect)((function(e){return e(g.store).wasBlockJustInserted(y,"inserter_menu")}),[y]),ue=(0,n.useMemo)((function(){return null==oe?void 0:oe.map((function(e){return{clientId:e.clientId,id:e.attributes.id,url:e.attributes.url,attributes:e.attributes,fromSavedContent:Boolean(e.originalContent)}}))}),[oe]),se=function(e){return(0,b.useSelect)((function(t){var r,n=e.map((function(e){return e.attributes.id})).filter((function(e){return void 0!==e}));return 0===n.length?F:null!==(r=t(V.store).getMediaItems({include:n.join(","),per_page:n.length,orderby:"include"}))&&void 0!==r?r:F}),[e])}(oe),me=function(e,t){var r=G((0,n.useState)([]),2),a=r[0],i=r[1];return(0,n.useMemo)((function(){return function(){var r=!1,n=a.filter((function(t){return e.find((function(e){return t.clientId===e.clientId}))}));n.length<a.length&&(r=!0),e.forEach((function(e){e.fromSavedContent&&!n.find((function(t){return t.id===e.id}))&&(r=!0,n.push(e))}));var l=e.filter((function(e){return!n.find((function(t){return e.clientId&&t.clientId===e.clientId}))&&(null==t?void 0:t.find((function(t){return t.id===e.id})))&&!e.fromSavedConent}));return(r||(null==l?void 0:l.length)>0)&&i([].concat(U(n),U(l))),l.length>0?l:null}()}),[e,t])}(ue,se);(0,n.useEffect)((function(){null==me||me.forEach((function(e){var t,r,n,a,i;L(),Y(e.clientId,J(J({},(t=e.attributes,i=t.id?(0,p.find)(se,{id:t.id}):null,n=t.className&&""!==t.className?t.className:le?"is-style-".concat(le):void 0,a=t.linkTarget||t.rel?{linkTarget:t.linkTarget,rel:t.rel}:B(P,c),J(J(J(J({},_(i,T)),x(i,N,null==t?void 0:t.linkDestination)),a),{},{className:n,sizeSlug:T,caption:t.caption||(null===(r=i.caption)||void 0===r?void 0:r.raw),alt:t.alt||i.alt_text}))),{},{id:e.id,align:void 0}))})),(null==me?void 0:me.length)>0&&X()}),[me]);var de=function(e,t,r){return(0,n.useMemo)((function(){return function(){if(e&&0!==e.length){var n=r().imageSizes,a={};return t&&(a=e.reduce((function(e,t){if(!t.id)return e;var r=n.reduce((function(e,r){var n=(0,p.get)(t,["sizes",r.slug,"url"]),a=(0,p.get)(t,["media_details","sizes",r.slug,"source_url"]);return A(A({},e),{},i({},r.slug,n||a))}),{});return A(A({},e),{},i({},parseInt(t.id,10),r))}),{})),n.filter((function(e){var t=e.slug;return(0,p.some)(a,(function(e){return e[t]}))})).map((function(e){var t=e.name;return{value:e.slug,label:t}}))}}()}),[e,t])}(se,k,ie);function pe(e){var t;return $.some((function(t){var r;return 0===(null===(r=e.type)||void 0===r?void 0:r.indexOf(t))}))||0===(null===(t=e.url)||void 0===t?void 0:t.indexOf("blob:"))}function ge(e){var t="[object FileList]"===Object.prototype.toString.call(e),r=t?Array.from(e).map((function(e){return e.url?e:_({url:(0,v.createBlobURL)(e)})})):e;r.every(pe)||re((0,f.__)("If uploading to a gallery all files need to be image formats"),{id:"gallery-upload-invalid-file",type:"snackbar"});var n=r.filter((function(e){return e.url||pe(e)})).map((function(e){return e.url?e:_({url:(0,v.createBlobURL)(e)})})),a=n.reduce((function(e,t,r){return e[t.id]=r,e}),{}),i=t?oe:oe.filter((function(e){return n.find((function(t){return t.id===e.attributes.id}))})),o=n.filter((function(e){return!i.find((function(t){return e.id===t.attributes.id}))})).map((function(e){return(0,l.createBlock)("core/image",{id:e.id,url:e.url,caption:e.caption,alt:e.alt})}));(null==o?void 0:o.length)>0&&Q(o[0].clientId),q(y,i.concat(o).sort((function(e,t){return a[e.attributes.id]-a[t.attributes.id]})))}(0,n.useEffect)((function(){var e,t,r,n,a,i;N||(L(),o({linkTo:(null===(e=window)||void 0===e||null===(t=e.wp)||void 0===t||null===(r=t.media)||void 0===r||null===(n=r.view)||void 0===n||null===(a=n.settings)||void 0===a||null===(i=a.defaultProps)||void 0===i?void 0:i.link)||C}))}),[N]);var fe=!!ue.length,be=fe&&ue.some((function(e){return!!e.id})),ye=ue.some((function(e){var t,r;return n.Platform.isNative?0===(null===(r=e.url)||void 0===r?void 0:r.indexOf("file:")):!e.id&&0===(null===(t=e.url)||void 0===t?void 0:t.indexOf("blob:"))})),ve=n.Platform.select({web:{addToGallery:!1,disableMediaButtons:ye,value:{}},native:{addToGallery:be,isAppender:fe,disableMediaButtons:fe&&!k||ye,value:be?ue:{},autoOpenMediaUpload:!fe&&k&&ce}}),he=(0,n.createElement)(g.MediaPlaceholder,s({handleUpload:!1,icon:w,labels:{title:(0,f.__)("Gallery"),instructions:K},onSelect:ge,accept:"image/*",allowedTypes:$,multiple:!0,onError:function(e){re(e,{type:"snackbar"})}},ve)),ke=(0,g.useBlockProps)({className:d()(m,"has-nested-images")});if(!fe)return(0,n.createElement)(a.View,ke,he);var we,_e=N&&"none"!==N;return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g.InspectorControls,null,(0,n.createElement)(u.PanelBody,{title:(0,f.__)("Settings")},(0,n.createElement)(u.SelectControl,{label:(0,f.__)("Link to"),value:N,onChange:function(e){o({linkTo:e});var t={},r=[];ae(y).innerBlocks.forEach((function(n){r.push(n.clientId);var a=n.attributes.id?(0,p.find)(se,{id:n.attributes.id}):null;t[n.clientId]=x(a,e)})),Y(r,t,!0);var n=[].concat(W).find((function(t){return t.value===e}));te((0,f.sprintf)(
/* translators: %s: image size settings */
(0,f.__)("All gallery image links updated to: %s"),n.label),{id:"gallery-attributes-linkTo",type:"snackbar"})},options:W,hideCancelButton:!0}),_e&&(0,n.createElement)(u.ToggleControl,{label:(0,f.__)("Open in new tab"),checked:"_blank"===P,onChange:function(e){var t=e?"_blank":void 0;o({linkTarget:t});var r={},n=[];ae(y).innerBlocks.forEach((function(e){n.push(e.clientId),r[e.clientId]=B(t,e.attributes)})),Y(n,r,!0);var a=e?(0,f.__)("All gallery images updated to open in new tab"):(0,f.__)("All gallery images updated to not open in new tab");te(a,{id:"gallery-attributes-openInNewTab",type:"snackbar"})}}),"lightbox"===N&&(0,n.createElement)(u.TextControl,{label:(0,f.__)("Group name","growtype-gallery"),help:(0,f.__)("Images are related by group name.","growtype-gallery"),onChange:function(e){o({groupName:e})},value:c.groupName}),(null==de?void 0:de.length)>0&&(0,n.createElement)(u.SelectControl,{label:(0,f.__)("Image size"),value:T,options:de,onChange:function(e){o({sizeSlug:e});var t={},r=[];ae(y).innerBlocks.forEach((function(n){r.push(n.clientId);var a=n.attributes.id?(0,p.find)(se,{id:n.attributes.id}):null;t[n.clientId]=function(e,t){var r=(0,p.get)(e,["media_details","sizes",t,"source_url"]);return r?{url:r,width:void 0,height:void 0,sizeSlug:t}:{}}(a,e)})),Y(r,t,!0);var n=de.find((function(t){return t.value===e}));te((0,f.sprintf)(
/* translators: %s: image size settings */
(0,f.__)("All gallery image sizes updated to: %s"),n.label),{id:"gallery-attributes-sizeSlug",type:"snackbar"})},hideCancelButton:!0}),n.Platform.isWeb&&!de&&be&&(0,n.createElement)(u.BaseControl,{className:"gallery-image-sizes"},(0,n.createElement)(u.BaseControl.VisualLabel,null,(0,f.__)("Image size")),(0,n.createElement)(a.View,{className:"gallery-image-sizes__loading"},(0,n.createElement)(u.Spinner,null),(0,f.__)("Loading optionsâ€¦"))),(0,n.createElement)(u.TextControl,{label:(0,f.__)("Watermark","growtype-gallery"),help:(0,f.__)("Visible on every image.","growtype-gallery"),onChange:function(e){o({watermark:e})},value:c.watermark})),(0,n.createElement)(u.PanelBody,{title:(0,f.__)("Preview","growtype-gallery")},ue.length>1&&(0,n.createElement)(u.RangeControl,s({label:(0,f.__)("Columns"),value:S||(we=ue.length,we?Math.min(3,we):3),onChange:function(e){o({columns:e})},min:1,max:Math.min(8,ue.length)},Z,{required:!0})),(0,n.createElement)(u.TextControl,{label:(0,f.__)("Image height","growtype-gallery"),onChange:function(e){return o({imageHeight:e})},value:c.imageHeight}),(0,n.createElement)(u.TextControl,{label:(0,f.__)("Image border radius","growtype-gallery"),onChange:function(e){return o({imageBorderRadius:e})},value:c.imageBorderRadius}),(0,n.createElement)(u.ToggleControl,{label:(0,f.__)("Crop images"),checked:!O,onChange:function(){o({imageCrop:!O})},help:function(e){return e?(0,f.__)("Thumbnails are cropped to align."):(0,f.__)("Thumbnails are not cropped.")}}),(0,n.createElement)(u.ToggleControl,{label:(0,f.__)("Has overlay"),checked:I,onChange:function(e){o({hasOverlay:e})}}),I&&(0,n.createElement)(u.ColorPicker,{label:(0,f.__)("Overlay color"),color:j,onChange:function(e){o({overlayColor:e})},enableAlpha:"true",defaultValue:"",copyFormat:"rgb"})),(0,n.createElement)(u.PanelBody,{title:(0,f.__)("Loading","growtype-gallery")},(0,n.createElement)(u.ToggleControl,{label:(0,f.__)("Loader active"),checked:R,onChange:function(e){o({loaderActive:e})}}),(0,n.createElement)(u.SelectControl,{label:(0,f.__)("Loader type"),value:M,options:[{value:"basic",label:(0,f.__)("Basic")},{value:"story",label:(0,f.__)("Story")}],onChange:function(e){return o({loaderType:e})},hideCancelButton:!0}))),(0,n.createElement)(g.InspectorAdvancedControls,null,(0,n.createElement)(u.TextControl,{label:(0,f.__)("Gallery ID","growtype-gallery"),value:c.galleryId,onChange:function(e){return o({galleryId:e})}})),(0,n.createElement)(g.BlockControls,{group:"other"},(0,n.createElement)(g.MediaReplaceFlow,{allowedTypes:$,accept:"image/*",handleUpload:!1,onSelect:ge,name:(0,f.__)("Add"),multiple:!0,mediaIds:ue.filter((function(e){return e.id})).map((function(e){return e.id})),addToGallery:be})),n.Platform.isWeb&&(0,n.createElement)(H,{blockGap:null===(t=c.style)||void 0===t||null===(r=t.spacing)||void 0===r?void 0:r.blockGap,clientId:y}),(0,n.createElement)(z,s({},e,{images:ue,mediaPlaceholder:!fe||n.Platform.isNative?he:void 0,blockProps:ke,insertBlocksAfter:E})))},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"large",r=(0,p.pick)(e,["alt","id","link","caption"]);r.url=(0,p.get)(e,["sizes",t,"url"])||(0,p.get)(e,["media_details","sizes",t,"source_url"])||e.url;var n=(0,p.get)(e,["sizes","full","url"])||(0,p.get)(e,["media_details","sizes","full","source_url"]);return n&&(r.fullUrl=n),r},X=["images","ids"];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re="file",ne="post";function ae(e){var t;return Math.min(3,null==e||null===(t=e.images)||void 0===t?void 0:t.length)}function ie(e){var t=e.linkTo?e.linkTo:"none";"post"===t?t="attachment":"file"===t&&(t="media");var r=e.images.map((function(r){return function(e,t,r){return(0,l.createBlock)("core/image",te(te({},e.id&&{id:parseInt(e.id)}),{},{url:e.url,alt:e.alt,caption:e.caption,sizeSlug:t},function(e,t){switch(t){case re:return{href:(null==e?void 0:e.source_url)||(null==e?void 0:e.url),linkDestination:S};case ne:return{href:null==e?void 0:e.link,linkDestination:O};case S:return{href:(null==e?void 0:e.source_url)||(null==e?void 0:e.url),linkDestination:S};case O:return{href:null==e?void 0:e.link,linkDestination:O};case E:return{href:void 0,linkDestination:E}}return{}}(e,r)))}(r,e.sizeSlug,t)}));return e.images,e.ids,[te(te({},N(e,X)),{},{linkTo:t,allowResize:!1}),r]}var le=[{attributes:{images:{type:"array",default:[],source:"query",selector:".blocks-gallery-item",query:{url:{type:"string",source:"attribute",selector:"img",attribute:"src"},fullUrl:{type:"string",source:"attribute",selector:"img",attribute:"data-full-url"},link:{type:"string",source:"attribute",selector:"img",attribute:"data-link"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},id:{type:"string",source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:".blocks-gallery-item__caption"}}},ids:{type:"array",items:{type:"number"},default:[]},columns:{type:"number",minimum:1,maximum:8},caption:{type:"string",source:"html",selector:".blocks-gallery-caption"},imageCrop:{type:"boolean",default:!0},fixedHeight:{type:"boolean",default:!0},linkTo:{type:"string"},sizeSlug:{type:"string",default:"large"}},supports:{anchor:!0,align:!0},save:function(e){var t=e.attributes,r=t.images,a=t.columns,i=void 0===a?ae(t):a,l=t.imageCrop,o=t.caption,c=t.linkTo,u="columns-".concat(i," ").concat(l?"is-cropped":"");return(0,n.createElement)("figure",g.useBlockProps.save({className:u}),(0,n.createElement)("ul",{className:"blocks-gallery-grid"},r.map((function(e){var t;switch(c){case re:t=e.fullUrl||e.url;break;case ne:t=e.link}var r=(0,n.createElement)("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-full-url":e.fullUrl,"data-link":e.link,className:e.id?"wp-image-".concat(e.id):null});return(0,n.createElement)("li",{key:e.id||e.url,className:"blocks-gallery-item"},(0,n.createElement)("figure",null,t?(0,n.createElement)("a",{href:t},r):r,!g.RichText.isEmpty(e.caption)&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-item__caption",value:e.caption})))}))),!g.RichText.isEmpty(o)&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-caption",value:o}))},migrate:function(e){return ie(e)}},{attributes:{images:{type:"array",default:[],source:"query",selector:".blocks-gallery-item",query:{url:{type:"string",source:"attribute",selector:"img",attribute:"src"},fullUrl:{type:"string",source:"attribute",selector:"img",attribute:"data-full-url"},link:{type:"string",source:"attribute",selector:"img",attribute:"data-link"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},id:{type:"string",source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:".blocks-gallery-item__caption"}}},ids:{type:"array",items:{type:"number"},default:[]},columns:{type:"number",minimum:1,maximum:8},caption:{type:"string",source:"html",selector:".blocks-gallery-caption"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"},sizeSlug:{type:"string",default:"large"}},supports:{align:!0},isEligible:function(e){var t=e.linkTo;return!t||"attachment"===t||"media"===t},migrate:function(e){return ie(e)},save:function(e){var t=e.attributes,r=t.images,a=t.columns,i=void 0===a?ae(t):a,l=t.imageCrop,o=t.caption,c=t.linkTo;return(0,n.createElement)("figure",{className:"columns-".concat(i," ").concat(l?"is-cropped":"")},(0,n.createElement)("ul",{className:"blocks-gallery-grid"},r.map((function(e){var t;switch(c){case"media":t=e.fullUrl||e.url;break;case"attachment":t=e.link}var r=(0,n.createElement)("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-full-url":e.fullUrl,"data-link":e.link,className:e.id?"wp-image-".concat(e.id):null});return(0,n.createElement)("li",{key:e.id||e.url,className:"blocks-gallery-item"},(0,n.createElement)("figure",null,t?(0,n.createElement)("a",{href:t},r):r,!g.RichText.isEmpty(e.caption)&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-item__caption",value:e.caption})))}))),!g.RichText.isEmpty(o)&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-caption",value:o}))}},{attributes:{images:{type:"array",default:[],source:"query",selector:".blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},fullUrl:{source:"attribute",selector:"img",attribute:"data-full-url"},link:{source:"attribute",selector:"img",attribute:"data-link"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:".blocks-gallery-item__caption"}}},ids:{type:"array",default:[]},columns:{type:"number"},caption:{type:"string",source:"html",selector:".blocks-gallery-caption"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"}},supports:{align:!0},isEligible:function(e){var t=e.ids;return t&&t.some((function(e){return"string"==typeof e}))},migrate:function(e){return ie(e)},save:function(e){var t=e.attributes,r=t.images,a=t.columns,i=void 0===a?ae(t):a,l=t.imageCrop,o=t.caption,c=t.linkTo;return(0,n.createElement)("figure",{className:"columns-".concat(i," ").concat(l?"is-cropped":"")},(0,n.createElement)("ul",{className:"blocks-gallery-grid"},r.map((function(e){var t;switch(c){case"media":t=e.fullUrl||e.url;break;case"attachment":t=e.link}var r=(0,n.createElement)("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-full-url":e.fullUrl,"data-link":e.link,className:e.id?"wp-image-".concat(e.id):null});return(0,n.createElement)("li",{key:e.id||e.url,className:"blocks-gallery-item"},(0,n.createElement)("figure",null,t?(0,n.createElement)("a",{href:t},r):r,!g.RichText.isEmpty(e.caption)&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-item__caption",value:e.caption})))}))),!g.RichText.isEmpty(o)&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-caption",value:o}))}},{attributes:{images:{type:"array",default:[],source:"query",selector:"ul.wp-block-gallery .blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},fullUrl:{source:"attribute",selector:"img",attribute:"data-full-url"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},link:{source:"attribute",selector:"img",attribute:"data-link"},caption:{type:"string",source:"html",selector:"figcaption"}}},ids:{type:"array",default:[]},columns:{type:"number"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"}},supports:{align:!0},save:function(e){var t=e.attributes,r=t.images,a=t.columns,i=void 0===a?ae(t):a,l=t.imageCrop,o=t.linkTo;return(0,n.createElement)("ul",{className:"columns-".concat(i," ").concat(l?"is-cropped":"")},r.map((function(e){var t;switch(o){case"media":t=e.fullUrl||e.url;break;case"attachment":t=e.link}var r=(0,n.createElement)("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-full-url":e.fullUrl,"data-link":e.link,className:e.id?"wp-image-".concat(e.id):null});return(0,n.createElement)("li",{key:e.id||e.url,className:"blocks-gallery-item"},(0,n.createElement)("figure",null,t?(0,n.createElement)("a",{href:t},r):r,e.caption&&e.caption.length>0&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",value:e.caption})))})))},migrate:function(e){return ie(e)}},{attributes:{images:{type:"array",default:[],source:"query",selector:"ul.wp-block-gallery .blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},link:{source:"attribute",selector:"img",attribute:"data-link"},caption:{type:"string",source:"html",selector:"figcaption"}}},columns:{type:"number"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"}},isEligible:function(e){var t=e.images,r=e.ids;return t&&t.length>0&&(!r&&t||r&&t&&r.length!==t.length||(0,p.some)(t,(function(e,t){return!e&&null!==r[t]||parseInt(e,10)!==r[t]})))},migrate:function(e){return ie(e)},supports:{align:!0},save:function(e){var t=e.attributes,r=t.images,a=t.columns,i=void 0===a?ae(t):a,l=t.imageCrop,o=t.linkTo;return(0,n.createElement)("ul",{className:"columns-".concat(i," ").concat(l?"is-cropped":"")},r.map((function(e){var t;switch(o){case"media":t=e.url;break;case"attachment":t=e.link}var r=(0,n.createElement)("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-link":e.link,className:e.id?"wp-image-".concat(e.id):null});return(0,n.createElement)("li",{key:e.id||e.url,className:"blocks-gallery-item"},(0,n.createElement)("figure",null,t?(0,n.createElement)("a",{href:t},r):r,e.caption&&e.caption.length>0&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",value:e.caption})))})))}},{attributes:{images:{type:"array",default:[],source:"query",selector:"div.wp-block-gallery figure.blocks-gallery-image img",query:{url:{source:"attribute",attribute:"src"},alt:{source:"attribute",attribute:"alt",default:""},id:{source:"attribute",attribute:"data-id"}}},columns:{type:"number"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"},align:{type:"string",default:"none"}},supports:{align:!0},save:function(e){var t=e.attributes,r=t.images,a=t.columns,i=void 0===a?ae(t):a,l=t.align,o=t.imageCrop,c=t.linkTo,u=d()("columns-".concat(i),{alignnone:"none"===l,"is-cropped":o});return(0,n.createElement)("div",{className:u},r.map((function(e){var t;switch(c){case"media":t=e.url;break;case"attachment":t=e.link}var r=(0,n.createElement)("img",{src:e.url,alt:e.alt,"data-id":e.id});return(0,n.createElement)("figure",{key:e.id||e.url,className:"blocks-gallery-image"},t?(0,n.createElement)("a",{href:t},r):r)})))},migrate:function(e){return ie(e)}}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function de(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var ge=window.wp.keycodes,fe=(0,n.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(a.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})),be=(0,n.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(a.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),ye=(0,n.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(a.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})),ve=(0,n.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(a.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),he=(0,n.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(a.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),ke="none",we="file",_e="post",Ee=["alt"],Se=["caption"];var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(o,e);var t,r,a,i,l=(a=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pe(a);if(i){var r=pe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return de(this,e)});function o(){var e;return oe(this,o),(e=l.apply(this,arguments)).onSelectImage=e.onSelectImage.bind(ue(e)),e.onRemoveImage=e.onRemoveImage.bind(ue(e)),e.bindContainer=e.bindContainer.bind(ue(e)),e.onEdit=e.onEdit.bind(ue(e)),e.onSelectImageFromLibrary=e.onSelectImageFromLibrary.bind(ue(e)),e.onSelectCustomURL=e.onSelectCustomURL.bind(ue(e)),e.state={isEditing:!1},e}return t=o,(r=[{key:"bindContainer",value:function(e){this.container=e}},{key:"onSelectImage",value:function(){this.props.isSelected||this.props.onSelect()}},{key:"onRemoveImage",value:function(e){this.container===this.container.ownerDocument.activeElement&&this.props.isSelected&&-1!==[ge.BACKSPACE,ge.DELETE].indexOf(e.keyCode)&&(e.preventDefault(),this.props.onRemove())}},{key:"onEdit",value:function(){this.setState({isEditing:!0})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.image,r=e.url,n=e.__unstableMarkNextChangeAsNotPersistent;t&&!r&&(n(),this.props.setAttributes({url:t.source_url,alt:t.alt_text}))}},{key:"deselectOnBlur",value:function(){this.props.onDeselect()}},{key:"onSelectImageFromLibrary",value:function(e){var t=this.props,r=t.setAttributes,n=t.id,a=t.url,i=t.alt,l=t.caption,o=t.sizeSlug;if(e&&e.url){var c=Q(e,o);if(function(e,t){return!e&&(0,v.isBlobURL)(t)}(n,a)&&i){var u=c;u.alt,c=N(u,Ee)}if(l&&!(0,p.get)(c,["caption"])){var s=c;s.caption,c=N(s,Se)}r(c),this.setState({isEditing:!1})}}},{key:"onSelectCustomURL",value:function(e){var t=this.props,r=t.setAttributes;e!==t.url&&(r({url:e,id:void 0}),this.setState({isEditing:!1}))}},{key:"render",value:function(){var e,t=this.props,r=t.url,a=t.alt,i=t.id,l=t.linkTo,o=t.link,c=t.isFirstItem,s=t.isLastItem,m=t.isSelected,p=t.caption,b=t.onRemove,y=t.onMoveForward,h=t.onMoveBackward,k=t.setAttributes,w=t["aria-label"],_=this.state.isEditing;switch(l){case we:e=r;break;case _e:e=o}var E=(0,n.createElement)(n.Fragment,null,(0,n.createElement)("img",{src:r,alt:a,"data-id":i,onKeyDown:this.onRemoveImage,tabIndex:"0","aria-label":w,ref:this.bindContainer}),(0,v.isBlobURL)(r)&&(0,n.createElement)(u.Spinner,null)),S=d()({"is-selected":m,"is-transient":(0,v.isBlobURL)(r)});return(0,n.createElement)("figure",{className:S,onClick:this.onSelectImage,onFocus:this.onSelectImage},!_&&(e?(0,n.createElement)("a",{href:e},E):E),_&&(0,n.createElement)(g.MediaPlaceholder,{labels:{title:(0,f.__)("Edit gallery image")},icon:fe,onSelect:this.onSelectImageFromLibrary,onSelectURL:this.onSelectCustomURL,accept:"image/*",allowedTypes:["image"],value:{id:i,src:r}}),(0,n.createElement)(u.ButtonGroup,{className:"block-library-gallery-item__inline-menu is-left"},(0,n.createElement)(u.Button,{icon:be,onClick:c?void 0:h,label:(0,f.__)("Move image backward"),"aria-disabled":c,disabled:!m}),(0,n.createElement)(u.Button,{icon:ye,onClick:s?void 0:y,label:(0,f.__)("Move image forward"),"aria-disabled":s,disabled:!m})),(0,n.createElement)(u.ButtonGroup,{className:"block-library-gallery-item__inline-menu is-right"},(0,n.createElement)(u.Button,{icon:ve,onClick:this.onEdit,label:(0,f.__)("Replace image"),disabled:!m}),(0,n.createElement)(u.Button,{icon:he,onClick:b,label:(0,f.__)("Remove image"),disabled:!m})),!_&&(m||p)&&(0,n.createElement)(g.RichText,{tagName:"figcaption",className:(0,g.__experimentalGetElementClassName)("caption"),"aria-label":(0,f.__)("Image caption text"),placeholder:m?(0,f.__)("Add caption"):null,value:p,onChange:function(e){return k({caption:e})},inlineToolbar:!0}))}}])&&ce(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(n.Component),Ce=(0,c.compose)([(0,b.withSelect)((function(e,t){var r=e(V.store).getMedia,n=t.id;return{image:n?r(parseInt(n,10)):null}})),(0,b.withDispatch)((function(e){return{__unstableMarkNextChangeAsNotPersistent:e(g.store).__unstableMarkNextChangeAsNotPersistent}}))])(Oe),Pe=["isHidden"];function xe(e){var t=e.isHidden,r=N(e,Pe);return t?(0,n.createElement)(u.VisuallyHidden,s({as:g.RichText},r)):(0,n.createElement)(g.RichText,r)}var Be=function(e){var t,r=e.attributes,a=e.isSelected,o=e.setAttributes,c=e.selectedImage,u=e.mediaPlaceholder,m=e.onMoveBackward,p=e.onMoveForward,b=e.onRemoveImage,y=e.onSelectImage,v=e.onDeselectImage,h=e.onSetImageAttributes,k=e.insertBlocksAfter,w=e.blockProps,_=r.align,E=r.columns,S=void 0===E?ae(r):E,O=r.caption,C=r.imageCrop,P=r.images;return(0,n.createElement)("figure",s({},w,{className:d()(w.className,(t={},i(t,"align".concat(_),_),i(t,"columns-".concat(S),S),i(t,"is-cropped",C),t))}),(0,n.createElement)("ul",{className:"blocks-gallery-grid"},P.map((function(e,t){var i=(0,f.sprintf)(
/* translators: 1: the order number of the image. 2: the total number of images. */
(0,f.__)("image %1$d of %2$d in gallery"),t+1,P.length);return(0,n.createElement)("li",{className:"blocks-gallery-item",key:e.id?"".concat(e.id,"-").concat(t):e.url},(0,n.createElement)(Ce,{url:e.url,alt:e.alt,id:e.id,isFirstItem:0===t,isLastItem:t+1===P.length,isSelected:a&&c===t,onMoveBackward:m(t),onMoveForward:p(t),onRemove:b(t),onSelect:y(t),onDeselect:v(t),setAttributes:function(e){return h(t,e)},caption:e.caption,"aria-label":i,sizeSlug:r.sizeSlug}))}))),u,(0,n.createElement)(xe,{isHidden:!a&&g.RichText.isEmpty(O),tagName:"figcaption",className:d()("blocks-gallery-caption",(0,g.__experimentalGetElementClassName)("caption")),"aria-label":(0,f.__)("Gallery caption text"),placeholder:(0,f.__)("Write gallery captionâ€¦"),value:O,onChange:function(e){return o({caption:e})},inlineToolbar:!0,__unstableOnSplitAtEnd:function(){return k((0,l.createBlock)((0,l.getDefaultBlockName)()))}}))};function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ie=[{value:_e,label:(0,f.__)("Attachment Page")},{value:we,label:(0,f.__)("Media File")},{value:ke,label:(0,f.__)("None")}],je=["image"],Re=n.Platform.select({web:(0,f.__)("Drag images, upload new ones or select files from your library."),native:(0,f.__)("ADD MEDIA")}),ze=n.Platform.select({web:{},native:{type:"stepper"}});(0,c.compose)([u.withNotices,(0,y.withViewportMatch)({isNarrow:"< small"})])((function(e){var t=e.attributes,r=e.clientId,l=e.isSelected,o=e.noticeUI,c=e.noticeOperations,m=e.onFocus,d=t.columns,y=void 0===d?ae(t):d,h=t.imageCrop,k=t.images,_=t.linkTo,E=t.sizeSlug,S=G((0,n.useState)(),2),O=S[0],C=S[1],P=G((0,n.useState)(),2),x=P[0],B=P[1],N=(0,b.useDispatch)(g.store).__unstableMarkNextChangeAsNotPersistent,T=(0,b.useSelect)((function(e){var t=e(g.store).getSettings();return{imageSizes:t.imageSizes,mediaUpload:t.mediaUpload,getMedia:e(V.store).getMedia,wasBlockJustInserted:e(g.store).wasBlockJustInserted(r,"inserter_menu")}})),I=T.imageSizes,j=T.mediaUpload,R=T.getMedia,z=T.wasBlockJustInserted,M=(0,n.useMemo)((function(){return l?(0,p.reduce)(t.ids,(function(e,t){if(!t)return e;var r=R(t),n=(0,p.reduce)(I,(function(e,t){var n=(0,p.get)(r,["sizes",t.slug,"url"]),a=(0,p.get)(r,["media_details","sizes",t.slug,"source_url"]);return Te(Te({},e),{},i({},t.slug,n||a))}),{});return Te(Te({},e),{},i({},parseInt(t,10),n))}),{}):{}}),[l,t.ids,I]);function A(t){if(t.ids)throw new Error('The "ids" attribute should not be changed directly. It is managed automatically when "images" attribute changes');t.images&&(t=Te(Te({},t),{},{ids:(0,p.map)(t.images,(function(e){var t=e.id;return parseInt(t,10)}))})),e.setAttributes(t)}function D(e,t){var r=U(k);r.splice(t,1,k[e]),r.splice(e,1,k[t]),C(t),A({images:r})}function L(e){var t=e.id.toString(),r=(0,p.find)(k,{id:t}),n=r?r.caption:e.caption;if(!x)return n;var a=(0,p.find)(x,{id:t});return a&&a.caption!==e.caption?e.caption:n}function F(e){B(e.map((function(e){return{id:e.id.toString(),caption:e.caption}}))),A({images:e.map((function(e){return Te(Te({},Q(e,E)),{},{caption:L(e),id:e.id.toString()})})),columns:t.columns?Math.min(e.length,t.columns):t.columns})}(0,n.useEffect)((function(){if("web"===n.Platform.OS&&k&&k.length>0&&k.every((function(e){var t=e.url;return(0,v.isBlobURL)(t)}))){var e=(0,p.map)(k,(function(e){var t=e.url;return(0,v.getBlobByURL)(t)}));k.forEach((function(e){var t=e.url;return(0,v.revokeBlobURL)(t)})),j({filesList:e,onFileChange:F,allowedTypes:["image"]})}}),[]),(0,n.useEffect)((function(){l||C()}),[l]),(0,n.useEffect)((function(){var e,t,r,n,a,i;_||(N(),A({linkTo:(null===(e=window)||void 0===e||null===(t=e.wp)||void 0===t||null===(r=t.media)||void 0===r||null===(n=r.view)||void 0===n||null===(a=n.settings)||void 0===a||null===(i=a.defaultProps)||void 0===i?void 0:i.link)||ke}))}),[_]);var H=!!k.length,q=H&&k.some((function(e){return!!e.id})),J=(0,n.createElement)(g.MediaPlaceholder,{addToGallery:q,isAppender:H,disableMediaButtons:H&&!l,icon:!H&&w,labels:{title:!H&&(0,f.__)("Gallery"),instructions:!H&&Re},onSelect:F,accept:"image/*",allowedTypes:je,multiple:!0,value:q?k:{},onError:function(e){c.removeAllNotices(),c.createErrorNotice(e)},notices:H?void 0:o,onFocus:m,autoOpenMediaUpload:!H&&l&&z}),W=(0,g.useBlockProps)();if(!H)return(0,n.createElement)(a.View,W,J);var $=(0,p.map)((0,p.filter)(I,(function(e){var t=e.slug;return(0,p.some)(M,(function(e){return e[t]}))})),(function(e){var t=e.name;return{value:e.slug,label:t}})),K=H&&!(0,p.isEmpty)($);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g.InspectorControls,null,(0,n.createElement)(u.PanelBody,{title:(0,f.__)("Settings")},k.length>1&&(0,n.createElement)(u.RangeControl,s({label:(0,f.__)("Columns"),value:y,onChange:function(e){A({columns:e})},min:1,max:Math.min(8,k.length)},ze,{required:!0})),(0,n.createElement)(u.ToggleControl,{label:(0,f.__)("Crop images"),checked:!!h,onChange:function(){A({imageCrop:!h})},help:function(e){return e?(0,f.__)("Thumbnails are cropped to align."):(0,f.__)("Thumbnails are not cropped.")}}),(0,n.createElement)(u.SelectControl,{label:(0,f.__)("Link to"),value:_,onChange:function(e){A({linkTo:e})},options:Ie,hideCancelButton:!0}),K&&(0,n.createElement)(u.SelectControl,{label:(0,f.__)("Image size"),value:E,options:$,onChange:function(e){A({images:(0,p.map)(k,(function(t){if(!t.id)return t;var r=(0,p.get)(M,[parseInt(t.id,10),e]);return Te(Te({},t),r&&{url:r})})),sizeSlug:e})},hideCancelButton:!0}))),o,(0,n.createElement)(Be,s({},e,{selectedImage:O,mediaPlaceholder:J,onMoveBackward:function(e){return function(){0!==e&&D(e,e-1)}},onMoveForward:function(e){return function(){e!==k.length-1&&D(e,e+1)}},onRemoveImage:function(e){return function(){var r=(0,p.filter)(k,(function(t,r){return e!==r}));C(),A({images:r,columns:t.columns?Math.min(r.length,t.columns):t.columns})}},onSelectImage:function(e){return function(){C(e)}},onDeselectImage:function(){return function(){C()}},onSetImageAttributes:function(e,t){k[e]&&A({images:[].concat(U(k.slice(0,e)),[Te(Te({},k[e]),t)],U(k.slice(e+1)))})},blockProps:W,onFocusGalleryCaption:function(){C()}})))}));var Me=(0,c.compose)([u.withNotices])((function(e){return(0,n.createElement)(Y,e)})),Ae=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"growtype/gallery","version":"0.1.0","title":"Growtype Gallery","category":"media","icon":"awards","description":"Use wp gallery in advanced way.","keywords":["images","photos"],"attributes":{"images":{"type":"array","default":[],"source":"query","selector":".blocks-gallery-item","query":{"url":{"type":"string","source":"attribute","selector":"img","attribute":"src"},"fullUrl":{"type":"string","source":"attribute","selector":"img","attribute":"data-full-url"},"link":{"type":"string","source":"attribute","selector":"img","attribute":"data-link"},"alt":{"type":"string","source":"attribute","selector":"img","attribute":"alt","default":""},"id":{"type":"string","source":"attribute","selector":"img","attribute":"data-id"},"caption":{"type":"string","source":"html","selector":".blocks-gallery-item__caption"}}},"ids":{"type":"array","items":{"type":"number"},"default":[]},"shortCodeTransforms":{"type":"array","default":[],"items":{"type":"object"}},"columns":{"type":"number","minimum":1,"maximum":8},"caption":{"type":"string","source":"html","selector":".blocks-gallery-caption"},"imageCrop":{"type":"boolean","default":true},"fixedHeight":{"type":"boolean","default":true},"linkTarget":{"type":"string"},"linkTo":{"type":"string"},"sizeSlug":{"type":"string","default":"large"},"allowResize":{"type":"boolean","default":false},"watermark":{"type":"string","default":""},"hasOverlay":{"type":"boolean","default":false},"overlayColor":{"type":"string","default":""},"groupName":{"type":"string","default":""},"loaderActive":{"type":"boolean","default":false},"loaderType":{"type":"string","default":""},"imageHeight":{"type":"string","default":"100%"},"imageBorderRadius":{"type":"string","default":"0px"},"galleryId":{"type":"string","default":""}},"supports":{"anchor":true,"align":true,"html":false,"units":["px","em","rem","vh","vw"],"spacing":{"margin":true,"padding":true,"blockGap":["horizontal","vertical"],"__experimentalSkipSerialization":["blockGap"],"__experimentalDefaultControls":{"blockGap":true}},"color":{"text":false,"background":true,"gradients":true},"__experimentalLayout":{"allowSwitching":false,"allowInheriting":false,"allowEditing":false,"default":{"type":"flex"}}},"textdomain":"growtype-gallery","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),De=window.wp.hooks;(0,De.addFilter)("blocks.switchToBlockType.transformedBlock","growtype/gallery/update-third-party-transform-to",(function(e){var t;if("growtype/gallery"===e.name&&(null===(t=e.attributes)||void 0===t?void 0:t.images.length)>0){var r=e.attributes.images.map((function(t){var r=t.url,n=t.id,a=t.alt;return(0,l.createBlock)("core/image",{url:r,id:n?parseInt(n,10):null,alt:a,sizeSlug:e.attributes.sizeSlug,linkDestination:e.attributes.linkDestination})}));delete e.attributes.ids,delete e.attributes.images,e.innerBlocks=r}return e})),(0,De.addFilter)("blocks.switchToBlockType.transformedBlock","growtype/gallery/update-third-party-transform-from",(function(e,t){var r=(Array.isArray(t)?t:[t]).find((function(t){var r;return"growtype/gallery"===t.name&&t.innerBlocks.length>0&&!(null!==(r=t.attributes.images)&&void 0!==r&&r.length)>0&&!e.name.includes("core/")}));if(r){var n=r.innerBlocks.map((function(e){var t=e.attributes,r=t.url,n=t.id,a=t.alt;return{url:r,id:n?parseInt(n,10):null,alt:a}})),a=n.map((function(e){return e.id}));r.attributes.images=n,r.attributes.ids=a}return e}));var Le={from:[{type:"block",isMultiBlock:!0,blocks:["core/image"],transform:function(e){var t=e[0],r=t.align,n=t.sizeSlug;r=e.every((function(e){return e.align===r}))?r:void 0,n=e.every((function(e){return e.sizeSlug===n}))?n:void 0;var a=(0,p.filter)(e,(function(e){return e.url})).map((function(e){return e.width=void 0,e.height=void 0,(0,l.createBlock)("core/image",e)}));return(0,l.createBlock)("growtype/gallery",{align:r,sizeSlug:n},a)}},{type:"shortcode",tag:"gallery",attributes:{images:{type:"array",shortcode:function(e){e.named.ids}},ids:{type:"array",shortcode:function(e){e.named.ids}},columns:{type:"number",shortcode:function(e){var t=e.named.columns;return parseInt(void 0===t?"3":t,10)}},linkTo:{type:"string",shortcode:function(e){switch(e.named.link){case"post":return O;case"file":return S;default:return E}}}},transform:function(e){var t=e.named,r=t.ids,n=t.columns,a=void 0===n?3:n,i=t.link,o=function(e){return e?e.split(",").map((function(e){return parseInt(e,10)})):[]}(r).map((function(e){return parseInt(e,10)})),c=E;return"post"===i?c=O:"file"===i&&(c=S),(0,l.createBlock)("growtype/gallery",{columns:parseInt(a,10),linkTo:c},o.map((function(e){return(0,l.createBlock)("core/image",{id:e})})))},isMatch:function(e){return void 0!==e.named.ids}},{type:"files",priority:1,isMatch:function(e){return 1!==e.length&&e.every((function(e){return 0===e.type.indexOf("image/")}))},transform:function(e){var t=e.map((function(e){return(0,l.createBlock)("core/image",{url:(0,v.createBlobURL)(e)})}));return(0,l.createBlock)("growtype/gallery",{},t)}}],to:[{type:"block",blocks:["core/image"],transform:function(e,t){var r=e.align;return e.images,e.ids,e.sizeSlug,t.length>0?t.map((function(e){var t=e.attributes,n=t.url,a=t.alt,i=t.caption,o=t.title,c=t.href,u=t.rel,s=t.linkClass,m=t.id,d=t.sizeSlug,p=t.linkDestination,g=t.linkTarget,f=t.anchor,b=t.className;return(0,l.createBlock)("core/image",{align:r,url:n,alt:a,caption:i,title:o,href:c,rel:u,linkClass:s,id:m,sizeSlug:d,linkDestination:p,linkTarget:g,anchor:f,className:b})})):(0,l.createBlock)("core/image",{align:r})}}]},Ue=(0,n.createElement)(a.SVG,{width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M0.579738 26.2702H9.31891C9.31891 28.1128 14.952 28.8498 14.952 24.5329V23.2168C13.5832 25.0067 12.2144 25.3752 10.0033 25.3752C3.15937 25.3752 -0.052009 20.9003 0.000636649 14.8987C0.0532823 8.89715 3.31731 4.47492 9.74008 4.52756C11.688 4.52756 13.7938 5.10667 15.2152 6.84397L15.3732 4.84344H24.007V24.5329C24.007 37.6417 0.579738 37.0626 0.579738 26.2702ZM9.21362 15.2146C9.21362 19.0578 14.8467 19.0578 14.8467 15.162C14.8467 11.2662 9.21362 11.2136 9.21362 15.2146Z",fill:"#315344"}));!function(e){if(e){var t=e.metadata,r=e.settings,n=e.name;(0,l.registerBlockType)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:n},t),r)}}({name:Ae.name,metadata:Ae,settings:{icon:Ue,example:{attributes:{columns:2},innerBlocks:[{name:"core/image",attributes:{url:"https://s.w.org/images/core/5.3/Glacial_lakes%2C_Bhutan.jpg"}},{name:"core/image",attributes:{url:"https://s.w.org/images/core/5.3/Sediment_off_the_Yucatan_Peninsula.jpg"}}]},transforms:Le,edit:Me,save:function(e){var t,r=e.attributes,a=r.caption,l=r.columns,o=r.imageCrop,c=d()("has-nested-images",(i(t={},"columns-".concat(l),void 0!==l),i(t,"columns-default",void 0===l),i(t,"is-cropped",o),t)),u=g.useBlockProps.save({className:c}),s=g.useInnerBlocksProps.save(u);return(0,n.createElement)("figure",s,s.children,!g.RichText.isEmpty(a)&&(0,n.createElement)(g.RichText.Content,{tagName:"figcaption",className:d()("blocks-gallery-caption"),value:a}))},deprecated:le}})},184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=function(t,r,a,i){if(!r){var l=1/0;for(s=0;s<e.length;s++){r=e[s][0],a=e[s][1],i=e[s][2];for(var o=!0,c=0;c<r.length;c++)(!1&i||l>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,i<l&&(l=i));if(o){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[r,a,i]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,i,l=r[0],o=r[1],c=r[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var s=c(n)}for(t&&t(r);u<l.length;u++)i=l[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(s)},r=self.webpackChunkplugin=self.webpackChunkplugin||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var a=n.O(void 0,[431],(function(){return n(805)}));a=n.O(a)}();