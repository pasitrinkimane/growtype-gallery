!function(){var e={184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var l=typeof r;if("string"===l||"number"===l)e.push(r);else if(Array.isArray(r)){if(r.length){var i=a.apply(null,r);i&&e.push(i)}}else if("object"===l){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,r),l.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.wp.primitives;function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=window.wp.blocks;function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var i=window.wp.compose,o=window.wp.components;function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}var u=r(184),s=r.n(u),m=window.lodash,d=window.wp.blockEditor,p=window.wp.i18n,g=window.wp.data,f=window.wp.viewport,b=window.wp.blob,y=window.wp.notices,v=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"growtype/gallery","version":"0.1.0","title":"Growtype Gallery","category":"media","icon":"awards","description":"Use wp gallery in advanced way.","keywords":["images","photos"],"attributes":{"images":{"type":"array","default":[],"source":"query","selector":".blocks-gallery-item","query":{"url":{"type":"string","source":"attribute","selector":"img","attribute":"src"},"fullUrl":{"type":"string","source":"attribute","selector":"img","attribute":"data-full-url"},"link":{"type":"string","source":"attribute","selector":"img","attribute":"data-link"},"alt":{"type":"string","source":"attribute","selector":"img","attribute":"alt","default":""},"id":{"type":"string","source":"attribute","selector":"img","attribute":"data-id"},"caption":{"type":"string","source":"html","selector":".blocks-gallery-item__caption"}}},"ids":{"type":"array","items":{"type":"number"},"default":[]},"shortCodeTransforms":{"type":"array","default":[],"items":{"type":"object"}},"columns":{"type":"number","minimum":1},"columnsMobile":{"type":"number","minimum":1},"caption":{"type":"string","source":"html","selector":".blocks-gallery-caption"},"imageCrop":{"type":"boolean","default":true},"fixedHeight":{"type":"boolean","default":true},"linkTarget":{"type":"string"},"linkTo":{"type":"string"},"sizeSlug":{"type":"string","default":"full"},"allowResize":{"type":"boolean","default":false},"watermark":{"type":"string","default":""},"imagePreviewFormat":{"type":"string","default":"original","options":[{"value":"original","label":"Original"},{"value":"background_img","label":"Background image"}]},"imagePreviewSize":{"type":"string","default":"large","options":[{"value":"thumbnail","label":"Thumbnail"},{"value":"medium","label":"Medium"},{"value":"large","label":"Large"},{"value":"full","label":"Full"}]},"previewGridStyle":{"type":"string","default":"none","options":[{"value":"none","label":"None"},{"value":"1","label":"1"},{"value":"2","label":"2"},{"value":"3","label":"3"},{"value":"4","label":"4"}]},"hasOverlay":{"type":"boolean","default":false},"overlayColor":{"type":"string","default":""},"groupName":{"type":"string","default":""},"loaderActive":{"type":"boolean","default":false},"loaderType":{"type":"string","default":"","options":[{"value":"basic","label":"Basic"},{"value":"story","label":"Story"}]},"animationOnScrollEffect":{"type":"string","default":"2","options":[{"value":"1","label":"Fade in"},{"value":"2","label":"Slide up"},{"value":"3","label":"Zoom"},{"value":"4","label":"Flip"},{"value":"5","label":"Roll"},{"value":"6","label":"Drop"},{"value":"7","label":"Flip horizontal"},{"value":"8","label":"Pop out"}]},"imageHeight":{"type":"number","minimum":0,"maximum":100},"imageBorderRadius":{"type":"number","minimum":0,"maximum":250},"imagePadding":{"type":"number","default":5,"minimum":0,"maximum":50},"galleryId":{"type":"string","default":""}},"supports":{"anchor":true,"align":true,"html":false,"units":["px","em","rem","vh","vw"],"spacing":{"margin":true,"padding":true,"blockGap":["horizontal","vertical"],"__experimentalSkipSerialization":["blockGap"],"__experimentalDefaultControls":{"blockGap":true}},"color":{"text":false,"background":true,"gradients":true},"__experimentalLayout":{"allowSwitching":false,"allowInheriting":false,"allowEditing":false,"default":{"type":"flex"}}},"textdomain":"growtype-gallery","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),h=(0,e.createElement)(t.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(t.Path,{d:"M20.2 8v11c0 .7-.6 1.2-1.2 1.2H6v1.5h13c1.5 0 2.7-1.2 2.7-2.8V8h-1.5zM18 16.4V4.6c0-.9-.7-1.6-1.6-1.6H4.6C3.7 3 3 3.7 3 4.6v11.8c0 .9.7 1.6 1.6 1.6h11.8c.9 0 1.6-.7 1.6-1.6zM4.5 4.6c0-.1.1-.1.1-.1h11.8c.1 0 .1.1.1.1V12l-2.3-1.7c-.3-.2-.6-.2-.9 0l-2.9 2.1L8 11.3c-.2-.1-.5-.1-.7 0l-2.9 1.5V4.6zm0 11.8v-1.8l3.2-1.7 2.4 1.2c.2.1.5.1.8-.1l2.8-2 2.8 2v2.5c0 .1-.1.1-.1.1H4.6c0-.1-.1-.2-.1-.2z"})),k=(0,e.createElement)(d.BlockIcon,{icon:h}),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"large",r=(0,m.pick)(e,["alt","id","link"]);r.url=(0,m.get)(e,["sizes",t,"url"])||(0,m.get)(e,["media_details","sizes",t,"source_url"])||e.url||e.source_url;var n=(0,m.get)(e,["sizes","full","url"])||(0,m.get)(e,["media_details","sizes","full","source_url"]);return n&&(r.fullUrl=n),r},_="none",E="media",S="attachment",C="lightbox",O=["noreferrer","noopener"];function P(e,t,r){switch(r||t){case"file":case E:return{href:(null==e?void 0:e.source_url)||(null==e?void 0:e.url),linkDestination:"media"};case"post":case S:return{href:null==e?void 0:e.link,linkDestination:"attachment"};case _:return{href:void 0,linkDestination:"none"}}return{}}function x(e,t){var r,n,a,l=t.rel,i=e?"_blank":void 0;return i||l?(a=n=l,void 0===n||(0,m.isEmpty)(a)||(0,m.isEmpty)(a)||(O.forEach((function(e){var t=new RegExp("\\b"+e+"\\b","gi");a=a.replace(t,"")})),a!==n&&(a=a.trim()),(0,m.isEmpty)(a)&&(a=void 0)),r=a):r=void 0,{linkTarget:i,rel:r}}function B(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var N=["children"],T=["isHidden","className","value","placeholder","tagName","captionRef"],I=["core/image"];function j(t){var r=t.isHidden,n=t.className,a=t.value,l=t.placeholder,i=t.tagName,u=t.captionRef,s=B(t,T);return r?(0,e.createElement)(o.VisuallyHidden,c({as:d.RichText},s)):(0,e.createElement)(d.RichText,c({ref:u,value:a,placeholder:l,className:n,tagName:i},s))}var R=function(r){var l,i=r.attributes,o=r.isSelected,u=r.setAttributes,m=r.mediaPlaceholder,g=r.insertBlocksAfter,f=r.blockProps,b=i.align,y=i.columns,v=i.caption,h=i.imageCrop,k=(0,d.useInnerBlocksProps)(f,{allowedBlocks:I,orientation:"horizontal",renderAppender:!1,__experimentalLayout:{type:"default",alignments:[]}}),w=k.children,_=B(k,N);return(0,e.createElement)("figure",c({},_,{className:s()(f.className,"blocks-gallery-grid",(l={},n(l,"align".concat(b),b),n(l,"columns-".concat(y),void 0!==y),n(l,"columns-default",void 0===y),n(l,"is-cropped",h),l))}),w,o&&!w&&(0,e.createElement)(t.View,{className:"blocks-gallery-media-placeholder-wrapper"},m),(0,e.createElement)(j,{isHidden:!o&&d.RichText.isEmpty(v),tagName:"figcaption",className:s()("blocks-gallery-caption"),"aria-label":(0,p.__)("Gallery caption text"),placeholder:(0,p.__)("Write gallery captionâ€¦"),value:v,onChange:function(e){return u({caption:e})},inlineToolbar:!0,__unstableOnSplitAtEnd:function(){return g((0,a.createBlock)((0,a.getDefaultBlockName)()))}}))};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}function L(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l=[],_n=!0,i=!1;try{for(r=r.call(e);!(_n=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);_n=!0);}catch(e){i=!0,a=e}finally{try{_n||null==r.return||r.return()}finally{if(i)throw a}}return l}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=window.wp.coreData,F=[];function V(t){var r,n=t.blockGap,a=t.clientId,l=(0,e.useContext)(d.BlockList.__unstableElementContext),i="var( --wp--style--gallery-gap-default, var( --gallery-block--gutter-size, var( --wp--style--block-gap, 0.5em ) ) )",o=i,c=i;n&&(o=(r="string"==typeof n?(0,d.__experimentalGetGapCSSValue)(n):(0,d.__experimentalGetGapCSSValue)(null==n?void 0:n.top)||i)===(c="string"==typeof n?(0,d.__experimentalGetGapCSSValue)(n):(0,d.__experimentalGetGapCSSValue)(null==n?void 0:n.left)||i)?r:"".concat(r," ").concat(c));var u="#block-".concat(a," {\n\t\t--wp--style--unstable-gallery-gap: ").concat("0"===c?"0px":c,";\n\t\tgap: ").concat(o,"\n\t}");return u&&l?(0,e.createPortal)((0,e.createElement)((function(){return(0,e.createElement)("style",null,u)}),null),l):null}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=[{value:S,label:(0,p.__)("Attachment Page")},{value:E,label:(0,p.__)("Media File")},{value:_,label:(0,p.__)("None")},{value:C,label:(0,p.__)("Lightbox")},{value:"popup",label:(0,p.__)("Popup")}],W=["image"],$=e.Platform.isNative?(0,p.__)("ADD MEDIA"):(0,p.__)("Drag images, upload new ones or select files from your library."),Z=e.Platform.isNative?{type:"stepper"}:{},K=function(r){var l,i,u=r.setAttributes,f=r.attributes,h=r.className,_=r.clientId,O=r.isSelected,B=r.insertBlocksAfter,N=f.columns,T=f.imageCrop,I=f.linkTarget,j=f.linkTo,z=f.sizeSlug,A=f.hasOverlay,D=f.overlayColor,H=f.loaderActive,K=(0,g.useDispatch)(d.store),Y=K.__unstableMarkNextChangeAsNotPersistent,Q=K.replaceInnerBlocks,X=K.updateBlockAttributes,ee=K.selectBlock,te=K.clearSelectedBlock,re=(0,g.useDispatch)(y.store),ne=re.createSuccessNotice,ae=re.createErrorNotice,le=(0,g.useSelect)((function(e){var t,r=e(d.store).getSettings().__experimentalPreferredStyleVariations;return{getBlock:e(d.store).getBlock,getSettings:e(d.store).getSettings,preferredStyle:null==r||null===(t=r.value)||void 0===t?void 0:t["core/image"]}}),[]),ie=le.getBlock,oe=le.getSettings,ce=le.preferredStyle,ue=(0,g.useSelect)((function(e){var t;return null===(t=e(d.store).getBlock(_))||void 0===t?void 0:t.innerBlocks}),[_]),se=(0,g.useSelect)((function(e){return e(d.store).wasBlockJustInserted(_,"inserter_menu")}),[_]),me=(0,e.useMemo)((function(){return null==ue?void 0:ue.map((function(e){return{clientId:e.clientId,id:e.attributes.id,url:e.attributes.url,attributes:e.attributes,fromSavedContent:Boolean(e.originalContent)}}))}),[ue]),de=function(e){return(0,g.useSelect)((function(t){var r,n=e.map((function(e){return e.attributes.id})).filter((function(e){return void 0!==e}));return 0===n.length?F:null!==(r=t(U.store).getMediaItems({include:n.join(","),per_page:n.length,orderby:"include"}))&&void 0!==r?r:F}),[e])}(ue),pe=function(t,r){var n=G((0,e.useState)([]),2),a=n[0],l=n[1];return(0,e.useMemo)((function(){return function(){var e=!1,n=a.filter((function(e){return t.find((function(t){return e.clientId===t.clientId}))}));n.length<a.length&&(e=!0),t.forEach((function(t){t.fromSavedContent&&!n.find((function(e){return e.id===t.id}))&&(e=!0,n.push(t))}));var i=t.filter((function(e){return!n.find((function(t){return e.clientId&&t.clientId===e.clientId}))&&(null==r?void 0:r.find((function(t){return t.id===e.id})))&&!e.fromSavedConent}));return(e||(null==i?void 0:i.length)>0)&&l([].concat(L(n),L(i))),i.length>0?i:null}()}),[t,r])}(me,de);(0,e.useEffect)((function(){null==pe||pe.forEach((function(e){var t,r,n,a,l;Y(),X(e.clientId,q(q({},(t=e.attributes,l=t.id?(0,m.find)(de,{id:t.id}):null,n=t.className&&""!==t.className?t.className:ce?"is-style-".concat(ce):void 0,a=t.linkTarget||t.rel?{linkTarget:t.linkTarget,rel:t.rel}:x(I,f),q(q(q(q({},w(l,z)),P(l,j,null==t?void 0:t.linkDestination)),a),{},{className:n,sizeSlug:z,caption:t.caption||(null===(r=l.caption)||void 0===r?void 0:r.raw),alt:t.alt||l.alt_text}))),{},{id:e.id,align:void 0}))})),(null==pe?void 0:pe.length)>0&&te()}),[pe]);var ge=function(t,r,a){return(0,e.useMemo)((function(){return function(){if(t&&0!==t.length){var e=a().imageSizes,l={};return r&&(l=t.reduce((function(t,r){if(!r.id)return t;var a=e.reduce((function(e,t){var a=(0,m.get)(r,["sizes",t.slug,"url"]),l=(0,m.get)(r,["media_details","sizes",t.slug,"source_url"]);return M(M({},e),{},n({},t.slug,a||l))}),{});return M(M({},t),{},n({},parseInt(r.id,10),a))}),{})),e.filter((function(e){var t=e.slug;return(0,m.some)(l,(function(e){return e[t]}))})).map((function(e){var t=e.name;return{value:e.slug,label:t}}))}}()}),[t,r])}(de,O,oe);function fe(e){var t;return W.some((function(t){var r;return 0===(null===(r=e.type)||void 0===r?void 0:r.indexOf(t))}))||0===(null===(t=e.url)||void 0===t?void 0:t.indexOf("blob:"))}function be(e){var t="[object FileList]"===Object.prototype.toString.call(e),r=t?Array.from(e).map((function(e){return e.url?e:w({url:(0,b.createBlobURL)(e)})})):e;r.every(fe)||ae((0,p.__)("If uploading to a gallery all files need to be image formats"),{id:"gallery-upload-invalid-file",type:"snackbar"});var n=r.filter((function(e){return e.url||fe(e)})).map((function(e){return e.url?e:w({url:(0,b.createBlobURL)(e)})})),l=n.reduce((function(e,t,r){return e[t.id]=r,e}),{}),i=t?ue:ue.filter((function(e){return n.find((function(t){return t.id===e.attributes.id}))})),o=n.filter((function(e){return!i.find((function(t){return e.id===t.attributes.id}))})).map((function(e){return(0,a.createBlock)("core/image",{id:e.id,url:e.url,caption:e.caption,alt:e.alt})}));(null==o?void 0:o.length)>0&&ee(o[0].clientId),Q(_,i.concat(o).sort((function(e,t){return l[e.attributes.id]-l[t.attributes.id]})))}(0,e.useEffect)((function(){var e,t,r,n,a,l;j||(Y(),u({linkTo:(null===(e=window)||void 0===e||null===(t=e.wp)||void 0===t||null===(r=t.media)||void 0===r||null===(n=r.view)||void 0===n||null===(a=n.settings)||void 0===a||null===(l=a.defaultProps)||void 0===l?void 0:l.link)||C}))}),[j]);var ye,ve=!!me.length,he=ve&&me.some((function(e){return!!e.id})),ke=me.some((function(t){var r,n;return e.Platform.isNative?0===(null===(n=t.url)||void 0===n?void 0:n.indexOf("file:")):!t.id&&0===(null===(r=t.url)||void 0===r?void 0:r.indexOf("blob:"))})),we=e.Platform.select({web:{addToGallery:!1,disableMediaButtons:ke,value:{}},native:{addToGallery:he,isAppender:ve,disableMediaButtons:ve&&!O||ke,value:he?me:{},autoOpenMediaUpload:!ve&&O&&se}}),_e=(0,e.createElement)(d.MediaPlaceholder,c({handleUpload:!1,icon:k,labels:{title:(0,p.__)("Gallery"),instructions:$},onSelect:be,accept:"image/*",allowedTypes:W,multiple:!0,onError:function(e){ae(e,{type:"snackbar"})}},we)),Ee=(0,d.useBlockProps)({className:s()(h,"has-nested-images")});return ve?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(d.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,p.__)("Settings")},(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Link to"),value:j,onChange:function(e){u({linkTo:e});var t={},r=[];ie(_).innerBlocks.forEach((function(n){r.push(n.clientId);var a=n.attributes.id?(0,m.find)(de,{id:n.attributes.id}):null;t[n.clientId]=P(a,e)})),X(r,t,!0);var n=[].concat(J).find((function(t){return t.value===e}));ne((0,p.sprintf)(
/* translators: %s: image size settings */
(0,p.__)("All gallery image links updated to: %s"),n.label),{id:"gallery-attributes-linkTo",type:"snackbar"})},options:J,hideCancelButton:!0}),(j===E||j===S)&&(0,e.createElement)(o.ToggleControl,{label:(0,p.__)("Open in new tab","growtype-gallery"),checked:"_blank"===I,onChange:function(e){var t=e?"_blank":void 0;u({linkTarget:t});var r={},n=[];ie(_).innerBlocks.forEach((function(e){n.push(e.clientId),r[e.clientId]=x(t,e.attributes)})),X(n,r,!0);var a=e?(0,p.__)("All gallery images updated to open in new tab"):(0,p.__)("All gallery images updated to not open in new tab");ne(a,{id:"gallery-attributes-openInNewTab",type:"snackbar"})}}),"lightbox"===j&&(0,e.createElement)(o.TextControl,{label:(0,p.__)("Group name","growtype-gallery"),help:(0,p.__)("Images are related by group name.","growtype-gallery"),onChange:function(e){u({groupName:e})},value:f.groupName}),(null==ge?void 0:ge.length)>0&&(j===E||j===S||j===C)&&(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Main image size"),value:z,options:ge,onChange:function(e){u({sizeSlug:e});var t={},r=[];ie(_).innerBlocks.forEach((function(n){r.push(n.clientId);var a=n.attributes.id?(0,m.find)(de,{id:n.attributes.id}):null;t[n.clientId]=function(e,t){var r=(0,m.get)(e,["media_details","sizes",t,"source_url"]);return r?{url:r,width:void 0,height:void 0,sizeSlug:t}:{}}(a,e)})),X(r,t,!0);var n=ge.find((function(t){return t.value===e}));ne((0,p.sprintf)(
/* translators: %s: image size settings */
(0,p.__)("All gallery image sizes updated to: %s"),n.label),{id:"gallery-attributes-sizeSlug",type:"snackbar"})},hideCancelButton:!0}),e.Platform.isWeb&&!ge&&he&&(0,e.createElement)(o.BaseControl,{className:"gallery-image-sizes"},(0,e.createElement)(o.BaseControl.VisualLabel,null,(0,p.__)("Image size")),(0,e.createElement)(t.View,{className:"gallery-image-sizes__loading"},(0,e.createElement)(o.Spinner,null),(0,p.__)("Loading optionsâ€¦")))),(0,e.createElement)(o.PanelBody,{title:(0,p.__)("Preview","growtype-gallery")},(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Image preview size","growtype-gallery"),value:f.imagePreviewSize,options:v.attributes.imagePreviewSize.options,onChange:function(e){return u({imagePreviewSize:e})},hideCancelButton:!0}),(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Image preview format","growtype-gallery"),value:f.imagePreviewFormat,options:v.attributes.imagePreviewFormat.options,onChange:function(e){return u({imagePreviewFormat:e})},hideCancelButton:!0}),"background_img"===f.imagePreviewFormat?(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Grid style","growtype-gallery"),value:f.previewGridStyle,options:v.attributes.previewGridStyle.options,onChange:function(e){return u({previewGridStyle:e})},hideCancelButton:!0}):"",me.length>1&&(0,e.createElement)(o.RangeControl,c({label:(0,p.__)("Columns","growtype-gallery"),value:N||(ye=me.length,ye?Math.min(3,ye):3),onChange:function(e){u({columns:e})},min:v.attributes.columns.minimum,max:Math.min(8,me.length)},Z,{required:!0})),me.length>1&&(0,e.createElement)(o.RangeControl,c({label:(0,p.__)("Columns - mobile","growtype-gallery"),value:f.columnsMobile,onChange:function(e){return u({columnsMobile:e})},min:v.attributes.columnsMobile.minimum,max:Math.min(8,me.length)},Z,{required:!0})),(0,e.createElement)(o.RangeControl,c({label:(0,p.__)("Image height (%)","growtype-gallery"),value:f.imageHeight,onChange:function(e){return u({imageHeight:e})},min:v.attributes.imageHeight.minimum,max:v.attributes.imageHeight.maximum},Z,{required:!0})),(0,e.createElement)(o.RangeControl,c({label:(0,p.__)("Image border radius (px)","growtype-gallery"),value:f.imageBorderRadius,onChange:function(e){return u({imageBorderRadius:e})},min:v.attributes.imageBorderRadius.minimum,max:v.attributes.imageBorderRadius.maximum},Z,{required:!0})),(0,e.createElement)(o.RangeControl,c({label:(0,p.__)("Image padding (px)","growtype-gallery"),value:f.imagePadding,onChange:function(e){return u({imagePadding:e})},min:v.attributes.imagePadding.minimum,max:v.attributes.imagePadding.maximum},Z,{required:!0})),(0,e.createElement)(o.ToggleControl,{label:(0,p.__)("Crop images"),checked:!T,onChange:function(){u({imageCrop:!T})},help:function(e){return e?(0,p.__)("Thumbnails are cropped to align."):(0,p.__)("Thumbnails are not cropped.")}}),(0,e.createElement)(o.ToggleControl,{label:(0,p.__)("Has overlay"),checked:A,onChange:function(e){u({hasOverlay:e})}}),A&&(0,e.createElement)(o.ColorPicker,{label:(0,p.__)("Overlay color"),color:D,onChange:function(e){u({overlayColor:e})},enableAlpha:"true",defaultValue:"",copyFormat:"rgb"}),(0,e.createElement)(o.TextControl,{label:(0,p.__)("Watermark","growtype-gallery"),help:(0,p.__)("Visible on every image.","growtype-gallery"),onChange:function(e){u({watermark:e})},value:f.watermark})),(0,e.createElement)(o.PanelBody,{title:(0,p.__)("Loading","growtype-gallery")},(0,e.createElement)(o.ToggleControl,{label:(0,p.__)("Loader active"),checked:H,onChange:function(e){u({loaderActive:e})}}),(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Loader type","growtype-gallery"),value:f.loaderType,options:v.attributes.loaderType.options,onChange:function(e){return u({loaderType:e})},hideCancelButton:!0}),(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Animation on scroll effect","growtype-gallery"),value:f.animationOnScrollEffect,options:v.attributes.animationOnScrollEffect.options,onChange:function(e){return u({animationOnScrollEffect:e})},hideCancelButton:!0}))),(0,e.createElement)(d.InspectorAdvancedControls,null,(0,e.createElement)(o.TextControl,{label:(0,p.__)("Gallery ID","growtype-gallery"),value:f.galleryId,onChange:function(e){return u({galleryId:e})}})),(0,e.createElement)(d.BlockControls,{group:"other"},(0,e.createElement)(d.MediaReplaceFlow,{allowedTypes:W,accept:"image/*",handleUpload:!1,onSelect:be,name:(0,p.__)("Add"),multiple:!0,mediaIds:me.filter((function(e){return e.id})).map((function(e){return e.id})),addToGallery:he})),e.Platform.isWeb&&(0,e.createElement)(V,{blockGap:null===(l=f.style)||void 0===l||null===(i=l.spacing)||void 0===i?void 0:i.blockGap,clientId:_}),(0,e.createElement)(R,c({},r,{images:me,mediaPlaceholder:!ve||e.Platform.isNative?_e:void 0,blockProps:Ee,insertBlocksAfter:B}))):(0,e.createElement)(t.View,Ee,_e)},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"large",r=(0,m.pick)(e,["alt","id","link","caption"]);r.url=(0,m.get)(e,["sizes",t,"url"])||(0,m.get)(e,["media_details","sizes",t,"source_url"])||e.url;var n=(0,m.get)(e,["sizes","full","url"])||(0,m.get)(e,["media_details","sizes","full","source_url"]);return n&&(r.fullUrl=n),r},Q=["images","ids"];function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te="file",re="post";function ne(e){var t;return Math.min(3,null==e||null===(t=e.images)||void 0===t?void 0:t.length)}function ae(e){var t=e.linkTo?e.linkTo:"none";"post"===t?t="attachment":"file"===t&&(t="media");var r=e.images.map((function(r){return function(e,t,r){return(0,a.createBlock)("core/image",ee(ee({},e.id&&{id:parseInt(e.id)}),{},{url:e.url,alt:e.alt,caption:e.caption,sizeSlug:t},function(e,t){switch(t){case te:return{href:(null==e?void 0:e.source_url)||(null==e?void 0:e.url),linkDestination:E};case re:return{href:null==e?void 0:e.link,linkDestination:S};case E:return{href:(null==e?void 0:e.source_url)||(null==e?void 0:e.url),linkDestination:E};case S:return{href:null==e?void 0:e.link,linkDestination:S};case _:return{href:void 0,linkDestination:_}}return{}}(e,r)))}(r,e.sizeSlug,t)}));return e.images,e.ids,[ee(ee({},B(e,Q)),{},{linkTo:t,allowResize:!1}),r]}var le=[{attributes:{images:{type:"array",default:[],source:"query",selector:".blocks-gallery-item",query:{url:{type:"string",source:"attribute",selector:"img",attribute:"src"},fullUrl:{type:"string",source:"attribute",selector:"img",attribute:"data-full-url"},link:{type:"string",source:"attribute",selector:"img",attribute:"data-link"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},id:{type:"string",source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:".blocks-gallery-item__caption"}}},ids:{type:"array",items:{type:"number"},default:[]},columns:{type:"number",minimum:1,maximum:8},caption:{type:"string",source:"html",selector:".blocks-gallery-caption"},imageCrop:{type:"boolean",default:!0},fixedHeight:{type:"boolean",default:!0},linkTo:{type:"string"},sizeSlug:{type:"string",default:"large"}},supports:{anchor:!0,align:!0},save:function(t){var r=t.attributes,n=r.images,a=r.columns,l=void 0===a?ne(r):a,i=r.imageCrop,o=r.caption,c=r.linkTo,u="columns-".concat(l," ").concat(i?"is-cropped":"");return(0,e.createElement)("figure",d.useBlockProps.save({className:u}),(0,e.createElement)("ul",{className:"blocks-gallery-grid"},n.map((function(t){var r;switch(c){case te:r=t.fullUrl||t.url;break;case re:r=t.link}var n=(0,e.createElement)("img",{src:t.url,alt:t.alt,"data-id":t.id,"data-full-url":t.fullUrl,"data-link":t.link,className:t.id?"wp-image-".concat(t.id):null});return(0,e.createElement)("li",{key:t.id||t.url,className:"blocks-gallery-item"},(0,e.createElement)("figure",null,r?(0,e.createElement)("a",{href:r},n):n,!d.RichText.isEmpty(t.caption)&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-item__caption",value:t.caption})))}))),!d.RichText.isEmpty(o)&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-caption",value:o}))},migrate:function(e){return ae(e)}},{attributes:{images:{type:"array",default:[],source:"query",selector:".blocks-gallery-item",query:{url:{type:"string",source:"attribute",selector:"img",attribute:"src"},fullUrl:{type:"string",source:"attribute",selector:"img",attribute:"data-full-url"},link:{type:"string",source:"attribute",selector:"img",attribute:"data-link"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},id:{type:"string",source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:".blocks-gallery-item__caption"}}},ids:{type:"array",items:{type:"number"},default:[]},columns:{type:"number",minimum:1,maximum:8},caption:{type:"string",source:"html",selector:".blocks-gallery-caption"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"},sizeSlug:{type:"string",default:"large"}},supports:{align:!0},isEligible:function(e){var t=e.linkTo;return!t||"attachment"===t||"media"===t},migrate:function(e){return ae(e)},save:function(t){var r=t.attributes,n=r.images,a=r.columns,l=void 0===a?ne(r):a,i=r.imageCrop,o=r.caption,c=r.linkTo;return(0,e.createElement)("figure",{className:"columns-".concat(l," ").concat(i?"is-cropped":"")},(0,e.createElement)("ul",{className:"blocks-gallery-grid"},n.map((function(t){var r;switch(c){case"media":r=t.fullUrl||t.url;break;case"attachment":r=t.link}var n=(0,e.createElement)("img",{src:t.url,alt:t.alt,"data-id":t.id,"data-full-url":t.fullUrl,"data-link":t.link,className:t.id?"wp-image-".concat(t.id):null});return(0,e.createElement)("li",{key:t.id||t.url,className:"blocks-gallery-item"},(0,e.createElement)("figure",null,r?(0,e.createElement)("a",{href:r},n):n,!d.RichText.isEmpty(t.caption)&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-item__caption",value:t.caption})))}))),!d.RichText.isEmpty(o)&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-caption",value:o}))}},{attributes:{images:{type:"array",default:[],source:"query",selector:".blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},fullUrl:{source:"attribute",selector:"img",attribute:"data-full-url"},link:{source:"attribute",selector:"img",attribute:"data-link"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:".blocks-gallery-item__caption"}}},ids:{type:"array",default:[]},columns:{type:"number"},caption:{type:"string",source:"html",selector:".blocks-gallery-caption"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"}},supports:{align:!0},isEligible:function(e){var t=e.ids;return t&&t.some((function(e){return"string"==typeof e}))},migrate:function(e){return ae(e)},save:function(t){var r=t.attributes,n=r.images,a=r.columns,l=void 0===a?ne(r):a,i=r.imageCrop,o=r.caption,c=r.linkTo;return(0,e.createElement)("figure",{className:"columns-".concat(l," ").concat(i?"is-cropped":"")},(0,e.createElement)("ul",{className:"blocks-gallery-grid"},n.map((function(t){var r;switch(c){case"media":r=t.fullUrl||t.url;break;case"attachment":r=t.link}var n=(0,e.createElement)("img",{src:t.url,alt:t.alt,"data-id":t.id,"data-full-url":t.fullUrl,"data-link":t.link,className:t.id?"wp-image-".concat(t.id):null});return(0,e.createElement)("li",{key:t.id||t.url,className:"blocks-gallery-item"},(0,e.createElement)("figure",null,r?(0,e.createElement)("a",{href:r},n):n,!d.RichText.isEmpty(t.caption)&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-item__caption",value:t.caption})))}))),!d.RichText.isEmpty(o)&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",className:"blocks-gallery-caption",value:o}))}},{attributes:{images:{type:"array",default:[],source:"query",selector:"ul.wp-block-gallery .blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},fullUrl:{source:"attribute",selector:"img",attribute:"data-full-url"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},link:{source:"attribute",selector:"img",attribute:"data-link"},caption:{type:"string",source:"html",selector:"figcaption"}}},ids:{type:"array",default:[]},columns:{type:"number"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"}},supports:{align:!0},save:function(t){var r=t.attributes,n=r.images,a=r.columns,l=void 0===a?ne(r):a,i=r.imageCrop,o=r.linkTo;return(0,e.createElement)("ul",{className:"columns-".concat(l," ").concat(i?"is-cropped":"")},n.map((function(t){var r;switch(o){case"media":r=t.fullUrl||t.url;break;case"attachment":r=t.link}var n=(0,e.createElement)("img",{src:t.url,alt:t.alt,"data-id":t.id,"data-full-url":t.fullUrl,"data-link":t.link,className:t.id?"wp-image-".concat(t.id):null});return(0,e.createElement)("li",{key:t.id||t.url,className:"blocks-gallery-item"},(0,e.createElement)("figure",null,r?(0,e.createElement)("a",{href:r},n):n,t.caption&&t.caption.length>0&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",value:t.caption})))})))},migrate:function(e){return ae(e)}},{attributes:{images:{type:"array",default:[],source:"query",selector:"ul.wp-block-gallery .blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},link:{source:"attribute",selector:"img",attribute:"data-link"},caption:{type:"string",source:"html",selector:"figcaption"}}},columns:{type:"number"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"}},isEligible:function(e){var t=e.images,r=e.ids;return t&&t.length>0&&(!r&&t||r&&t&&r.length!==t.length||(0,m.some)(t,(function(e,t){return!e&&null!==r[t]||parseInt(e,10)!==r[t]})))},migrate:function(e){return ae(e)},supports:{align:!0},save:function(t){var r=t.attributes,n=r.images,a=r.columns,l=void 0===a?ne(r):a,i=r.imageCrop,o=r.linkTo;return(0,e.createElement)("ul",{className:"columns-".concat(l," ").concat(i?"is-cropped":"")},n.map((function(t){var r;switch(o){case"media":r=t.url;break;case"attachment":r=t.link}var n=(0,e.createElement)("img",{src:t.url,alt:t.alt,"data-id":t.id,"data-link":t.link,className:t.id?"wp-image-".concat(t.id):null});return(0,e.createElement)("li",{key:t.id||t.url,className:"blocks-gallery-item"},(0,e.createElement)("figure",null,r?(0,e.createElement)("a",{href:r},n):n,t.caption&&t.caption.length>0&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",value:t.caption})))})))}},{attributes:{images:{type:"array",default:[],source:"query",selector:"div.wp-block-gallery figure.blocks-gallery-image img",query:{url:{source:"attribute",attribute:"src"},alt:{source:"attribute",attribute:"alt",default:""},id:{source:"attribute",attribute:"data-id"}}},columns:{type:"number"},imageCrop:{type:"boolean",default:!0},linkTo:{type:"string",default:"none"},align:{type:"string",default:"none"}},supports:{align:!0},save:function(t){var r=t.attributes,n=r.images,a=r.columns,l=void 0===a?ne(r):a,i=r.align,o=r.imageCrop,c=r.linkTo,u=s()("columns-".concat(l),{alignnone:"none"===i,"is-cropped":o});return(0,e.createElement)("div",{className:u},n.map((function(t){var r;switch(c){case"media":r=t.url;break;case"attachment":r=t.link}var n=(0,e.createElement)("img",{src:t.url,alt:t.alt,"data-id":t.id});return(0,e.createElement)("figure",{key:t.id||t.url,className:"blocks-gallery-image"},r?(0,e.createElement)("a",{href:r},n):n)})))},migrate:function(e){return ae(e)}}];function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function me(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}var pe=window.wp.keycodes,ge=(0,e.createElement)(t.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(t.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})),fe=(0,e.createElement)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(t.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),be=(0,e.createElement)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(t.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})),ye=(0,e.createElement)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(t.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),ve=(0,e.createElement)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(t.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),he="none",ke="file",we="post",_e=["alt"],Ee=["caption"];var Se=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(c,t);var r,n,a,l,i=(a=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(a);if(l){var r=de(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return me(this,e)});function c(){var e;return ie(this,c),(e=i.apply(this,arguments)).onSelectImage=e.onSelectImage.bind(ce(e)),e.onRemoveImage=e.onRemoveImage.bind(ce(e)),e.bindContainer=e.bindContainer.bind(ce(e)),e.onEdit=e.onEdit.bind(ce(e)),e.onSelectImageFromLibrary=e.onSelectImageFromLibrary.bind(ce(e)),e.onSelectCustomURL=e.onSelectCustomURL.bind(ce(e)),e.state={isEditing:!1},e}return r=c,(n=[{key:"bindContainer",value:function(e){this.container=e}},{key:"onSelectImage",value:function(){this.props.isSelected||this.props.onSelect()}},{key:"onRemoveImage",value:function(e){this.container===this.container.ownerDocument.activeElement&&this.props.isSelected&&-1!==[pe.BACKSPACE,pe.DELETE].indexOf(e.keyCode)&&(e.preventDefault(),this.props.onRemove())}},{key:"onEdit",value:function(){this.setState({isEditing:!0})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.image,r=e.url,n=e.__unstableMarkNextChangeAsNotPersistent;t&&!r&&(n(),this.props.setAttributes({url:t.source_url,alt:t.alt_text}))}},{key:"deselectOnBlur",value:function(){this.props.onDeselect()}},{key:"onSelectImageFromLibrary",value:function(e){var t=this.props,r=t.setAttributes,n=t.id,a=t.url,l=t.alt,i=t.caption,o=t.sizeSlug;if(e&&e.url){var c=Y(e,o);if(function(e,t){return!e&&(0,b.isBlobURL)(t)}(n,a)&&l){var u=c;u.alt,c=B(u,_e)}if(i&&!(0,m.get)(c,["caption"])){var s=c;s.caption,c=B(s,Ee)}r(c),this.setState({isEditing:!1})}}},{key:"onSelectCustomURL",value:function(e){var t=this.props,r=t.setAttributes;e!==t.url&&(r({url:e,id:void 0}),this.setState({isEditing:!1}))}},{key:"render",value:function(){var t,r=this.props,n=r.url,a=r.alt,l=r.id,i=r.linkTo,c=r.link,u=r.isFirstItem,m=r.isLastItem,g=r.isSelected,f=r.caption,y=r.onRemove,v=r.onMoveForward,h=r.onMoveBackward,k=r.setAttributes,w=r["aria-label"],_=this.state.isEditing;switch(i){case ke:t=n;break;case we:t=c}var E=(0,e.createElement)(e.Fragment,null,(0,e.createElement)("img",{src:n,alt:a,"data-id":l,onKeyDown:this.onRemoveImage,tabIndex:"0","aria-label":w,ref:this.bindContainer}),(0,b.isBlobURL)(n)&&(0,e.createElement)(o.Spinner,null)),S=s()({"is-selected":g,"is-transient":(0,b.isBlobURL)(n)});return(0,e.createElement)("figure",{className:S,onClick:this.onSelectImage,onFocus:this.onSelectImage},!_&&(t?(0,e.createElement)("a",{href:t},E):E),_&&(0,e.createElement)(d.MediaPlaceholder,{labels:{title:(0,p.__)("Edit gallery image")},icon:ge,onSelect:this.onSelectImageFromLibrary,onSelectURL:this.onSelectCustomURL,accept:"image/*",allowedTypes:["image"],value:{id:l,src:n}}),(0,e.createElement)(o.ButtonGroup,{className:"block-library-gallery-item__inline-menu is-left"},(0,e.createElement)(o.Button,{icon:fe,onClick:u?void 0:h,label:(0,p.__)("Move image backward"),"aria-disabled":u,disabled:!g}),(0,e.createElement)(o.Button,{icon:be,onClick:m?void 0:v,label:(0,p.__)("Move image forward"),"aria-disabled":m,disabled:!g})),(0,e.createElement)(o.ButtonGroup,{className:"block-library-gallery-item__inline-menu is-right"},(0,e.createElement)(o.Button,{icon:ye,onClick:this.onEdit,label:(0,p.__)("Replace image"),disabled:!g}),(0,e.createElement)(o.Button,{icon:ve,onClick:y,label:(0,p.__)("Remove image"),disabled:!g})),!_&&(g||f)&&(0,e.createElement)(d.RichText,{tagName:"figcaption",className:(0,d.__experimentalGetElementClassName)("caption"),"aria-label":(0,p.__)("Image caption text"),placeholder:g?(0,p.__)("Add caption"):null,value:f,onChange:function(e){return k({caption:e})},inlineToolbar:!0}))}}])&&oe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(e.Component),Ce=(0,i.compose)([(0,g.withSelect)((function(e,t){var r=e(U.store).getMedia,n=t.id;return{image:n?r(parseInt(n,10)):null}})),(0,g.withDispatch)((function(e){return{__unstableMarkNextChangeAsNotPersistent:e(d.store).__unstableMarkNextChangeAsNotPersistent}}))])(Se),Oe=["isHidden"];function Pe(t){var r=t.isHidden,n=B(t,Oe);return r?(0,e.createElement)(o.VisuallyHidden,c({as:d.RichText},n)):(0,e.createElement)(d.RichText,n)}var xe=function(t){var r,l=t.attributes,i=t.isSelected,o=t.setAttributes,u=t.selectedImage,m=t.mediaPlaceholder,g=t.onMoveBackward,f=t.onMoveForward,b=t.onRemoveImage,y=t.onSelectImage,v=t.onDeselectImage,h=t.onSetImageAttributes,k=t.insertBlocksAfter,w=t.blockProps,_=l.align,E=l.columns,S=void 0===E?ne(l):E,C=l.caption,O=l.imageCrop,P=l.images;return(0,e.createElement)("figure",c({},w,{className:s()(w.className,(r={},n(r,"align".concat(_),_),n(r,"columns-".concat(S),S),n(r,"is-cropped",O),r))}),(0,e.createElement)("ul",{className:"blocks-gallery-grid"},P.map((function(t,r){var n=(0,p.sprintf)(
/* translators: 1: the order number of the image. 2: the total number of images. */
(0,p.__)("image %1$d of %2$d in gallery"),r+1,P.length);return(0,e.createElement)("li",{className:"blocks-gallery-item",key:t.id?"".concat(t.id,"-").concat(r):t.url},(0,e.createElement)(Ce,{url:t.url,alt:t.alt,id:t.id,isFirstItem:0===r,isLastItem:r+1===P.length,isSelected:i&&u===r,onMoveBackward:g(r),onMoveForward:f(r),onRemove:b(r),onSelect:y(r),onDeselect:v(r),setAttributes:function(e){return h(r,e)},caption:t.caption,"aria-label":n,sizeSlug:l.sizeSlug}))}))),m,(0,e.createElement)(Pe,{isHidden:!i&&d.RichText.isEmpty(C),tagName:"figcaption",className:s()("blocks-gallery-caption",(0,d.__experimentalGetElementClassName)("caption")),"aria-label":(0,p.__)("Gallery caption text"),placeholder:(0,p.__)("Write gallery captionâ€¦"),value:C,onChange:function(e){return o({caption:e})},inlineToolbar:!0,__unstableOnSplitAtEnd:function(){return k((0,a.createBlock)((0,a.getDefaultBlockName)()))}}))};function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Te=[{value:we,label:(0,p.__)("Attachment Page")},{value:ke,label:(0,p.__)("Media File")},{value:he,label:(0,p.__)("None")}],Ie=["image"],je=e.Platform.select({web:(0,p.__)("Drag images, upload new ones or select files from your library."),native:(0,p.__)("ADD MEDIA")}),Re=e.Platform.select({web:{},native:{type:"stepper"}});(0,i.compose)([o.withNotices,(0,f.withViewportMatch)({isNarrow:"< small"})])((function(r){var a=r.attributes,l=r.clientId,i=r.isSelected,u=r.noticeUI,s=r.noticeOperations,f=r.onFocus,y=a.columns,v=void 0===y?ne(a):y,h=a.imageCrop,w=a.images,_=a.linkTo,E=a.sizeSlug,S=G((0,e.useState)(),2),C=S[0],O=S[1],P=G((0,e.useState)(),2),x=P[0],B=P[1],N=(0,g.useDispatch)(d.store).__unstableMarkNextChangeAsNotPersistent,T=(0,g.useSelect)((function(e){var t=e(d.store).getSettings();return{imageSizes:t.imageSizes,mediaUpload:t.mediaUpload,getMedia:e(U.store).getMedia,wasBlockJustInserted:e(d.store).wasBlockJustInserted(l,"inserter_menu")}})),I=T.imageSizes,j=T.mediaUpload,R=T.getMedia,z=T.wasBlockJustInserted,M=(0,e.useMemo)((function(){return i?(0,m.reduce)(a.ids,(function(e,t){if(!t)return e;var r=R(t),a=(0,m.reduce)(I,(function(e,t){var a=(0,m.get)(r,["sizes",t.slug,"url"]),l=(0,m.get)(r,["media_details","sizes",t.slug,"source_url"]);return Ne(Ne({},e),{},n({},t.slug,a||l))}),{});return Ne(Ne({},e),{},n({},parseInt(t,10),a))}),{}):{}}),[i,a.ids,I]);function A(e){if(e.ids)throw new Error('The "ids" attribute should not be changed directly. It is managed automatically when "images" attribute changes');e.images&&(e=Ne(Ne({},e),{},{ids:(0,m.map)(e.images,(function(e){var t=e.id;return parseInt(t,10)}))})),r.setAttributes(e)}function D(e,t){var r=L(w);r.splice(t,1,w[e]),r.splice(e,1,w[t]),O(t),A({images:r})}function F(e){var t=e.id.toString(),r=(0,m.find)(w,{id:t}),n=r?r.caption:e.caption;if(!x)return n;var a=(0,m.find)(x,{id:t});return a&&a.caption!==e.caption?e.caption:n}function V(e){B(e.map((function(e){return{id:e.id.toString(),caption:e.caption}}))),A({images:e.map((function(e){return Ne(Ne({},Y(e,E)),{},{caption:F(e),id:e.id.toString()})})),columns:a.columns?Math.min(e.length,a.columns):a.columns})}(0,e.useEffect)((function(){if("web"===e.Platform.OS&&w&&w.length>0&&w.every((function(e){var t=e.url;return(0,b.isBlobURL)(t)}))){var t=(0,m.map)(w,(function(e){var t=e.url;return(0,b.getBlobByURL)(t)}));w.forEach((function(e){var t=e.url;return(0,b.revokeBlobURL)(t)})),j({filesList:t,onFileChange:V,allowedTypes:["image"]})}}),[]),(0,e.useEffect)((function(){i||O()}),[i]),(0,e.useEffect)((function(){var e,t,r,n,a,l;_||(N(),A({linkTo:(null===(e=window)||void 0===e||null===(t=e.wp)||void 0===t||null===(r=t.media)||void 0===r||null===(n=r.view)||void 0===n||null===(a=n.settings)||void 0===a||null===(l=a.defaultProps)||void 0===l?void 0:l.link)||he}))}),[_]);var H=!!w.length,q=H&&w.some((function(e){return!!e.id})),J=(0,e.createElement)(d.MediaPlaceholder,{addToGallery:q,isAppender:H,disableMediaButtons:H&&!i,icon:!H&&k,labels:{title:!H&&(0,p.__)("Gallery"),instructions:!H&&je},onSelect:V,accept:"image/*",allowedTypes:Ie,multiple:!0,value:q?w:{},onError:function(e){s.removeAllNotices(),s.createErrorNotice(e)},notices:H?void 0:u,onFocus:f,autoOpenMediaUpload:!H&&i&&z}),W=(0,d.useBlockProps)();if(!H)return(0,e.createElement)(t.View,W,J);var $=(0,m.map)((0,m.filter)(I,(function(e){var t=e.slug;return(0,m.some)(M,(function(e){return e[t]}))})),(function(e){var t=e.name;return{value:e.slug,label:t}})),Z=H&&!(0,m.isEmpty)($);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(d.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,p.__)("Settings")},w.length>1&&(0,e.createElement)(o.RangeControl,c({label:(0,p.__)("Columns"),value:v,onChange:function(e){A({columns:e})},min:1,max:Math.min(8,w.length)},Re,{required:!0})),(0,e.createElement)(o.ToggleControl,{label:(0,p.__)("Crop images"),checked:!!h,onChange:function(){A({imageCrop:!h})},help:function(e){return e?(0,p.__)("Thumbnails are cropped to align."):(0,p.__)("Thumbnails are not cropped.")}}),(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Link to"),value:_,onChange:function(e){A({linkTo:e})},options:Te,hideCancelButton:!0}),Z&&(0,e.createElement)(o.SelectControl,{label:(0,p.__)("Image size"),value:E,options:$,onChange:function(e){A({images:(0,m.map)(w,(function(t){if(!t.id)return t;var r=(0,m.get)(M,[parseInt(t.id,10),e]);return Ne(Ne({},t),r&&{url:r})})),sizeSlug:e})},hideCancelButton:!0}))),u,(0,e.createElement)(xe,c({},r,{selectedImage:C,mediaPlaceholder:J,onMoveBackward:function(e){return function(){0!==e&&D(e,e-1)}},onMoveForward:function(e){return function(){e!==w.length-1&&D(e,e+1)}},onRemoveImage:function(e){return function(){var t=(0,m.filter)(w,(function(t,r){return e!==r}));O(),A({images:t,columns:a.columns?Math.min(t.length,a.columns):a.columns})}},onSelectImage:function(e){return function(){O(e)}},onDeselectImage:function(){return function(){O()}},onSetImageAttributes:function(e,t){w[e]&&A({images:[].concat(L(w.slice(0,e)),[Ne(Ne({},w[e]),t)],L(w.slice(e+1)))})},blockProps:W,onFocusGalleryCaption:function(){O()}})))}));var ze=(0,i.compose)([o.withNotices])((function(t){return(0,e.createElement)(K,t)})),Me=window.wp.hooks;(0,Me.addFilter)("blocks.switchToBlockType.transformedBlock","growtype/gallery/update-third-party-transform-to",(function(e){var t;if("growtype/gallery"===e.name&&(null===(t=e.attributes)||void 0===t?void 0:t.images.length)>0){var r=e.attributes.images.map((function(t){var r=t.url,n=t.id,l=t.alt;return(0,a.createBlock)("core/image",{url:r,id:n?parseInt(n,10):null,alt:l,sizeSlug:e.attributes.sizeSlug,linkDestination:e.attributes.linkDestination})}));delete e.attributes.ids,delete e.attributes.images,e.innerBlocks=r}return e})),(0,Me.addFilter)("blocks.switchToBlockType.transformedBlock","growtype/gallery/update-third-party-transform-from",(function(e,t){var r=(Array.isArray(t)?t:[t]).find((function(t){var r;return"growtype/gallery"===t.name&&t.innerBlocks.length>0&&!(null!==(r=t.attributes.images)&&void 0!==r&&r.length)>0&&!e.name.includes("core/")}));if(r){var n=r.innerBlocks.map((function(e){var t=e.attributes,r=t.url,n=t.id,a=t.alt;return{url:r,id:n?parseInt(n,10):null,alt:a}})),a=n.map((function(e){return e.id}));r.attributes.images=n,r.attributes.ids=a}return e}));var Ae={from:[{type:"block",isMultiBlock:!0,blocks:["core/image"],transform:function(e){var t=e[0],r=t.align,n=t.sizeSlug;r=e.every((function(e){return e.align===r}))?r:void 0,n=e.every((function(e){return e.sizeSlug===n}))?n:void 0;var l=(0,m.filter)(e,(function(e){return e.url})).map((function(e){return e.width=void 0,e.height=void 0,(0,a.createBlock)("core/image",e)}));return(0,a.createBlock)("growtype/gallery",{align:r,sizeSlug:n},l)}},{type:"shortcode",tag:"gallery",attributes:{images:{type:"array",shortcode:function(e){e.named.ids}},ids:{type:"array",shortcode:function(e){e.named.ids}},columns:{type:"number",shortcode:function(e){var t=e.named.columns;return parseInt(void 0===t?"3":t,10)}},linkTo:{type:"string",shortcode:function(e){switch(e.named.link){case"post":return S;case"file":return E;default:return _}}}},transform:function(e){var t=e.named,r=t.ids,n=t.columns,l=void 0===n?3:n,i=t.link,o=function(e){return e?e.split(",").map((function(e){return parseInt(e,10)})):[]}(r).map((function(e){return parseInt(e,10)})),c=_;return"post"===i?c=S:"file"===i&&(c=E),(0,a.createBlock)("growtype/gallery",{columns:parseInt(l,10),linkTo:c},o.map((function(e){return(0,a.createBlock)("core/image",{id:e})})))},isMatch:function(e){return void 0!==e.named.ids}},{type:"files",priority:1,isMatch:function(e){return 1!==e.length&&e.every((function(e){return 0===e.type.indexOf("image/")}))},transform:function(e){var t=e.map((function(e){return(0,a.createBlock)("core/image",{url:(0,b.createBlobURL)(e)})}));return(0,a.createBlock)("growtype/gallery",{},t)}}],to:[{type:"block",blocks:["core/image"],transform:function(e,t){var r=e.align;return e.images,e.ids,e.sizeSlug,t.length>0?t.map((function(e){var t=e.attributes,n=t.url,l=t.alt,i=t.caption,o=t.title,c=t.href,u=t.rel,s=t.linkClass,m=t.id,d=t.sizeSlug,p=t.linkDestination,g=t.linkTarget,f=t.anchor,b=t.className;return(0,a.createBlock)("core/image",{align:r,url:n,alt:l,caption:i,title:o,href:c,rel:u,linkClass:s,id:m,sizeSlug:d,linkDestination:p,linkTarget:g,anchor:f,className:b})})):(0,a.createBlock)("core/image",{align:r})}}]},De=(0,e.createElement)(t.SVG,{width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M0.579738 26.2702H9.31891C9.31891 28.1128 14.952 28.8498 14.952 24.5329V23.2168C13.5832 25.0067 12.2144 25.3752 10.0033 25.3752C3.15937 25.3752 -0.052009 20.9003 0.000636649 14.8987C0.0532823 8.89715 3.31731 4.47492 9.74008 4.52756C11.688 4.52756 13.7938 5.10667 15.2152 6.84397L15.3732 4.84344H24.007V24.5329C24.007 37.6417 0.579738 37.0626 0.579738 26.2702ZM9.21362 15.2146C9.21362 19.0578 14.8467 19.0578 14.8467 15.162C14.8467 11.2662 9.21362 11.2136 9.21362 15.2146Z",fill:"#315344"}));!function(e){if(e){var t=e.metadata,r=e.settings,i=e.name;(0,a.registerBlockType)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:i},t),r)}}({name:v.name,metadata:v,settings:{icon:De,example:{attributes:{columns:2},innerBlocks:[{name:"core/image",attributes:{url:"https://s.w.org/images/core/5.3/Glacial_lakes%2C_Bhutan.jpg"}},{name:"core/image",attributes:{url:"https://s.w.org/images/core/5.3/Sediment_off_the_Yucatan_Peninsula.jpg"}}]},transforms:Ae,edit:ze,save:function(t){var r,a=t.attributes,l=a.caption,i=a.columns,o=a.columnsMobile,c=a.imageCrop,u=s()("has-nested-images",(n(r={},"columns-".concat(i),void 0!==i),n(r,"columns-mobile-".concat(o),void 0!==o),n(r,"columns-default",void 0===i),n(r,"is-cropped",c),r)),m=d.useBlockProps.save({className:u}),p=d.useInnerBlocksProps.save(m);return(0,e.createElement)("figure",p,p.children,!d.RichText.isEmpty(l)&&(0,e.createElement)(d.RichText.Content,{tagName:"figcaption",className:s()("blocks-gallery-caption"),value:l}))},deprecated:le}})}()}();